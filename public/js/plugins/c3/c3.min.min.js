!function(Z){function Y(b){this.owner=b}function X(e,d){if(Object.create){d.prototype=Object.create(e.prototype)}else{var f=function(){};f.prototype=e.prototype,d.prototype=new f}return d.prototype.constructor=d,d}function W(e){var d=this.internal=new V(this);d.loadConfig(e),d.beforeInit(e),d.init(),d.afterInit(e),function f(g,c,h){Object.keys(g).forEach(function(a){c[a]=g[a].bind(h),Object.keys(g[a]).length>0&&f(g[a],c[a],h)})}(S,this,this)}function V(a){var d=this;d.d3=Z.d3?Z.d3:"undefined"!=typeof require?require("d3"):void 0,d.api=a,d.config=d.getDefaultConfig(),d.data={},d.cache={},d.axes={}}function U(b){Y.call(this,b)}function T(ar,aq){function ap(d,c){d.attr("transform",function(b){return"translate("+Math.ceil(c(b)+x)+", 0)"})}function ao(d,c){d.attr("transform",function(b){return"translate(0,"+Math.ceil(c(b))+")"})}function an(e){var d=e[0],f=e[e.length-1];return f>d?[d,f]:[f,d]}function am(f){var e,h,g=[];if(f.ticks){return f.ticks.apply(f,ae)}for(h=f.domain(),e=Math.ceil(h[0]);e<h[1];e++){g.push(e)}return g.length>0&&g[0]>0&&g.unshift(g[0]-(g[1]-g[0])),g}function al(){var b,d=ac.copy();return aq.isCategory&&(b=ac.domain(),d.domain([b[0],b[1]-1])),d}function ak(d){var c=af?af(d):d;return"undefined"!=typeof c?c:""}function aj(d){if(A){return A}var c={h:11.5,w:5.5};return d.select("text").text(ak).each(function(b){var j=this.getBoundingClientRect(),i=ak(b),h=j.height,g=i?j.width/i.length:void 0;h&&g&&(c.h=h,c.w=g)}).text(""),A=c,c}function ai(a){return aq.withoutTransition?a:ar.transition(a)}function ah(a){a.each(function(){function aI(m,aN){function aM(aP,aO){aK=void 0;for(var aQ=1;aQ<aO.length;aQ++){if(" "===aO.charAt(aQ)&&(aK=aQ),aL=aO.substr(0,aQ+1),aJ=g.w*aL.length,aJ>aN){return aM(aP.concat(aO.substr(0,aK?aK:aQ)),aO.slice(aK?aK+1:aQ))}}return aP.concat(aO)}var aL,aK,aJ,v=ak(m),n=[];return"[object Array]"===Object.prototype.toString.call(v)?v:((!aN||0>=aN)&&(aN=d?95:aq.isCategory?Math.ceil(aB(az[1])-aB(az[0]))-12:110),aM(n,v+""))}function aH(n,m){var v=g.h;return 0===m&&(v="left"===ab||"right"===ab?-((f[n.index]-1)*(g.h/2)-3):".71em"),v}function aA(n){var m=ac(n)+(ad?0:x);return s[0]<m&&m<s[1]?aa:0}function ay(m){return m?m>0?"start":"end":"middle"}function aw(m){return m?"rotate("+m+")":""}function au(m){return m?8*Math.sin(Math.PI*(m/180)):0}function u(m){return m?11.5-2.5*(m/15)*(m>0?1:-1):e}var aG,aF,aE,aD=ah.g=ar.select(this),aC=this.__chart__||ac,aB=this.__chart__=al(),az=y?y:am(aB),ax=aD.selectAll(".tick").data(az,aB),av=ax.enter().insert("g",".domain").attr("class","tick").style("opacity",0.000001),at=ax.exit().remove(),t=ai(ax).style("opacity",1),s=ac.rangeExtent?ac.rangeExtent():an(ac.range()),r=aD.selectAll(".domain").data([0]),q=(r.enter().append("path").attr("class","domain"),ai(r));av.append("line"),av.append("text");var p=av.select("line"),o=t.select("line"),l=av.select("text"),k=t.select("text");aq.isCategory?(x=Math.ceil((aB(1)-aB(0))/2),aF=ad?0:x,aE=ad?x:0):x=aF=0;var j,h,g=aj(aD.select(".tick")),f=[],e=Math.max(aa,0)+z,d="left"===ab||"right"===ab;j=ax.select("text"),h=j.selectAll("tspan").data(function(m,v){var n=aq.tickMultiline?aI(m,aq.tickWidth):[].concat(ak(m));return f[v]=n.length,n.map(function(aJ){return{index:v,splitted:aJ}})}),h.enter().append("tspan"),h.exit().remove(),h.text(function(m){return m.splitted});var c=aq.tickTextRotate;switch(ab){case"bottom":aG=ap,p.attr("y2",aa),l.attr("y",e),o.attr("x1",aF).attr("x2",aF).attr("y2",aA),k.attr("x",0).attr("y",u(c)).style("text-anchor",ay(c)).attr("transform",aw(c)),h.attr("x",0).attr("dy",aH).attr("dx",au(c)),q.attr("d","M"+s[0]+","+ag+"V0H"+s[1]+"V"+ag);break;case"top":aG=ap,p.attr("y2",-aa),l.attr("y",-e),o.attr("x2",0).attr("y2",-aa),k.attr("x",0).attr("y",-e),j.style("text-anchor","middle"),h.attr("x",0).attr("dy","0em"),q.attr("d","M"+s[0]+","+-ag+"V0H"+s[1]+"V"+-ag);break;case"left":aG=ao,p.attr("x2",-aa),l.attr("x",-e),o.attr("x2",-aa).attr("y1",aE).attr("y2",aE),k.attr("x",-e).attr("y",x),j.style("text-anchor","end"),h.attr("x",-e).attr("dy",aH),q.attr("d","M"+-ag+","+s[0]+"H0V"+s[1]+"H"+-ag);break;case"right":aG=ao,p.attr("x2",aa),l.attr("x",e),o.attr("x2",aa).attr("y2",0),k.attr("x",e).attr("y",0),j.style("text-anchor","start"),h.attr("x",e).attr("dy",aH),q.attr("d","M"+ag+","+s[0]+"H0V"+s[1]+"H"+ag)}if(aB.rangeBand){var b=aB,i=b.rangeBand()/2;aC=aB=function(m){return b(m)+i}}else{aC.rangeBand?aC=aB:at.call(aG,aB)}av.call(aG,aC),t.call(aG,aB)})}var ag,af,ae,ad,ac=ar.scale.linear(),ab="bottom",aa=6,z=3,y=null,x=0,w=!0;return aq=aq||{},ag=aq.withOuterTick?6:0,ah.scale=function(b){return arguments.length?(ac=b,ah):ac},ah.orient=function(b){return arguments.length?(ab=b in {top:1,right:1,bottom:1,left:1}?b+"":"bottom",ah):ab},ah.tickFormat=function(b){return arguments.length?(af=b,ah):af},ah.tickCentered=function(b){return arguments.length?(ad=b,ah):ad},ah.tickOffset=function(){return x},ah.tickInterval=function(){var b,d;return aq.isCategory?b=2*x:(d=ah.g.select("path.domain").node().getTotalLength()-2*ag,b=d/ah.g.selectAll("line").size()),b===1/0?0:b},ah.ticks=function(){return arguments.length?(ae=arguments,ah):ae},ah.tickCulling=function(b){return arguments.length?(w=b,ah):w},ah.tickValues=function(b){if("function"==typeof b){y=function(){return b(ac.domain())}}else{if(!arguments.length){return y}y=b}return ah},ah}var S,R,Q,P={version:"0.4.11-rc4"};P.generate=function(b){return new W(b)},P.chart={fn:W.prototype,internal:{fn:V.prototype,axis:{fn:U.prototype}}},S=P.chart.fn,R=P.chart.internal.fn,Q=P.chart.internal.axis.fn,R.beforeInit=function(){},R.afterInit=function(){},R.init=function(){var d=this,c=d.config;if(d.initParams(),c.data_url){d.convertUrlToData(c.data_url,c.data_mimeType,c.data_keys,d.initWithData)}else{if(c.data_json){d.initWithData(d.convertJsonToData(c.data_json,c.data_keys))}else{if(c.data_rows){d.initWithData(d.convertRowsToData(c.data_rows))}else{if(!c.data_columns){throw Error("url or json or rows or columns is required.")}d.initWithData(d.convertColumnsToData(c.data_columns))}}}},R.initParams=function(){var e=this,d=e.d3,f=e.config;e.clipId="c3-"+ +new Date+"-clip",e.clipIdForXAxis=e.clipId+"-xaxis",e.clipIdForYAxis=e.clipId+"-yaxis",e.clipIdForGrid=e.clipId+"-grid",e.clipIdForSubchart=e.clipId+"-subchart",e.clipPath=e.getClipPath(e.clipId),e.clipPathForXAxis=e.getClipPath(e.clipIdForXAxis),e.clipPathForYAxis=e.getClipPath(e.clipIdForYAxis),e.clipPathForGrid=e.getClipPath(e.clipIdForGrid),e.clipPathForSubchart=e.getClipPath(e.clipIdForSubchart),e.dragStart=null,e.dragging=!1,e.flowing=!1,e.cancelClick=!1,e.mouseover=!1,e.transiting=!1,e.color=e.generateColor(),e.levelColor=e.generateLevelColor(),e.dataTimeFormat=f.data_xLocaltime?d.time.format:d.time.format.utc,e.axisTimeFormat=f.axis_x_localtime?d.time.format:d.time.format.utc,e.defaultAxisTimeFormat=e.axisTimeFormat.multi([[".%L",function(b){return b.getMilliseconds()}],[":%S",function(b){return b.getSeconds()}],["%I:%M",function(b){return b.getMinutes()}],["%I %p",function(b){return b.getHours()}],["%-m/%-d",function(b){return b.getDay()&&1!==b.getDate()}],["%-m/%-d",function(b){return 1!==b.getDate()}],["%-m/%-d",function(b){return b.getMonth()}],["%Y/%-m/%-d",function(){return !0}]]),e.hiddenTargetIds=[],e.hiddenLegendIds=[],e.focusedTargetIds=[],e.defocusedTargetIds=[],e.xOrient=f.axis_rotated?"left":"bottom",e.yOrient=f.axis_rotated?f.axis_y_inner?"top":"bottom":f.axis_y_inner?"right":"left",e.y2Orient=f.axis_rotated?f.axis_y2_inner?"bottom":"top":f.axis_y2_inner?"left":"right",e.subXOrient=f.axis_rotated?"left":"bottom",e.isLegendRight="right"===f.legend_position,e.isLegendInset="inset"===f.legend_position,e.isLegendTop="top-left"===f.legend_inset_anchor||"top-right"===f.legend_inset_anchor,e.isLegendLeft="top-left"===f.legend_inset_anchor||"bottom-left"===f.legend_inset_anchor,e.legendStep=0,e.legendItemWidth=0,e.legendItemHeight=0,e.currentMaxTickWidths={x:0,y:0,y2:0},e.rotated_padding_left=30,e.rotated_padding_right=f.axis_rotated&&!f.axis_x_show?0:30,e.rotated_padding_top=5,e.withoutFadeIn={},e.intervalForObserveInserted=void 0,e.axes.subx=d.selectAll([])},R.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},R.initWithData=function(i){var f,n,m=this,l=m.d3,k=m.config,j=!0;m.axis=new U(m),m.initPie&&m.initPie(),m.initBrush&&m.initBrush(),m.initZoom&&m.initZoom(),k.bindto?"function"==typeof k.bindto.node?m.selectChart=k.bindto:m.selectChart=l.select(k.bindto):m.selectChart=l.selectAll([]),m.selectChart.empty()&&(m.selectChart=l.select(document.createElement("div")).style("opacity",0),m.observeInserted(m.selectChart),j=!1),m.selectChart.html("").classed("c3",!0),m.data.xs={},m.data.targets=m.convertDataToTargets(i),k.data_filter&&(m.data.targets=m.data.targets.filter(k.data_filter)),k.data_hide&&m.addHiddenTargetIds(k.data_hide===!0?m.mapToIds(m.data.targets):k.data_hide),k.legend_hide&&m.addHiddenLegendIds(k.legend_hide===!0?m.mapToIds(m.data.targets):k.legend_hide),m.hasType("gauge")&&(k.legend_show=!1),m.updateSizes(),m.updateScales(),m.x.domain(l.extent(m.getXDomain(m.data.targets))),m.y.domain(m.getYDomain(m.data.targets,"y")),m.y2.domain(m.getYDomain(m.data.targets,"y2")),m.subX.domain(m.x.domain()),m.subY.domain(m.y.domain()),m.subY2.domain(m.y2.domain()),m.orgXDomain=m.x.domain(),m.brush&&m.brush.scale(m.subX),k.zoom_enabled&&m.zoom.scale(m.x),m.svg=m.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return k.onmouseover.call(m)}).on("mouseleave",function(){return k.onmouseout.call(m)}),m.config.svg_classname&&m.svg.attr("class",m.config.svg_classname),f=m.svg.append("defs"),m.clipChart=m.appendClip(f,m.clipId),m.clipXAxis=m.appendClip(f,m.clipIdForXAxis),m.clipYAxis=m.appendClip(f,m.clipIdForYAxis),m.clipGrid=m.appendClip(f,m.clipIdForGrid),m.clipSubchart=m.appendClip(f,m.clipIdForSubchart),m.updateSvgSize(),n=m.main=m.svg.append("g").attr("transform",m.getTranslate("main")),m.initSubchart&&m.initSubchart(),m.initTooltip&&m.initTooltip(),m.initLegend&&m.initLegend(),m.initTitle&&m.initTitle(),n.append("text").attr("class",O.text+" "+O.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),m.initRegion(),m.initGrid(),n.append("g").attr("clip-path",m.clipPath).attr("class",O.chart),k.grid_lines_front&&m.initGridLines(),m.initEventRect(),m.initChartElements(),n.insert("rect",k.zoom_privileged?null:"g."+O.regions).attr("class",O.zoomRect).attr("width",m.width).attr("height",m.height).style("opacity",0).on("dblclick.zoom",null),k.axis_x_extent&&m.brush.extent(m.getDefaultExtent()),m.axis.init(),m.updateTargets(m.data.targets),j&&(m.updateDimension(),m.config.oninit.call(m),m.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),m.bindResize(),m.api.element=m.selectChart.node()},R.smoothLines=function(e,d){var f=this;"grid"===d&&e.each(function(){var g=f.d3.select(this),c=g.attr("x1"),j=g.attr("x2"),i=g.attr("y1"),h=g.attr("y2");g.attr({x1:Math.ceil(c),x2:Math.ceil(j),y1:Math.ceil(i),y2:Math.ceil(h)})})},R.updateSizes=function(){var j=this,i=j.config,p=j.legend?j.getLegendHeight():0,o=j.legend?j.getLegendWidth():0,n=j.isLegendRight||j.isLegendInset?0:p,m=j.hasArcType(),l=i.axis_rotated||m?0:j.getHorizontalAxisHeight("x"),k=i.subchart_show&&!m?i.subchart_size_height+l:0;j.currentWidth=j.getCurrentWidth(),j.currentHeight=j.getCurrentHeight(),j.margin=i.axis_rotated?{top:j.getHorizontalAxisHeight("y2")+j.getCurrentPaddingTop(),right:m?0:j.getCurrentPaddingRight(),bottom:j.getHorizontalAxisHeight("y")+n+j.getCurrentPaddingBottom(),left:k+(m?0:j.getCurrentPaddingLeft())}:{top:4+j.getCurrentPaddingTop(),right:m?0:j.getCurrentPaddingRight(),bottom:l+k+n+j.getCurrentPaddingBottom(),left:m?0:j.getCurrentPaddingLeft()},j.margin2=i.axis_rotated?{top:j.margin.top,right:NaN,bottom:20+n,left:j.rotated_padding_left}:{top:j.currentHeight-k-n,right:NaN,bottom:l+n,left:j.margin.left},j.margin3={top:0,right:NaN,bottom:0,left:0},j.updateSizeForLegend&&j.updateSizeForLegend(p,o),j.width=j.currentWidth-j.margin.left-j.margin.right,j.height=j.currentHeight-j.margin.top-j.margin.bottom,j.width<0&&(j.width=0),j.height<0&&(j.height=0),j.width2=i.axis_rotated?j.margin.left-j.rotated_padding_left-j.rotated_padding_right:j.width,j.height2=i.axis_rotated?j.height:j.currentHeight-j.margin2.top-j.margin2.bottom,j.width2<0&&(j.width2=0),j.height2<0&&(j.height2=0),j.arcWidth=j.width-(j.isLegendRight?o+10:0),j.arcHeight=j.height-(j.isLegendRight?0:10),j.hasType("gauge")&&(j.arcHeight+=j.height-j.getGaugeLabelHeight()),j.updateRadius&&j.updateRadius(),j.isLegendRight&&m&&(j.margin3.left=j.arcWidth/2+1.1*j.radiusExpanded)},R.updateTargets=function(d){var c=this;c.updateTargetsForText(d),c.updateTargetsForBar(d),c.updateTargetsForLine(d),c.hasArcType()&&c.updateTargetsForArc&&c.updateTargetsForArc(d),c.updateTargetsForSubchart&&c.updateTargetsForSubchart(d),c.showTargets()},R.showTargets=function(){var b=this;b.svg.selectAll("."+O.target).filter(function(a){return b.isTargetToShow(a.id)}).transition().duration(b.config.transition_duration).style("opacity",1)},R.redraw=function(aN,aM){var aL,aK,aJ,aI,aH,aG,aF,aE,aD,aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al,ak,aj,ai,ah=this,ag=ah.main,af=ah.d3,ae=ah.config,ad=ah.getShapeIndices(ah.isAreaType),ac=ah.getShapeIndices(ah.isBarType),ab=ah.getShapeIndices(ah.isLineType),aa=ah.hasArcType(),w=ah.filterTargetsToShow(ah.data.targets),l=ah.xv.bind(ah);if(aN=aN||{},aL=D(aN,"withY",!0),aK=D(aN,"withSubchart",!0),aJ=D(aN,"withTransition",!0),aG=D(aN,"withTransform",!1),aF=D(aN,"withUpdateXDomain",!1),aE=D(aN,"withUpdateOrgXDomain",!1),aD=D(aN,"withTrimXDomain",!0),az=D(aN,"withUpdateXAxis",aF),aC=D(aN,"withLegend",!1),aB=D(aN,"withEventRect",!0),aA=D(aN,"withDimension",!0),aI=D(aN,"withTransitionForExit",aJ),aH=D(aN,"withTransitionForAxis",aJ),at=aJ?ae.transition_duration:0,ar=aI?at:0,aq=aH?at:0,aM=aM||ah.axis.generateTransitions(aq),aC&&ae.legend_show?ah.updateLegend(ah.mapToIds(ah.data.targets),aN,aM):aA&&ah.updateDimension(!0),ah.isCategorized()&&0===w.length&&ah.x.domain([0,ah.axes.x.selectAll(".tick").size()]),w.length?(ah.updateXDomain(w,aF,aE,aD),ae.axis_x_tick_values||(an=ah.axis.updateXAxisTickValues(w))):(ah.xAxis.tickValues([]),ah.subXAxis.tickValues([])),ae.zoom_rescale&&!aN.flow&&(ak=ah.x.orgDomain()),ah.y.domain(ah.getYDomain(w,"y",ak)),ah.y2.domain(ah.getYDomain(w,"y2",ak)),!ae.axis_y_tick_values&&ae.axis_y_tick_count&&ah.yAxis.tickValues(ah.axis.generateTickValues(ah.y.domain(),ae.axis_y_tick_count)),!ae.axis_y2_tick_values&&ae.axis_y2_tick_count&&ah.y2Axis.tickValues(ah.axis.generateTickValues(ah.y2.domain(),ae.axis_y2_tick_count)),ah.axis.redraw(aM,aa),ah.axis.updateLabels(aJ),(aF||az)&&w.length){if(ae.axis_x_tick_culling&&an){for(am=1;am<an.length;am++){if(an.length/am<ae.axis_x_tick_culling_max){al=am;break}}ah.svg.selectAll("."+O.axisX+" .tick text").each(function(d){var c=an.indexOf(d);c>=0&&af.select(this).style("display",c%al?"none":"block")})}else{ah.svg.selectAll("."+O.axisX+" .tick text").style("display","block")}}ay=ah.generateDrawArea?ah.generateDrawArea(ad,!1):void 0,ax=ah.generateDrawBar?ah.generateDrawBar(ac):void 0,aw=ah.generateDrawLine?ah.generateDrawLine(ab,!1):void 0,av=ah.generateXYForText(ad,ac,ab,!0),au=ah.generateXYForText(ad,ac,ab,!1),aL&&(ah.subY.domain(ah.getYDomain(w,"y")),ah.subY2.domain(ah.getYDomain(w,"y2"))),ah.updateXgridFocus(),ag.select("text."+O.text+"."+O.empty).attr("x",ah.width/2).attr("y",ah.height/2).text(ae.data_empty_label_text).transition().style("opacity",w.length?0:1),ah.updateGrid(at),ah.updateRegion(at),ah.updateBar(ar),ah.updateLine(ar),ah.updateArea(ar),ah.updateCircle(),ah.hasDataLabel()&&ah.updateText(ar),ah.redrawTitle&&ah.redrawTitle(),ah.redrawArc&&ah.redrawArc(at,ar,aG),ah.redrawSubchart&&ah.redrawSubchart(aK,aM,at,ar,ad,ac,ab),ag.selectAll("."+O.selectedCircles).filter(ah.isBarType.bind(ah)).selectAll("circle").remove(),ae.interaction_enabled&&!aN.flow&&aB&&(ah.redrawEventRect(),ah.updateZoom&&ah.updateZoom()),ah.updateCircleY(),aj=(ah.config.axis_rotated?ah.circleY:ah.circleX).bind(ah),ai=(ah.config.axis_rotated?ah.circleX:ah.circleY).bind(ah),aN.flow&&(ao=ah.generateFlow({targets:w,flow:aN.flow,duration:aN.flow.duration,drawBar:ax,drawLine:aw,drawArea:ay,cx:aj,cy:ai,xv:l,xForText:av,yForText:au})),(at||ao)&&ah.isTabVisible()?af.transition().duration(at).each(function(){var a=[];[ah.redrawBar(ax,!0),ah.redrawLine(aw,!0),ah.redrawArea(ay,!0),ah.redrawCircle(aj,ai,!0),ah.redrawText(av,au,aN.flow,!0),ah.redrawRegion(!0),ah.redrawGrid(!0)].forEach(function(b){b.forEach(function(c){a.push(c)})}),ap=ah.generateWait(),a.forEach(function(b){ap.add(b)})}).call(ap,function(){ao&&ao(),ae.onrendered&&ae.onrendered.call(ah)}):(ah.redrawBar(ax),ah.redrawLine(aw),ah.redrawArea(ay),ah.redrawCircle(aj,ai),ah.redrawText(av,au,aN.flow),ah.redrawRegion(),ah.redrawGrid(),ae.onrendered&&ae.onrendered.call(ah)),ah.mapToIds(ah.data.targets).forEach(function(b){ah.withoutFadeIn[b]=!0})},R.updateAndRedraw=function(f){var e,h=this,g=h.config;f=f||{},f.withTransition=D(f,"withTransition",!0),f.withTransform=D(f,"withTransform",!1),f.withLegend=D(f,"withLegend",!1),f.withUpdateXDomain=!0,f.withUpdateOrgXDomain=!0,f.withTransitionForExit=!1,f.withTransitionForTransform=D(f,"withTransitionForTransform",f.withTransition),h.updateSizes(),f.withLegend&&g.legend_show||(e=h.axis.generateTransitions(f.withTransitionForAxis?g.transition_duration:0),h.updateScales(),h.updateSvgSize(),h.transformAll(f.withTransitionForTransform,e)),h.redraw(f,e)},R.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},R.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},R.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},R.isCustomX=function(){var d=this,c=d.config;return !d.isTimeSeries()&&(c.data_x||E(c.data_xs))},R.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},R.getTranslate=function(g){var f,j,i=this,h=i.config;return"main"===g?(f=H(i.margin.left),j=H(i.margin.top)):"context"===g?(f=H(i.margin2.left),j=H(i.margin2.top)):"legend"===g?(f=i.margin3.left,j=i.margin3.top):"x"===g?(f=0,j=h.axis_rotated?0:i.height):"y"===g?(f=0,j=h.axis_rotated?i.height:0):"y2"===g?(f=h.axis_rotated?0:i.width,j=h.axis_rotated?1:0):"subx"===g?(f=0,j=h.axis_rotated?0:i.height2):"arc"===g&&(f=i.arcWidth/2,j=i.arcHeight/2),"translate("+f+","+j+")"},R.initialOpacity=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?1:0},R.initialOpacityForCircle=function(b){return null!==b.value&&this.withoutFadeIn[b.id]?this.opacityForCircle(b):0},R.opacityForCircle=function(d){var c=this.config.point_show?1:0;return N(d.value)?this.isScatterType(d)?0.5:c:0},R.opacityForText=function(){return this.hasDataLabel()?1:0},R.xx=function(b){return b?this.x(b.x):null},R.xv=function(e){var d=this,f=e.value;return d.isTimeSeries()?f=d.parseDate(e.value):d.isCategorized()&&"string"==typeof e.value&&(f=d.config.axis_x_categories.indexOf(e.value)),Math.ceil(d.x(f))},R.yv=function(e){var d=this,f=e.axis&&"y2"===e.axis?d.y2:d.y;return Math.ceil(f(e.value))},R.subxx=function(b){return b?this.subX(b.x):null},R.transformMain=function(h,g){var l,k,j,i=this;g&&g.axisX?l=g.axisX:(l=i.main.select("."+O.axisX),h&&(l=l.transition())),g&&g.axisY?k=g.axisY:(k=i.main.select("."+O.axisY),h&&(k=k.transition())),g&&g.axisY2?j=g.axisY2:(j=i.main.select("."+O.axisY2),h&&(j=j.transition())),(h?i.main.transition():i.main).attr("transform",i.getTranslate("main")),l.attr("transform",i.getTranslate("x")),k.attr("transform",i.getTranslate("y")),j.attr("transform",i.getTranslate("y2")),i.main.select("."+O.chartArcs).attr("transform",i.getTranslate("arc"))},R.transformAll=function(e,d){var f=this;f.transformMain(e,d),f.config.subchart_show&&f.transformContext(e,d),f.legend&&f.transformLegend(e)},R.updateSvgSize=function(){var d=this,c=d.svg.select(".c3-brush .background");d.svg.attr("width",d.currentWidth).attr("height",d.currentHeight),d.svg.selectAll(["#"+d.clipId,"#"+d.clipIdForGrid]).select("rect").attr("width",d.width).attr("height",d.height),d.svg.select("#"+d.clipIdForXAxis).select("rect").attr("x",d.getXAxisClipX.bind(d)).attr("y",d.getXAxisClipY.bind(d)).attr("width",d.getXAxisClipWidth.bind(d)).attr("height",d.getXAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForYAxis).select("rect").attr("x",d.getYAxisClipX.bind(d)).attr("y",d.getYAxisClipY.bind(d)).attr("width",d.getYAxisClipWidth.bind(d)).attr("height",d.getYAxisClipHeight.bind(d)),d.svg.select("#"+d.clipIdForSubchart).select("rect").attr("width",d.width).attr("height",c.size()?c.attr("height"):0),d.svg.select("."+O.zoomRect).attr("width",d.width).attr("height",d.height),d.selectChart.style("max-height",d.currentHeight+"px")},R.updateDimension=function(d){var c=this;d||(c.config.axis_rotated?(c.axes.x.call(c.xAxis),c.axes.subx.call(c.subXAxis)):(c.axes.y.call(c.yAxis),c.axes.y2.call(c.y2Axis))),c.updateSizes(),c.updateScales(),c.updateSvgSize(),c.transformAll(!1)},R.observeInserted=function(a){var f,e=this;return"undefined"==typeof MutationObserver?void Z.console.error("MutationObserver not defined."):(f=new MutationObserver(function(b){b.forEach(function(c){"childList"===c.type&&c.previousSibling&&(f.disconnect(),e.intervalForObserveInserted=Z.setInterval(function(){a.node().parentNode&&(Z.clearInterval(e.intervalForObserveInserted),e.updateDimension(),e.brush&&e.brush.update(),e.config.oninit.call(e),e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),a.transition().style("opacity",1))},10))})}),void f.observe(a.node(),{attributes:!0,childList:!0,characterData:!0}))},R.bindResize=function(){var a=this,f=a.config;if(a.resizeFunction=a.generateResize(),a.resizeFunction.add(function(){f.onresize.call(a)}),f.resize_auto&&a.resizeFunction.add(function(){void 0!==a.resizeTimeout&&Z.clearTimeout(a.resizeTimeout),a.resizeTimeout=Z.setTimeout(function(){delete a.resizeTimeout,a.api.flush()},100)}),a.resizeFunction.add(function(){f.onresized.call(a)}),Z.attachEvent){Z.attachEvent("onresize",a.resizeFunction)}else{if(Z.addEventListener){Z.addEventListener("resize",a.resizeFunction,!1)}else{var e=Z.onresize;e?e.add&&e.remove||(e=a.generateResize(),e.add(Z.onresize)):e=a.generateResize(),e.add(a.resizeFunction),Z.onresize=e}}},R.generateResize=function(){function d(){c.forEach(function(b){b()})}var c=[];return d.add=function(b){c.push(b)},d.remove=function(b){for(var e=0;e<c.length;e++){if(c[e]===b){c.splice(e,1);break}}},d},R.endall=function(e,d){var f=0;e.each(function(){++f}).each("end",function(){--f||d.apply(this,arguments)})},R.generateWait=function(){var d=[],c=function(a,f){var e=setInterval(function(){var g=0;d.forEach(function(b){if(b.empty()){return void (g+=1)}try{b.transition()}catch(h){g+=1}}),g===d.length&&(clearInterval(e),f&&f())},10)};return c.add=function(a){d.push(a)},c},R.parseDate=function(a){var f,e=this;return a instanceof Date?f=a:"string"==typeof a?f=e.dataTimeFormat(e.config.data_xFormat).parse(a):"number"!=typeof a||isNaN(a)||(f=new Date(+a)),(!f||isNaN(+f))&&Z.console.error("Failed to parse x '"+a+"' to Date object"),f},R.isTabVisible=function(){var b;return"undefined"!=typeof document.hidden?b="hidden":"undefined"!=typeof document.mozHidden?b="mozHidden":"undefined"!=typeof document.msHidden?b="msHidden":"undefined"!=typeof document.webkitHidden&&(b="webkitHidden"),document[b]?!1:!0},R.getDefaultConfig=function(){var b={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(c){return c},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return !0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:0.6,bar_width_max:void 0,bar_zerobased:!0,area_zerobased:!0,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:0.05,pie_expand:{},pie_expand_duration:50,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:0.05,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(f,e,h,g){return this.getTooltipContent?this.getTooltipContent(f,e,h,g):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(a){b[a]=this.additionalConfig[a]},this),b},R.additionalConfig={},R.loadConfig=function(h){function g(){var b=k.shift();return b&&l&&"object"==typeof l&&b in l?(l=l[b],g()):b?void 0:l}var l,k,j,i=this.config;Object.keys(i).forEach(function(a){l=h,k=a.split("_"),j=g(),J(j)&&(i[a]=j)})},R.getScale=function(e,d,f){return(f?this.d3.time.scale():this.d3.scale.linear()).range([e,d])},R.getX=function(j,i,p,o){var n,m=this,l=m.getScale(j,i,m.isTimeSeries()),k=p?l.domain(p):l;m.isCategorized()?(o=o||function(){return 0},l=function(e,d){var f=k(e)+o(e);return d?f:Math.ceil(f)}):l=function(e,d){var f=k(e);return d?f:Math.ceil(f)};for(n in k){l[n]=k[n]}return l.orgDomain=function(){return k.domain()},m.isCategorized()&&(l.domain=function(b){return arguments.length?(k.domain(b),l):(b=this.orgDomain(),[b[0],b[1]+1])}),l},R.getY=function(f,e,h){var g=this.getScale(f,e,this.isTimeSeriesY());return h&&g.domain(h),g},R.getYScale=function(b){return"y2"===this.axis.getId(b)?this.y2:this.y},R.getSubYScale=function(b){return"y2"===this.axis.getId(b)?this.subY2:this.subY},R.updateScales=function(){var e=this,d=e.config,f=!e.x;e.xMin=d.axis_rotated?1:0,e.xMax=d.axis_rotated?e.height:e.width,e.yMin=d.axis_rotated?0:e.height,e.yMax=d.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=d.axis_rotated?0:e.height2,e.subYMax=d.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,f?void 0:e.x.orgDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,f?d.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,f?d.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(a){return a%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,f?d.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,f?d.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,d.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,d.axis_y_tick_format,e.yAxisTickValues,d.axis_y_tick_outer),e.y2Axis=e.axis.getYAxis(e.y2,e.y2Orient,d.axis_y2_tick_format,e.y2AxisTickValues,d.axis_y2_tick_outer),f||(e.brush&&e.brush.scale(e.subX),d.zoom_enabled&&e.zoom.scale(e.x)),e.updateArc&&e.updateArc()},R.getYDomainMin=function(v){var u,t,s,r,q,p,o=this,n=o.config,m=o.mapToIds(v),l=o.getValuesAsIdKeyed(v);if(n.data_groups.length>0){for(p=o.hasNegativeValueInTargets(v),u=0;u<n.data_groups.length;u++){if(r=n.data_groups[u].filter(function(b){return m.indexOf(b)>=0}),0!==r.length){for(s=r[0],p&&l[s]&&l[s].forEach(function(d,c){l[s][c]=0>d?d:0}),t=1;t<r.length;t++){q=r[t],l[q]&&l[q].forEach(function(d,c){o.axis.getId(q)!==o.axis.getId(s)||!l[s]||p&&+d>0||(l[s][c]+=+d)})}}}}return o.d3.min(Object.keys(l).map(function(b){return o.d3.min(l[b])}))},R.getYDomainMax=function(v){var u,t,s,r,q,p,o=this,n=o.config,m=o.mapToIds(v),l=o.getValuesAsIdKeyed(v);if(n.data_groups.length>0){for(p=o.hasPositiveValueInTargets(v),u=0;u<n.data_groups.length;u++){if(r=n.data_groups[u].filter(function(b){return m.indexOf(b)>=0}),0!==r.length){for(s=r[0],p&&l[s]&&l[s].forEach(function(d,c){l[s][c]=d>0?d:0}),t=1;t<r.length;t++){q=r[t],l[q]&&l[q].forEach(function(d,c){o.axis.getId(q)!==o.axis.getId(s)||!l[s]||p&&0>+d||(l[s][c]+=+d)})}}}}return o.d3.max(Object.keys(l).map(function(b){return o.d3.max(l[b])}))},R.getYDomain=function(ay,ax,aw){var av,au,at,ar,aq,ap,ao,an,am,al,ak,aj=this,ah=aj.config,af=ay.filter(function(b){return aj.axis.getId(b.id)===ax}),ad=aw?aj.filterByXDomain(af,aw):af,ab="y2"===ax?ah.axis_y2_min:ah.axis_y_min,aa="y2"===ax?ah.axis_y2_max:ah.axis_y_max,v=aj.getYDomainMin(ad),t=aj.getYDomainMax(ad),m="y2"===ax?ah.axis_y2_center:ah.axis_y_center,ai=aj.hasType("bar",ad)&&ah.bar_zerobased||aj.hasType("area",ad)&&ah.area_zerobased,ag="y2"===ax?ah.axis_y2_inverted:ah.axis_y_inverted,ae=aj.hasDataLabel()&&ah.axis_rotated,ac=aj.hasDataLabel()&&!ah.axis_rotated;return v=N(ab)?ab:N(aa)?aa>v?v:aa-10:v,t=N(aa)?aa:N(ab)?t>ab?t:ab+10:t,0===ad.length?"y2"===ax?aj.y2.domain():aj.y.domain():(isNaN(v)&&(v=0),isNaN(t)&&(t=v),v===t&&(0>v?t=0:v=0),al=v>=0&&t>=0,ak=0>=v&&0>=t,(N(ab)&&al||N(aa)&&ak)&&(ai=!1),ai&&(al&&(v=0),ak&&(t=0)),au=Math.abs(t-v),at=ar=aq=0.1*au,"undefined"!=typeof m&&(ap=Math.max(Math.abs(v),Math.abs(t)),t=m+ap,v=m-ap),ae?(ao=aj.getDataLabelLength(v,t,"width"),an=G(aj.y.range()),am=[ao[0]/an,ao[1]/an],ar+=au*(am[1]/(1-am[0]-am[1])),aq+=au*(am[0]/(1-am[0]-am[1]))):ac&&(ao=aj.getDataLabelLength(v,t,"height"),ar+=aj.axis.convertPixelsToAxisPadding(ao[1],au),aq+=aj.axis.convertPixelsToAxisPadding(ao[0],au)),"y"===ax&&E(ah.axis_y_padding)&&(ar=aj.axis.getPadding(ah.axis_y_padding,"top",ar,au),aq=aj.axis.getPadding(ah.axis_y_padding,"bottom",aq,au)),"y2"===ax&&E(ah.axis_y2_padding)&&(ar=aj.axis.getPadding(ah.axis_y2_padding,"top",ar,au),aq=aj.axis.getPadding(ah.axis_y2_padding,"bottom",aq,au)),ai&&(al&&(aq=v),ak&&(ar=-t)),av=[v-aq,t+ar],ag?av.reverse():av)},R.getXDomainMin=function(e){var d=this,f=d.config;return J(f.axis_x_min)?d.isTimeSeries()?this.parseDate(f.axis_x_min):f.axis_x_min:d.d3.min(e,function(b){return d.d3.min(b.values,function(c){return c.x})})},R.getXDomainMax=function(e){var d=this,f=d.config;return J(f.axis_x_max)?d.isTimeSeries()?this.parseDate(f.axis_x_max):f.axis_x_max:d.d3.max(e,function(b){return d.d3.max(b.values,function(c){return c.x})})},R.getXDomainPadding=function(j){var i,p,o,n,m=this,l=m.config,k=j[1]-j[0];return m.isCategorized()?p=0:m.hasType("bar")?(i=m.getMaxDataCount(),p=i>1?k/(i-1)/2:0.5):p=0.01*k,"object"==typeof l.axis_x_padding&&E(l.axis_x_padding)?(o=N(l.axis_x_padding.left)?l.axis_x_padding.left:p,n=N(l.axis_x_padding.right)?l.axis_x_padding.right:p):o=n="number"==typeof l.axis_x_padding?l.axis_x_padding:p,{left:o,right:n}},R.getXDomain=function(j){var i=this,p=[i.getXDomainMin(j),i.getXDomainMax(j)],o=p[0],n=p[1],m=i.getXDomainPadding(p),l=0,k=0;return o-n!==0||i.isCategorized()||(i.isTimeSeries()?(o=new Date(0.5*o.getTime()),n=new Date(1.5*n.getTime())):(o=0===o?1:0.5*o,n=0===n?-1:1.5*n)),(o||0===o)&&(l=i.isTimeSeries()?new Date(o.getTime()-m.left):o-m.left),(n||0===n)&&(k=i.isTimeSeries()?new Date(n.getTime()+m.right):n+m.right),[l,k]},R.updateXDomain=function(i,h,n,m,l){var k=this,j=k.config;return n&&(k.x.domain(l?l:k.d3.extent(k.getXDomain(i))),k.orgXDomain=k.x.domain(),j.zoom_enabled&&k.zoom.scale(k.x).updateScaleExtent(),k.subX.domain(k.x.domain()),k.brush&&k.brush.scale(k.subX)),h&&(k.x.domain(l?l:!k.brush||k.brush.empty()?k.orgXDomain:k.brush.extent()),j.zoom_enabled&&k.zoom.scale(k.x).updateScaleExtent()),m&&k.x.domain(k.trimXDomain(k.x.orgDomain())),k.x.domain()},R.trimXDomain=function(f){var e=this.getZoomDomain(),h=e[0],g=e[1];return f[0]<=h&&(f[1]=+f[1]+(h-f[0]),f[0]=h),g<=f[1]&&(f[0]=+f[0]-(f[1]-g),f[1]=g),f},R.isX=function(e){var d=this,f=d.config;return f.data_x&&e===f.data_x||E(f.data_xs)&&C(f.data_xs,e)},R.isNotX=function(b){return !this.isX(b)},R.getXKey=function(e){var d=this,f=d.config;return f.data_x?f.data_x:E(f.data_xs)?f.data_xs[e]:null},R.getXValuesOfXKey=function(g,f){var j,i=this,h=f&&E(f)?i.mapToIds(f):[];return h.forEach(function(a){i.getXKey(a)===g&&(j=i.data.xs[a])}),j},R.getIndexByX=function(e){var d=this,f=d.filterByX(d.data.targets,e);return f.length?f[0].index:null},R.getXValue=function(e,d){var f=this;return e in f.data.xs&&f.data.xs[e]&&N(f.data.xs[e][d])?f.data.xs[e][d]:d},R.getOtherTargetXs=function(){var d=this,c=Object.keys(d.data.xs);return c.length?d.data.xs[c[0]]:null},R.getOtherTargetX=function(d){var c=this.getOtherTargetXs();return c&&d<c.length?c[d]:null},R.addXs=function(d){var c=this;Object.keys(d).forEach(function(a){c.config.data_xs[a]=d[a]})},R.hasMultipleX=function(b){return this.d3.set(Object.keys(b).map(function(a){return b[a]})).size()>1},R.isMultipleX=function(){return E(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")},R.addName=function(e){var d,f=this;return e&&(d=f.config.data_names[e.id],e.name=void 0!==d?d:e.id),e},R.getValueOnIndex=function(e,d){var f=e.filter(function(b){return b.index===d});return f.length?f[0]:null},R.updateTargetX=function(e,d){var f=this;e.forEach(function(b){b.values.forEach(function(c,a){c.x=f.generateTargetX(d[a],b.id,a)}),f.data.xs[b.id]=d})},R.updateTargetXs=function(e,d){var f=this;e.forEach(function(b){d[b.id]&&f.updateTargetX([b],d[b.id])})},R.generateTargetX=function(g,f,j){var i,h=this;return i=h.isTimeSeries()?g?h.parseDate(g):h.parseDate(h.getXValue(f,j)):h.isCustomX()&&!h.isCategorized()?N(g)?+g:h.getXValue(f,j):j},R.cloneTarget=function(b){return{id:b.id,id_org:b.id_org,values:b.values.map(function(c){return{x:c.x,value:c.value,id:c.id}})}},R.updateXs=function(){var b=this;b.data.targets.length&&(b.xs=[],b.data.targets[0].values.forEach(function(a){b.xs[a.index]=a.x}))},R.getPrevX=function(d){var c=this.xs[d-1];return"undefined"!=typeof c?c:null},R.getNextX=function(d){var c=this.xs[d+1];return"undefined"!=typeof c?c:null},R.getMaxDataCount=function(){var b=this;return b.d3.max(b.data.targets,function(c){return c.values.length})},R.getMaxDataCountTarget=function(f){var e,h=f.length,g=0;return h>1?f.forEach(function(b){b.values.length>g&&(e=b,g=b.values.length)}):e=h?f[0]:null,e},R.getEdgeX=function(d){var c=this;return d.length?[c.d3.min(d,function(b){return b.values[0].x}),c.d3.max(d,function(b){return b.values[b.values.length-1].x})]:[0,0]},R.mapToIds=function(b){return b.map(function(c){return c.id})},R.mapToTargetIds=function(d){var c=this;return d?[].concat(d):c.mapToIds(c.data.targets)},R.hasTarget=function(f,e){var h,g=this.mapToIds(f);for(h=0;h<g.length;h++){if(g[h]===e){return !0}}return !1},R.isTargetToShow=function(b){return this.hiddenTargetIds.indexOf(b)<0},R.isLegendToShow=function(b){return this.hiddenLegendIds.indexOf(b)<0},R.filterTargetsToShow=function(d){var c=this;return d.filter(function(b){return c.isTargetToShow(b.id)})},R.mapTargetsToUniqueXs=function(e){var d=this,f=d.d3.set(d.d3.merge(e.map(function(b){return b.values.map(function(c){return +c.x})}))).values();return f=d.isTimeSeries()?f.map(function(b){return new Date(+b)}):f.map(function(b){return +b}),f.sort(function(g,c){return c>g?-1:g>c?1:g>=c?0:NaN})},R.addHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.concat(b)},R.removeHiddenTargetIds=function(b){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(a){return b.indexOf(a)<0})},R.addHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.concat(b)},R.removeHiddenLegendIds=function(b){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(a){return b.indexOf(a)<0})},R.getValuesAsIdKeyed=function(d){var c={};return d.forEach(function(b){c[b.id]=[],b.values.forEach(function(a){c[b.id].push(a.value)})}),c},R.checkValueInTargets=function(h,g){var l,k,j,i=Object.keys(h);for(l=0;l<i.length;l++){for(j=h[i[l]].values,k=0;k<j.length;k++){if(g(j[k].value)){return !0}}}return !1},R.hasNegativeValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return 0>c})},R.hasPositiveValueInTargets=function(b){return this.checkValueInTargets(b,function(c){return c>0})},R.isOrderDesc=function(){var b=this.config;return"string"==typeof b.data_order&&"desc"===b.data_order.toLowerCase()},R.isOrderAsc=function(){var b=this.config;return"string"==typeof b.data_order&&"asc"===b.data_order.toLowerCase()},R.orderTargets=function(g){var f=this,j=f.config,i=f.isOrderAsc(),h=f.isOrderDesc();return i||h?g.sort(function(k,d){var n=function(e,c){return e+Math.abs(c.value)},m=k.values.reduce(n,0),l=d.values.reduce(n,0);return i?l-m:m-l}):M(j.data_order)&&g.sort(j.data_order),g},R.filterByX=function(d,c){return this.d3.merge(d.map(function(b){return b.values})).filter(function(b){return b.x-c===0})},R.filterRemoveNull=function(b){return b.filter(function(c){return N(c.value)})},R.filterByXDomain=function(d,c){return d.map(function(b){return{id:b.id,id_org:b.id_org,values:b.values.filter(function(e){return c[0]<=e.x&&e.x<=c[1]})}})},R.hasDataLabel=function(){var b=this.config;return"boolean"==typeof b.data_labels&&b.data_labels?!0:"object"==typeof b.data_labels&&E(b.data_labels)?!0:!1},R.getDataLabelLength=function(h,g,l){var k=this,j=[0,0],i=1.3;return k.selectChart.select("svg").selectAll(".dummy").data([h,g]).enter().append("text").text(function(b){return k.dataLabelFormat(b.id)(b)}).each(function(d,c){j[c]=this.getBoundingClientRect()[l]*i}).remove(),j},R.isNoneArc=function(b){return this.hasTarget(this.data.targets,b.id)},R.isArc=function(b){return"data" in b&&this.hasTarget(this.data.targets,b.data.id)},R.findSameXOfValues=function(g,f){var j,i=g[f].x,h=[];for(j=f-1;j>=0&&i===g[j].x;j--){h.push(g[j])}for(j=f;j<g.length&&i===g[j].x;j++){h.push(g[j])}return h},R.findClosestFromTargets=function(f,e){var h,g=this;return h=f.map(function(b){return g.findClosest(b.values,e)}),g.findClosest(h,e)},R.findClosest=function(g,f){var j,i=this,h=i.config.point_sensitivity;return g.filter(function(b){return b&&i.isBarType(b.id)}).forEach(function(d){var c=i.main.select("."+O.bars+i.getTargetSelectorSuffix(d.id)+" ."+O.bar+"-"+d.index).node();!j&&i.isWithinBar(c)&&(j=d)}),g.filter(function(b){return b&&!i.isBarType(b.id)}).forEach(function(b){var c=i.dist(b,f);h>c&&(h=c,j=b)}),j},R.dist=function(j,i){var p=this,o=p.config,n=o.axis_rotated?1:0,m=o.axis_rotated?0:1,l=p.circleY(j,j.index),k=p.x(j.x);return Math.sqrt(Math.pow(k-i[n],2)+Math.pow(l-i[m],2))},R.convertValuesToStep=function(e){var d,f=[].concat(e);if(!this.isCategorized()){return e}for(d=e.length+1;d>0;d--){f[d]=f[d-1]}return f[0]={x:f[0].x-1,value:f[0].value,id:f[0].id},f[e.length+1]={x:f[e.length].x+1,value:f[e.length].value,id:f[e.length].id},f},R.updateDataAttributes=function(g,f){var j=this,i=j.config,h=i["data_"+g];return"undefined"==typeof f?h:(Object.keys(f).forEach(function(b){h[b]=f[b]}),j.redraw({withLegend:!0}),h)},R.convertUrlToData=function(h,g,l,k){var j=this,i=g?g:"csv";j.d3.xhr(h,function(d,c){var e;if(!c){throw new Error(d.responseURL+" "+d.status+" ("+d.statusText+")")}e="json"===i?j.convertJsonToData(JSON.parse(c.response),l):"tsv"===i?j.convertTsvToData(c.response):j.convertCsvToData(c.response),k.call(j,e)})},R.convertXsvToData=function(f,e){var h,g=e.parseRows(f);return 1===g.length?(h=[{}],g[0].forEach(function(b){h[0][b]=null})):h=e.parse(f),h},R.convertCsvToData=function(b){return this.convertXsvToData(b,this.d3.csv)},R.convertTsvToData=function(b){return this.convertXsvToData(b,this.d3.tsv)},R.convertJsonToData=function(h,g){var l,k,j=this,i=[];return g?(g.x?(l=g.value.concat(g.x),j.config.data_x=g.x):l=g.value,i.push(l),h.forEach(function(d){var c=[];l.forEach(function(b){var a=K(d[b])?null:d[b];c.push(a)}),i.push(c)}),k=j.convertRowsToData(i)):(Object.keys(h).forEach(function(a){i.push([a].concat(h[a]))}),k=j.convertColumnsToData(i)),k},R.convertRowsToData=function(h){var g,l,k=h[0],j={},i=[];for(g=1;g<h.length;g++){for(j={},l=0;l<h[g].length;l++){if(K(h[g][l])){throw new Error("Source data is missing a component at ("+g+","+l+")!")}j[k[l]]=h[g][l]}i.push(j)}return i},R.convertColumnsToData=function(g){var f,j,i,h=[];for(f=0;f<g.length;f++){for(i=g[f][0],j=1;j<g[f].length;j++){if(K(h[j-1])&&(h[j-1]={}),K(g[f][j])){throw new Error("Source data is missing a component at ("+f+","+j+")!")}h[j-1][i]=g[f][j]}}return h},R.convertDataToTargets=function(i,h){var n,m=this,l=m.config,k=m.d3.keys(i[0]).filter(m.isNotX,m),j=m.d3.keys(i[0]).filter(m.isX,m);return k.forEach(function(b){var a=m.getXKey(b);m.isCustomX()||m.isTimeSeries()?j.indexOf(a)>=0?m.data.xs[b]=(h&&m.data.xs[b]?m.data.xs[b]:[]).concat(i.map(function(c){return c[a]}).filter(N).map(function(d,c){return m.generateTargetX(d,b,c)})):l.data_x?m.data.xs[b]=m.getOtherTargetXs():E(l.data_xs)&&(m.data.xs[b]=m.getXValuesOfXKey(a,m.data.targets)):m.data.xs[b]=i.map(function(d,c){return c})}),k.forEach(function(b){if(!m.data.xs[b]){throw new Error('x is not defined for id = "'+b+'".')}}),n=k.map(function(a,e){var d=l.data_idConverter(a);return{id:d,id_org:a,values:i.map(function(b,q){var p=m.getXKey(a),o=b[p],f=m.generateTargetX(o,a,q),c=null===b[a]||isNaN(b[a])?null:+b[a];return m.isCustomX()&&m.isCategorized()&&0===e&&o&&(0===q&&(l.axis_x_categories=[]),l.axis_x_categories.push(o)),(K(b[a])||m.data.xs[a].length<=q)&&(f=void 0),{x:f,value:c,id:d}}).filter(function(b){return J(b.x)})}}),n.forEach(function(d){var c;l.data_xSort&&(d.values=d.values.sort(function(f,e){var o=f.x||0===f.x?f.x:1/0,g=e.x||0===e.x?e.x:1/0;return o-g})),c=0,d.values.forEach(function(b){b.index=c++}),m.data.xs[d.id].sort(function(f,e){return f-e})}),m.hasNegativeValue=m.hasNegativeValueInTargets(n),m.hasPositiveValue=m.hasPositiveValueInTargets(n),l.data_type&&m.setTargetType(m.mapToIds(n).filter(function(b){return !(b in l.data_types)}),l.data_type),n.forEach(function(b){m.addCache(b.id_org,b)}),n},R.load=function(e,d){var f=this;e&&(d.filter&&(e=e.filter(d.filter)),(d.type||d.types)&&e.forEach(function(b){var c=d.types&&d.types[b.id]?d.types[b.id]:d.type;f.setTargetType(b.id,c)}),f.data.targets.forEach(function(a){for(var g=0;g<e.length;g++){if(a.id===e[g].id){a.values=e[g].values,e.splice(g,1);break}}}),f.data.targets=f.data.targets.concat(e)),f.updateTargets(f.data.targets),f.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()},R.loadFromArgs=function(d){var c=this;d.data?c.load(c.convertDataToTargets(d.data),d):d.url?c.convertUrlToData(d.url,d.mimeType,d.keys,function(a){c.load(c.convertDataToTargets(a),d)}):d.json?c.load(c.convertDataToTargets(c.convertJsonToData(d.json,d.keys)),d):d.rows?c.load(c.convertDataToTargets(c.convertRowsToData(d.rows)),d):d.columns?c.load(c.convertDataToTargets(c.convertColumnsToData(d.columns)),d):c.load(null,d)},R.unload=function(e,d){var f=this;return d||(d=function(){}),e=e.filter(function(b){return f.hasTarget(f.data.targets,b)}),e&&0!==e.length?(f.svg.selectAll(e.map(function(b){return f.selectorTarget(b)})).transition().style("opacity",0).remove().call(f.endall,d),void e.forEach(function(b){f.withoutFadeIn[b]=!1,f.legend&&f.legend.selectAll("."+O.legendItem+f.getTargetSelectorSuffix(b)).remove(),f.data.targets=f.data.targets.filter(function(a){return a.id!==b})})):void d()},R.categoryName=function(d){var c=this.config;return d<c.axis_x_categories.length?c.axis_x_categories[d]:d},R.initEventRect=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.eventRects).style("fill-opacity",0)},R.redrawEventRect=function(){var h,g,l=this,k=l.config,j=l.isMultipleX(),i=l.main.select("."+O.eventRects).style("cursor",k.zoom_enabled?k.axis_rotated?"ns-resize":"ew-resize":null).classed(O.eventRectsMultiple,j).classed(O.eventRectsSingle,!j);i.selectAll("."+O.eventRect).remove(),l.eventRect=i.selectAll("."+O.eventRect),j?(h=l.eventRect.data([0]),l.generateEventRectsForMultipleXs(h.enter()),l.updateEventRect(h)):(g=l.getMaxDataCountTarget(l.data.targets),i.datum(g?g.values:[]),l.eventRect=i.selectAll("."+O.eventRect),h=l.eventRect.data(function(b){return b}),l.generateEventRectsForSingleX(h.enter()),l.updateEventRect(h),h.exit().remove())},R.updateEventRect=function(r){var q,p,o,n,m,l,k=this,j=k.config;r=r||k.eventRect.data(function(b){return b}),k.isMultipleX()?(q=0,p=0,o=k.width,n=k.height):(!k.isCustomX()&&!k.isTimeSeries()||k.isCategorized()?(m=k.getEventRectWidth(),l=function(b){return k.x(b.x)-m/2}):(k.updateXs(),m=function(e){var d=k.getPrevX(e.index),f=k.getNextX(e.index);return null===d&&null===f?j.axis_rotated?k.height:k.width:(null===d&&(d=k.x.domain()[0]),null===f&&(f=k.x.domain()[1]),Math.max(0,(k.x(f)-k.x(d))/2))},l=function(f){var e=k.getPrevX(f.index),h=k.getNextX(f.index),g=k.data.xs[f.id][f.index];return null===e&&null===h?0:(null===e&&(e=k.x.domain()[0]),(k.x(g)+k.x(e))/2)}),q=j.axis_rotated?0:l,p=j.axis_rotated?l:0,o=j.axis_rotated?k.width:m,n=j.axis_rotated?m:k.height),r.attr("class",k.classEvent.bind(k)).attr("x",q).attr("y",p).attr("width",o).attr("height",n)},R.generateEventRectsForSingleX=function(f){var e=this,h=e.d3,g=e.config;f.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",g.data_selection_enabled&&g.data_selection_grouped?"pointer":null).on("mouseover",function(b){var d=b.index;e.dragging||e.flowing||e.hasArcType()||(g.point_focus_expand_enabled&&e.expandCircles(d,null,!0),e.expandBars(d,null,!0),e.main.selectAll("."+O.shape+"-"+d).each(function(c){g.data_onmouseover.call(e.api,c)}))}).on("mouseout",function(b){var d=b.index;e.config&&(e.hasArcType()||(e.hideXGridFocus(),e.hideTooltip(),e.unexpandCircles(),e.unexpandBars(),e.main.selectAll("."+O.shape+"-"+d).each(function(c){g.data_onmouseout.call(e.api,c)})))}).on("mousemove",function(b){var i,d=b.index,c=e.svg.select("."+O.eventRect+"-"+d);e.dragging||e.flowing||e.hasArcType()||(e.isStepType(b)&&"step-after"===e.config.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,d))&&(d-=1),i=e.filterTargetsToShow(e.data.targets).map(function(j){return e.addName(e.getValueOnIndex(j.values,d))}),g.tooltip_grouped&&(e.showTooltip(i,this),e.showXGridFocus(i)),(!g.tooltip_grouped||g.data_selection_enabled&&!g.data_selection_grouped)&&e.main.selectAll("."+O.shape+"-"+d).each(function(){h.select(this).classed(O.EXPANDED,!0),g.data_selection_enabled&&c.style("cursor",g.data_selection_grouped?"pointer":null),g.tooltip_grouped||(e.hideXGridFocus(),e.hideTooltip(),g.data_selection_grouped||(e.unexpandCircles(d),e.unexpandBars(d)))}).filter(function(j){return e.isWithinShape(this,j)}).each(function(j){g.data_selection_enabled&&(g.data_selection_grouped||g.data_selection_isselectable(j))&&c.style("cursor","pointer"),g.tooltip_grouped||(e.showTooltip([j],this),e.showXGridFocus([j]),g.point_focus_expand_enabled&&e.expandCircles(d,j.id,!0),e.expandBars(d,j.id,!0))}))}).on("click",function(b){var c=b.index;if(!e.hasArcType()&&e.toggleShape){if(e.cancelClick){return void (e.cancelClick=!1)}e.isStepType(b)&&"step-after"===g.line_step_type&&h.mouse(this)[0]<e.x(e.getXValue(b.id,c))&&(c-=1),e.main.selectAll("."+O.shape+"-"+c).each(function(d){(g.data_selection_grouped||e.isWithinShape(this,d))&&(e.toggleShape(this,d,c),e.config.data_onclick.call(e.api,d,this))})}}).call(g.data_selection_draggable&&e.drag?h.behavior.drag().origin(Object).on("drag",function(){e.drag(h.mouse(this))}).on("dragstart",function(){e.dragstart(h.mouse(this))}).on("dragend",function(){e.dragend()}):function(){})},R.generateEventRectsForMultipleXs=function(g){function f(){j.svg.select("."+O.eventRect).style("cursor",null),j.hideXGridFocus(),j.hideTooltip(),j.unexpandCircles(),j.unexpandBars()}var j=this,i=j.d3,h=j.config;g.append("rect").attr("x",0).attr("y",0).attr("width",j.width).attr("height",j.height).attr("class",O.eventRect).on("mouseout",function(){j.config&&(j.hasArcType()||f())}).on("mousemove",function(){var b,k,e,d,c=j.filterTargetsToShow(j.data.targets);if(!j.dragging&&!j.hasArcType(c)){if(b=i.mouse(this),k=j.findClosestFromTargets(c,b),!j.mouseover||k&&k.id===j.mouseover.id||(h.data_onmouseout.call(j.api,j.mouseover),j.mouseover=void 0),!k){return void f()}e=j.isScatterType(k)||!h.tooltip_grouped?[k]:j.filterByX(c,k.x),d=e.map(function(l){return j.addName(l)}),j.showTooltip(d,this),h.point_focus_expand_enabled&&j.expandCircles(k.index,k.id,!0),j.expandBars(k.index,k.id,!0),j.showXGridFocus(d),(j.isBarType(k.id)||j.dist(k,b)<h.point_sensitivity)&&(j.svg.select("."+O.eventRect).style("cursor","pointer"),j.mouseover||(h.data_onmouseover.call(j.api,k),j.mouseover=k))}}).on("click",function(){var d,c,e=j.filterTargetsToShow(j.data.targets);j.hasArcType(e)||(d=i.mouse(this),c=j.findClosestFromTargets(e,d),c&&(j.isBarType(c.id)||j.dist(c,d)<h.point_sensitivity)&&j.main.selectAll("."+O.shapes+j.getTargetSelectorSuffix(c.id)).selectAll("."+O.shape+"-"+c.index).each(function(){(h.data_selection_grouped||j.isWithinShape(this,c))&&(j.toggleShape(this,c,c.index),j.config.data_onclick.call(j.api,c,this))}))}).call(h.data_selection_draggable&&j.drag?i.behavior.drag().origin(Object).on("drag",function(){j.drag(i.mouse(this))}).on("dragstart",function(){j.dragstart(i.mouse(this))}).on("dragend",function(){j.dragend()}):function(){})},R.dispatchEvent=function(t,s,r){var q=this,p="."+O.eventRect+(q.isMultipleX()?"":"-"+s),o=q.main.select(p).node(),n=o.getBoundingClientRect(),m=n.left+(r?r[0]:0),l=n.top+(r?r[1]:0),a=document.createEvent("MouseEvents");a.initMouseEvent(t,!0,!0,Z,0,m,l,m,l,!1,!1,!1,!1,0,null),o.dispatchEvent(a)},R.getCurrentWidth=function(){var d=this,c=d.config;return c.size_width?c.size_width:d.getParentWidth()},R.getCurrentHeight=function(){var e=this,d=e.config,f=d.size_height?d.size_height:e.getParentHeight();return f>0?f:320/(e.hasType("gauge")?2:1)},R.getCurrentPaddingTop=function(){var e=this,d=e.config,f=N(d.padding_top)?d.padding_top:0;return e.title&&e.title.node()&&(f+=e.getTitlePadding()),f},R.getCurrentPaddingBottom=function(){var b=this.config;return N(b.padding_bottom)?b.padding_bottom:0},R.getCurrentPaddingLeft=function(e){var d=this,f=d.config;return N(f.padding_left)?f.padding_left:f.axis_rotated?f.axis_x_show?Math.max(I(d.getAxisWidthByAxisId("x",e)),40):1:!f.axis_y_show||f.axis_y_inner?d.axis.getYAxisLabelPosition().isOuter?30:1:I(d.getAxisWidthByAxisId("y",e))},R.getCurrentPaddingRight=function(){var f=this,e=f.config,h=10,g=f.isLegendRight?f.getLegendWidth()+20:0;return N(e.padding_right)?e.padding_right+1:e.axis_rotated?h+g:!e.axis_y2_show||e.axis_y2_inner?2+g+(f.axis.getY2AxisLabelPosition().isOuter?20:0):I(f.getAxisWidthByAxisId("y2"))+g},R.getParentRectValue=function(f){for(var e,h=this.selectChart.node();h&&"BODY"!==h.tagName;){try{e=h.getBoundingClientRect()[f]}catch(g){"width"===f&&(e=h.offsetWidth)}if(e){break}h=h.parentNode}return e},R.getParentWidth=function(){return this.getParentRectValue("width")},R.getParentHeight=function(){var b=this.selectChart.style("height");return b.indexOf("px")>0?+b.replace("px",""):0},R.getSvgLeft=function(t){var s=this,r=s.config,q=r.axis_rotated||!r.axis_rotated&&!r.axis_y_inner,p=r.axis_rotated?O.axisX:O.axisY,o=s.main.select("."+p).node(),n=o&&q?o.getBoundingClientRect():{right:0},m=s.selectChart.node().getBoundingClientRect(),l=s.hasArcType(),k=n.right-m.left-(l?0:s.getCurrentPaddingLeft(t));return k>0?k:0},R.getAxisWidthByAxisId=function(f,e){var h=this,g=h.axis.getLabelPositionById(f);return h.axis.getMaxTickWidth(f,e)+(g.isInner?20:40)},R.getHorizontalAxisHeight=function(f){var e=this,h=e.config,g=30;return"x"!==f||h.axis_x_show?"x"===f&&h.axis_x_height?h.axis_x_height:"y"!==f||h.axis_y_show?"y2"!==f||h.axis_y2_show?("x"===f&&!h.axis_rotated&&h.axis_x_tick_rotate&&(g=30+e.axis.getMaxTickWidth(f)*Math.cos(Math.PI*(90-h.axis_x_tick_rotate)/180)),g+(e.axis.getLabelPositionById(f).isInner?0:10)+("y2"===f?-10:0)):e.rotated_padding_top:!h.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},R.getEventRectWidth=function(){return Math.max(0,this.xAxis.tickInterval())},R.getShapeIndices=function(i){var h,n,m=this,l=m.config,k={},j=0;return m.filterTargetsToShow(m.data.targets.filter(i,m)).forEach(function(b){for(h=0;h<l.data_groups.length;h++){if(!(l.data_groups[h].indexOf(b.id)<0)){for(n=0;n<l.data_groups[h].length;n++){if(l.data_groups[h][n] in k){k[b.id]=k[l.data_groups[h][n]];break}}}}K(k[b.id])&&(k[b.id]=j++)}),k.__max__=j-1,k},R.getShapeX=function(h,g,l,k){var j=this,i=k?j.subX:j.x;return function(b){var a=b.id in l?l[b.id]:0;return b.x||0===b.x?i(b.x)-h*(g/2-a):0}},R.getShapeY=function(d){var c=this;return function(b){var a=d?c.getSubYScale(b.id):c.getYScale(b.id);return a(b.value)}},R.getShapeOffset=function(h,g,l){var k=this,j=k.orderTargets(k.filterTargetsToShow(k.data.targets.filter(h,k))),i=j.map(function(b){return b.id});return function(b,f){var e=l?k.getSubYScale(b.id):k.getYScale(b.id),d=e(0),c=d;return j.forEach(function(m){var a=k.isStepType(b)?k.convertValuesToStep(m.values):m.values;m.id!==b.id&&g[m.id]===g[b.id]&&i.indexOf(m.id)<i.indexOf(b.id)&&(("undefined"==typeof a[f]||+a[f].x!==+b.x)&&(f=-1,a.forEach(function(n,o){n.x===b.x&&(f=o)})),f in a&&a[f].value*b.value>=0&&(c+=e(a[f].value)-d))}),c}},R.isWithinShape=function(g,f){var j,i=this,h=i.d3.select(g);return i.isTargetToShow(f.id)?"circle"===g.nodeName?j=i.isStepType(f)?i.isWithinStep(g,i.getYScale(f.id)(f.value)):i.isWithinCircle(g,1.5*i.pointSelectR(f)):"path"===g.nodeName&&(j=h.classed(O.bar)?i.isWithinBar(g):!0):j=!1,j},R.getInterpolate=function(e){var d=this,f=d.isInterpolationType(d.config.spline_interpolation_type)?d.config.spline_interpolation_type:"cardinal";return d.isSplineType(e)?f:d.isStepType(e)?d.config.line_step_type:"linear"},R.initLine=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartLines)},R.updateTargetsForLine=function(t){var s,r,q=this,p=q.config,o=q.classChartLine.bind(q),n=q.classLines.bind(q),m=q.classAreas.bind(q),l=q.classCircles.bind(q),k=q.classFocus.bind(q);s=q.main.select("."+O.chartLines).selectAll("."+O.chartLine).data(t).attr("class",function(b){return o(b)+k(b)}),r=s.enter().append("g").attr("class",o).style("opacity",0).style("pointer-events","none"),r.append("g").attr("class",n),r.append("g").attr("class",m),r.append("g").attr("class",function(b){return q.generateClass(O.selectedCircles,b.id)}),r.append("g").attr("class",l).style("cursor",function(b){return p.data_selection_isselectable(b)?"pointer":null}),t.forEach(function(b){q.main.selectAll("."+O.selectedCircles+q.getTargetSelectorSuffix(b.id)).selectAll("."+O.selectedCircle).each(function(a){a.value=b.values[a.index].value})})},R.updateLine=function(d){var c=this;c.mainLine=c.main.selectAll("."+O.lines).selectAll("."+O.line).data(c.lineData.bind(c)),c.mainLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.mainLine.style("opacity",c.initialOpacity.bind(c)).style("shape-rendering",function(b){return c.isStepType(b)?"crispEdges":""}).attr("transform",null),c.mainLine.exit().transition().duration(d).style("opacity",0).remove()},R.redrawLine=function(d,c){return[(c?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",d).style("stroke",this.color).style("opacity",1)]},R.generateDrawLine=function(r,q){var p=this,o=p.config,n=p.d3.svg.line(),m=p.generateGetLinePoints(r,q),l=q?p.getSubYScale:p.getYScale,k=function(b){return(q?p.subxx:p.xx).call(p,b)},j=function(d,c){return o.data_groups.length>0?m(d,c)[0][1]:l.call(p,d.id)(d.value)};return n=o.axis_rotated?n.x(j).y(k):n.x(k).y(j),o.line_connectNull||(n=n.defined(function(b){return null!=b.value})),function(c){var t,s=o.line_connectNull?p.filterRemoveNull(c.values):c.values,g=q?p.x:p.subX,e=l.call(p,c.id),d=0,b=0;return p.isLineType(c)?o.data_regions[c.id]?t=p.lineWithRegions(s,g,e,o.data_regions[c.id]):(p.isStepType(c)&&(s=p.convertValuesToStep(s)),t=n.interpolate(p.getInterpolate(c))(s)):(s[0]&&(d=g(s[0].x),b=e(s[0].value)),t=o.axis_rotated?"M "+b+" "+d:"M "+d+" "+b),t?t:"M 0 0"}},R.generateGetLinePoints=function(r,q){var p=this,o=p.config,n=r.__max__+1,m=p.getShapeX(0,n,r,!!q),l=p.getShapeY(!!q),k=p.getShapeOffset(p.isLineType,r,!!q),j=q?p.getSubYScale:p.getYScale;return function(f,c){var i=j.call(p,f.id)(0),h=k(f,c)||i,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&i>d||f.value<0&&d>i)&&(d=i),[[g,d-(i-h)],[g,d-(i-h)],[g,d-(i-h)],[g,d-(i-h)]]}},R.lineWithRegions=function(aw,av,au,at){function ar(e,d){var f;for(f=0;f<d.length;f++){if(d[f].start<e&&e<=d[f].end){return !0}}return !1}function aq(b){return"M"+b[0][0]+" "+b[0][1]+" "+b[1][0]+" "+b[1][1]}var ap,ao,an,am,al,ak,aj,ai,ah,ag,af,ae,ad=this,ac=ad.config,ab=-1,aa="M",q=ad.isCategorized()?0.5:0,p=[];if(J(at)){for(ap=0;ap<at.length;ap++){p[ap]={},K(at[ap].start)?p[ap].start=aw[0].x:p[ap].start=ad.isTimeSeries()?ad.parseDate(at[ap].start):at[ap].start,K(at[ap].end)?p[ap].end=aw[aw.length-1].x:p[ap].end=ad.isTimeSeries()?ad.parseDate(at[ap].end):at[ap].end}}for(af=ac.axis_rotated?function(b){return au(b.value)}:function(b){return av(b.x)},ae=ac.axis_rotated?function(b){return av(b.x)}:function(b){return au(b.value)},an=ad.isTimeSeries()?function(t,s,r,o){var n,k=t.x.getTime(),f=s.x-t.x,c=new Date(k+f*r),b=new Date(k+f*(r+o));return n=ac.axis_rotated?[[au(al(r)),av(c)],[au(al(r+o)),av(b)]]:[[av(c),au(al(r))],[av(b),au(al(r+o))]],aq(n)}:function(b,j,i,f){var c;return c=ac.axis_rotated?[[au(al(i),!0),av(am(i))],[au(al(i+f),!0),av(am(i+f))]]:[[av(am(i),!0),au(al(i))],[av(am(i+f),!0),au(al(i+f))]],aq(c)},ap=0;ap<aw.length;ap++){if(K(p)||!ar(aw[ap].x,p)){aa+=" "+af(aw[ap])+" "+ae(aw[ap])}else{for(am=ad.getScale(aw[ap-1].x+q,aw[ap].x+q,ad.isTimeSeries()),al=ad.getScale(aw[ap-1].value,aw[ap].value),ak=av(aw[ap].x)-av(aw[ap-1].x),aj=au(aw[ap].value)-au(aw[ap-1].value),ai=Math.sqrt(Math.pow(ak,2)+Math.pow(aj,2)),ah=2/ai,ag=2*ah,ao=ah;1>=ao;ao+=ag){aa+=an(aw[ap-1],aw[ap],ao,ah)}}ab=aw[ap].x}return aa},R.updateArea=function(e){var d=this,f=d.d3;d.mainArea=d.main.selectAll("."+O.areas).selectAll("."+O.area).data(d.lineData.bind(d)),d.mainArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.mainArea.style("opacity",d.orgAreaOpacity),d.mainArea.exit().transition().duration(e).style("opacity",0).remove()},R.redrawArea=function(d,c){return[(c?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",d).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},R.generateDrawArea=function(t,s){var r=this,q=r.config,p=r.d3.svg.area(),o=r.generateGetAreaPoints(t,s),n=s?r.getSubYScale:r.getYScale,m=function(b){return(s?r.subxx:r.xx).call(r,b)},l=function(d,c){return q.data_groups.length>0?o(d,c)[0][1]:n.call(r,d.id)(r.getAreaBaseValue(d.id))},k=function(d,c){return q.data_groups.length>0?o(d,c)[1][1]:n.call(r,d.id)(d.value)};return p=q.axis_rotated?p.x0(l).x1(k).y(m):p.x(m).y0(l).y1(k),q.line_connectNull||(p=p.defined(function(b){return null!==b.value})),function(d){var c,j=q.line_connectNull?r.filterRemoveNull(d.values):d.values,i=0,e=0;return r.isAreaType(d)?(r.isStepType(d)&&(j=r.convertValuesToStep(j)),c=p.interpolate(r.getInterpolate(d))(j)):(j[0]&&(i=r.x(j[0].x),e=r.getYScale(d.id)(j[0].value)),c=q.axis_rotated?"M "+e+" "+i:"M "+i+" "+e),c?c:"M 0 0"}},R.getAreaBaseValue=function(){return 0},R.generateGetAreaPoints=function(r,q){var p=this,o=p.config,n=r.__max__+1,m=p.getShapeX(0,n,r,!!q),l=p.getShapeY(!!q),k=p.getShapeOffset(p.isAreaType,r,!!q),j=q?p.getSubYScale:p.getYScale;return function(f,c){var i=j.call(p,f.id)(0),h=k(f,c)||i,g=m(f),d=l(f);return o.axis_rotated&&(0<f.value&&i>d||f.value<0&&d>i)&&(d=i),[[g,h],[g,d-(i-h)],[g,d-(i-h)],[g,h]]}},R.updateCircle=function(){var b=this;b.mainCircle=b.main.selectAll("."+O.circles).selectAll("."+O.circle).data(b.lineOrScatterData.bind(b)),b.mainCircle.enter().append("circle").attr("class",b.classCircle.bind(b)).attr("r",b.pointR.bind(b)).style("fill",b.color),b.mainCircle.style("opacity",b.initialOpacityForCircle.bind(b)),b.mainCircle.exit().remove()},R.redrawCircle=function(f,e,h){var g=this.main.selectAll("."+O.selectedCircle);return[(h?this.mainCircle.transition(Math.random().toString()):this.mainCircle).style("opacity",this.opacityForCircle.bind(this)).style("fill",this.color).attr("cx",f).attr("cy",e),(h?g.transition(Math.random().toString()):g).attr("cx",f).attr("cy",e)]},R.circleX=function(b){return b.x||0===b.x?this.x(b.x):null},R.updateCircleY=function(){var e,d,f=this;f.config.data_groups.length>0?(e=f.getShapeIndices(f.isLineType),d=f.generateGetLinePoints(e),f.circleY=function(b,g){return d(b,g)[0][1]}):f.circleY=function(b){return f.getYScale(b.id)(b.value)}},R.getCircles=function(e,d){var f=this;return(d?f.main.selectAll("."+O.circles+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+O.circle+(N(e)?"-"+e:""))},R.expandCircles=function(g,f,j){var i=this,h=i.pointExpandedR.bind(i);j&&i.unexpandCircles(),i.getCircles(g,f).classed(O.EXPANDED,!0).attr("r",h)},R.unexpandCircles=function(e){var d=this,f=d.pointR.bind(d);d.getCircles(e).filter(function(){return d.d3.select(this).classed(O.EXPANDED)}).classed(O.EXPANDED,!1).attr("r",f)},R.pointR=function(e){var d=this,f=d.config;return d.isStepType(e)?0:M(f.point_r)?f.point_r(e):f.point_r},R.pointExpandedR=function(e){var d=this,f=d.config;return f.point_focus_expand_enabled?f.point_focus_expand_r?f.point_focus_expand_r:1.75*d.pointR(e):d.pointR(e)},R.pointSelectR=function(e){var d=this,f=d.config;return f.point_select_r?f.point_select_r:4*d.pointR(e)},R.isWithinCircle=function(i,h){var n=this.d3,m=n.mouse(i),l=n.select(i),k=+l.attr("cx"),j=+l.attr("cy");return Math.sqrt(Math.pow(k-m[0],2)+Math.pow(j-m[1],2))<h},R.isWithinStep=function(d,c){return Math.abs(c-this.d3.mouse(d)[1])<30},R.initBar=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartBars)},R.updateTargetsForBar=function(j){var i,p,o=this,n=o.config,m=o.classChartBar.bind(o),l=o.classBars.bind(o),k=o.classFocus.bind(o);i=o.main.select("."+O.chartBars).selectAll("."+O.chartBar).data(j).attr("class",function(b){return m(b)+k(b)}),p=i.enter().append("g").attr("class",m).style("opacity",0).style("pointer-events","none"),p.append("g").attr("class",l).style("cursor",function(b){return n.data_selection_isselectable(b)?"pointer":null})},R.updateBar=function(h){var g=this,l=g.barData.bind(g),k=g.classBar.bind(g),j=g.initialOpacity.bind(g),i=function(b){return g.color(b.id)};g.mainBar=g.main.selectAll("."+O.bars).selectAll("."+O.bar).data(l),g.mainBar.enter().append("path").attr("class",k).style("stroke",i).style("fill",i),g.mainBar.style("opacity",j),g.mainBar.exit().transition().duration(h).style("opacity",0).remove()},R.redrawBar=function(d,c){return[(c?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",d).style("fill",this.color).style("opacity",1)]},R.getBarW=function(g,f){var j=this,i=j.config,h="number"==typeof i.bar_width?i.bar_width:f?g.tickInterval()*i.bar_width_ratio/f:0;return i.bar_width_max&&h>i.bar_width_max?i.bar_width_max:h},R.getBars=function(e,d){var f=this;return(d?f.main.selectAll("."+O.bars+f.getTargetSelectorSuffix(d)):f.main).selectAll("."+O.bar+(N(e)?"-"+e:""))},R.expandBars=function(f,e,h){var g=this;h&&g.unexpandBars(),g.getBars(f,e).classed(O.EXPANDED,!0)},R.unexpandBars=function(d){var c=this;c.getBars(d).classed(O.EXPANDED,!1)},R.generateDrawBar=function(g,f){var j=this,i=j.config,h=j.generateGetBarPoints(g,f);return function(e,d){var n=h(e,d),m=i.axis_rotated?1:0,l=i.axis_rotated?0:1,k="M "+n[0][m]+","+n[0][l]+" L"+n[1][m]+","+n[1][l]+" L"+n[2][m]+","+n[2][l]+" L"+n[3][m]+","+n[3][l]+" z";return k}},R.generateGetBarPoints=function(t,s){var r=this,q=s?r.subXAxis:r.xAxis,p=t.__max__+1,o=r.getBarW(q,p),n=r.getShapeX(o,p,t,!!s),m=r.getShapeY(!!s),l=r.getShapeOffset(r.isBarType,t,!!s),k=s?r.getSubYScale:r.getYScale;return function(g,c){var j=k.call(r,g.id)(0),i=l(g,c)||j,h=n(g),f=m(g);return r.config.axis_rotated&&(0<g.value&&j>f||g.value<0&&f>j)&&(f=j),[[h,i],[h,f-(j-i)],[h+o,f-(j-i)],[h+o,i]]}},R.isWithinBar=function(ab){var aa=this.d3.mouse(ab),z=ab.getBoundingClientRect(),y=ab.pathSegList.getItem(0),x=ab.pathSegList.getItem(1),w=Math.min(y.x,x.x),v=Math.min(y.y,x.y),u=z.width,t=z.height,s=2,r=w-s,q=w+u+s,p=v+t+s,o=v-s;return r<aa[0]&&aa[0]<q&&o<aa[1]&&aa[1]<p},R.initText=function(){var b=this;b.main.select("."+O.chart).append("g").attr("class",O.chartTexts),b.mainText=b.d3.selectAll([])},R.updateTargetsForText=function(i){var h,n,m=this,l=m.classChartText.bind(m),k=m.classTexts.bind(m),j=m.classFocus.bind(m);h=m.main.select("."+O.chartTexts).selectAll("."+O.chartText).data(i).attr("class",function(b){return l(b)+j(b)}),n=h.enter().append("g").attr("class",l).style("opacity",0).style("pointer-events","none"),n.append("g").attr("class",k)},R.updateText=function(g){var f=this,j=f.config,i=f.barOrLineData.bind(f),h=f.classText.bind(f);f.mainText=f.main.selectAll("."+O.texts).selectAll("."+O.text).data(i),f.mainText.enter().append("text").attr("class",h).attr("text-anchor",function(b){return j.axis_rotated?b.value<0?"end":"start":"middle"}).style("stroke","none").style("fill",function(b){return f.color(b)}).style("fill-opacity",0),f.mainText.text(function(b,k,e){return f.dataLabelFormat(b.id)(b.value,b.id,k,e)}),f.mainText.exit().transition().duration(g).style("fill-opacity",0).remove()},R.redrawText=function(f,e,h,g){return[(g?this.mainText.transition():this.mainText).attr("x",f).attr("y",e).style("fill",this.color).style("fill-opacity",h?0:this.opacityForText.bind(this))]},R.getTextRect=function(i,h,n){var m,l=this.d3.select("body").append("div").classed("c3",!0),k=l.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),j=this.d3.select(n).style("font");return k.selectAll(".dummy").data([i]).enter().append("text").classed(h?h:"",!0).style("font",j).text(i).each(function(){m=this.getBoundingClientRect()}),l.remove(),m},R.generateXYForText=function(r,q,p,o){var n=this,m=n.generateGetAreaPoints(r,!1),l=n.generateGetBarPoints(q,!1),k=n.generateGetLinePoints(p,!1),j=o?n.getXForText:n.getYForText;return function(e,d){var f=n.isAreaType(e)?m:n.isBarType(e)?l:k;return j.call(n,f(e,d),e,this)}},R.getXForText=function(i,h,n){var m,l,k=this,j=n.getBoundingClientRect();return k.config.axis_rotated?(l=k.isBarType(h)?4:6,m=i[2][1]+l*(h.value<0?-1:1)):m=k.hasType("bar")?(i[2][0]+i[0][0])/2:i[0][0],null===h.value&&(m>k.width?m=k.width-j.width:0>m&&(m=4)),m},R.getYForText=function(h,g,l){var k,j=this,i=l.getBoundingClientRect();return j.config.axis_rotated?k=(h[0][0]+h[2][0]+0.6*i.height)/2:(k=h[2][1],g.value<0||0===g.value&&!j.hasPositiveValue?(k+=i.height,j.isBarType(g)&&j.isSafari()?k-=3:!j.isBarType(g)&&j.isChrome()&&(k+=3)):k+=j.isBarType(g)?-3:-6),null!==g.value||j.config.axis_rotated||(k<i.height?k=i.height:k>this.height&&(k=this.height-4)),k},R.setTargetType=function(f,e){var h=this,g=h.config;h.mapToTargetIds(f).forEach(function(b){h.withoutFadeIn[b]=e===g.data_types[b],g.data_types[b]=e}),f||(g.data_type=e)},R.hasType=function(g,f){var j=this,i=j.config.data_types,h=!1;return f=f||j.data.targets,f&&f.length?f.forEach(function(a){var d=i[a.id];(d&&d.indexOf(g)>=0||!d&&"line"===g)&&(h=!0)}):Object.keys(i).length?Object.keys(i).forEach(function(a){i[a]===g&&(h=!0)}):h=j.config.data_type===g,h},R.hasArcType=function(b){return this.hasType("pie",b)||this.hasType("donut",b)||this.hasType("gauge",b)},R.isLineType=function(e){var d=this.config,f=L(e)?e:e.id;return !d.data_types[f]||["line","spline","area","area-spline","step","area-step"].indexOf(d.data_types[f])>=0},R.isStepType=function(d){var c=L(d)?d:d.id;return["step","area-step"].indexOf(this.config.data_types[c])>=0},R.isSplineType=function(d){var c=L(d)?d:d.id;return["spline","area-spline"].indexOf(this.config.data_types[c])>=0},R.isAreaType=function(d){var c=L(d)?d:d.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[c])>=0},R.isBarType=function(d){var c=L(d)?d:d.id;return"bar"===this.config.data_types[c]},R.isScatterType=function(d){var c=L(d)?d:d.id;return"scatter"===this.config.data_types[c]},R.isPieType=function(d){var c=L(d)?d:d.id;return"pie"===this.config.data_types[c]},R.isGaugeType=function(d){var c=L(d)?d:d.id;return"gauge"===this.config.data_types[c]},R.isDonutType=function(d){var c=L(d)?d:d.id;return"donut"===this.config.data_types[c]},R.isArcType=function(b){return this.isPieType(b)||this.isDonutType(b)||this.isGaugeType(b)},R.lineData=function(b){return this.isLineType(b)?[b]:[]},R.arcData=function(b){return this.isArcType(b.data)?[b]:[]},R.barData=function(b){return this.isBarType(b)?b.values:[]},R.lineOrScatterData=function(b){return this.isLineType(b)||this.isScatterType(b)?b.values:[]},R.barOrLineData=function(b){return this.isBarType(b)||this.isLineType(b)?b.values:[]},R.isInterpolationType=function(b){return["linear","linear-closed","basis","basis-open","basis-closed","bundle","cardinal","cardinal-open","cardinal-closed","monotone"].indexOf(b)>=0},R.initGrid=function(){var e=this,d=e.config,f=e.d3;e.grid=e.main.append("g").attr("clip-path",e.clipPathForGrid).attr("class",O.grid),d.grid_x_show&&e.grid.append("g").attr("class",O.xgrids),d.grid_y_show&&e.grid.append("g").attr("class",O.ygrids),d.grid_focus_show&&e.grid.append("g").attr("class",O.xgridFocus).append("line").attr("class",O.xgridFocus),e.xgrid=f.selectAll([]),d.grid_lines_front||e.initGridLines()},R.initGridLines=function(){var d=this,c=d.d3;d.gridLines=d.main.append("g").attr("clip-path",d.clipPathForGrid).attr("class",O.grid+" "+O.gridLines),d.gridLines.append("g").attr("class",O.xgridLines),d.gridLines.append("g").attr("class",O.ygridLines),d.xgridLines=c.selectAll([])},R.updateXGrid=function(h){var g=this,l=g.config,k=g.d3,j=g.generateGridData(l.grid_x_type,g.x),i=g.isCategorized()?g.xAxis.tickOffset():0;g.xgridAttr=l.axis_rotated?{x1:0,x2:g.width,y1:function(b){return g.x(b)-i},y2:function(b){return g.x(b)-i}}:{x1:function(b){return g.x(b)+i},x2:function(b){return g.x(b)+i},y1:0,y2:g.height},g.xgrid=g.main.select("."+O.xgrids).selectAll("."+O.xgrid).data(j),g.xgrid.enter().append("line").attr("class",O.xgrid),h||g.xgrid.attr(g.xgridAttr).style("opacity",function(){return +k.select(this).attr(l.axis_rotated?"y1":"x1")===(l.axis_rotated?g.height:0)?0:1}),g.xgrid.exit().remove()},R.updateYGrid=function(){var e=this,d=e.config,f=e.yAxis.tickValues()||e.y.ticks(d.grid_y_ticks);e.ygrid=e.main.select("."+O.ygrids).selectAll("."+O.ygrid).data(f),e.ygrid.enter().append("line").attr("class",O.ygrid),e.ygrid.attr("x1",d.axis_rotated?e.y:0).attr("x2",d.axis_rotated?e.y:e.width).attr("y1",d.axis_rotated?0:e.y).attr("y2",d.axis_rotated?e.height:e.y),e.ygrid.exit().remove(),e.smoothLines(e.ygrid,"grid")},R.gridTextAnchor=function(b){return b.position?b.position:"end"},R.gridTextDx=function(b){return"start"===b.position?4:"middle"===b.position?0:-4},R.xGridTextX=function(b){return"start"===b.position?-this.height:"middle"===b.position?-this.height/2:0},R.yGridTextX=function(b){return"start"===b.position?0:"middle"===b.position?this.width/2:this.width},R.updateGrid=function(i){var h,n,m,l=this,k=l.main,j=l.config;l.grid.style("visibility",l.hasArcType()?"hidden":"visible"),k.select("line."+O.xgridFocus).style("visibility","hidden"),j.grid_x_show&&l.updateXGrid(),l.xgridLines=k.select("."+O.xgridLines).selectAll("."+O.xgridLine).data(j.grid_x_lines),h=l.xgridLines.enter().append("g").attr("class",function(b){return O.xgridLine+(b["class"]?" "+b["class"]:"")}),h.append("line").style("opacity",0),h.append("text").attr("text-anchor",l.gridTextAnchor).attr("transform",j.axis_rotated?"":"rotate(-90)").attr("dx",l.gridTextDx).attr("dy",-5).style("opacity",0),l.xgridLines.exit().transition().duration(i).style("opacity",0).remove(),j.grid_y_show&&l.updateYGrid(),l.ygridLines=k.select("."+O.ygridLines).selectAll("."+O.ygridLine).data(j.grid_y_lines),n=l.ygridLines.enter().append("g").attr("class",function(b){return O.ygridLine+(b["class"]?" "+b["class"]:"")}),n.append("line").style("opacity",0),n.append("text").attr("text-anchor",l.gridTextAnchor).attr("transform",j.axis_rotated?"rotate(-90)":"").attr("dx",l.gridTextDx).attr("dy",-5).style("opacity",0),m=l.yv.bind(l),l.ygridLines.select("line").transition().duration(i).attr("x1",j.axis_rotated?m:0).attr("x2",j.axis_rotated?m:l.width).attr("y1",j.axis_rotated?0:m).attr("y2",j.axis_rotated?l.height:m).style("opacity",1),l.ygridLines.select("text").transition().duration(i).attr("x",j.axis_rotated?l.xGridTextX.bind(l):l.yGridTextX.bind(l)).attr("y",m).text(function(b){return b.text}).style("opacity",1),l.ygridLines.exit().transition().duration(i).style("opacity",0).remove()},R.redrawGrid=function(h){var g=this,l=g.config,k=g.xv.bind(g),j=g.xgridLines.select("line"),i=g.xgridLines.select("text");return[(h?j.transition():j).attr("x1",l.axis_rotated?0:k).attr("x2",l.axis_rotated?g.width:k).attr("y1",l.axis_rotated?k:0).attr("y2",l.axis_rotated?k:g.height).style("opacity",1),(h?i.transition():i).attr("x",l.axis_rotated?g.yGridTextX.bind(g):g.xGridTextX.bind(g)).attr("y",k).text(function(b){return b.text}).style("opacity",1)]},R.showXGridFocus=function(h){var g=this,l=g.config,k=h.filter(function(b){return b&&N(b.value)}),j=g.main.selectAll("line."+O.xgridFocus),i=g.xx.bind(g);l.tooltip_show&&(g.hasType("scatter")||g.hasArcType()||(j.style("visibility","visible").data([k[0]]).attr(l.axis_rotated?"y1":"x1",i).attr(l.axis_rotated?"y2":"x2",i),g.smoothLines(j,"grid")))},R.hideXGridFocus=function(){this.main.select("line."+O.xgridFocus).style("visibility","hidden")},R.updateXgridFocus=function(){var d=this,c=d.config;d.main.select("line."+O.xgridFocus).attr("x1",c.axis_rotated?0:-10).attr("x2",c.axis_rotated?d.width:-10).attr("y1",c.axis_rotated?-10:0).attr("y2",c.axis_rotated?-10:d.height)},R.generateGridData=function(r,q){var p,o,n,m,l=this,k=[],j=l.main.select("."+O.axisX).selectAll(".tick").size();if("year"===r){for(p=l.getXDomain(),o=p[0].getFullYear(),n=p[1].getFullYear(),m=o;n>=m;m++){k.push(new Date(m+"-01-01 00:00:00"))}}else{k=q.ticks(10),k.length>j&&(k=k.filter(function(b){return(""+b).indexOf(".")<0}))}return k},R.getGridFilterToRemove=function(b){return b?function(a){var d=!1;return[].concat(b).forEach(function(c){("value" in c&&a.value===c.value||"class" in c&&a["class"]===c["class"])&&(d=!0)}),d}:function(){return !0}},R.removeGridLines=function(j,i){var p=this,o=p.config,n=p.getGridFilterToRemove(j),m=function(b){return !n(b)},l=i?O.xgridLines:O.ygridLines,k=i?O.xgridLine:O.ygridLine;p.main.select("."+l).selectAll("."+k).filter(n).transition().duration(o.transition_duration).style("opacity",0).remove(),i?o.grid_x_lines=o.grid_x_lines.filter(m):o.grid_y_lines=o.grid_y_lines.filter(m)},R.initTooltip=function(){var e,d=this,f=d.config;if(d.tooltip=d.selectChart.style("position","relative").append("div").attr("class",O.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),f.tooltip_init_show){if(d.isTimeSeries()&&L(f.tooltip_init_x)){for(f.tooltip_init_x=d.parseDate(f.tooltip_init_x),e=0;e<d.data.targets[0].values.length&&d.data.targets[0].values[e].x-f.tooltip_init_x!==0;e++){}f.tooltip_init_x=e}d.tooltip.html(f.tooltip_contents.call(d,d.data.targets.map(function(b){return d.addName(b.values[f.tooltip_init_x])}),d.axis.getXAxisTickFormat(),d.getYFormat(d.hasArcType()),d.color)),d.tooltip.style("top",f.tooltip_init_position.top).style("left",f.tooltip_init_position.left).style("display","block")}},R.getTooltipContent=function(ah,ag,af,ae){var ad,ac,ab,aa,z,y,x=this,w=x.config,v=w.tooltip_format_title||ag,u=w.tooltip_format_name||function(b){return b},t=w.tooltip_format_value||af,s=x.isOrderAsc();if(0===w.data_groups.length){ah.sort(function(d,c){return s?d.value-c.value:c.value-d.value})}else{var r=x.orderTargets(x.data.targets).map(function(b){return b.id});ah.sort(function(d,c){return d.value>0&&c.value>0?s?r.indexOf(d.id)-r.indexOf(c.id):r.indexOf(c.id)-r.indexOf(d.id):s?d.value-c.value:c.value-d.value})}for(ac=0;ac<ah.length;ac++){if(ah[ac]&&(ah[ac].value||0===ah[ac].value)&&(ad||(ab=v?v(ah[ac].x):ah[ac].x,ad="<table class='"+x.CLASS.tooltip+"'>"+(ab||0===ab?"<tr><th colspan='2'>"+ab+"</th></tr>":"")),aa=t(ah[ac].value,ah[ac].ratio,ah[ac].id,ah[ac].index),void 0!==aa)){if(null===ah[ac].name){continue}z=u(ah[ac].name,ah[ac].ratio,ah[ac].id,ah[ac].index),y=x.levelColor?x.levelColor(ah[ac].value):ae(ah[ac].id),ad+="<tr class='"+x.CLASS.tooltipName+"-"+x.getTargetSelectorSuffix(ah[ac].id)+"'>",ad+="<td class='name'><span style='background-color:"+y+"'></span>"+z+"</td>",ad+="<td class='value'>"+aa+"</td>",ad+="</tr>"}}return ad+"</table>"},R.tooltipPosition=function(ab,aa,z,y){var x,w,v,u,t,s=this,r=s.config,q=s.d3,p=s.hasArcType(),o=q.mouse(y);return p?(w=(s.width-(s.isLegendRight?s.getLegendWidth():0))/2+o[0],u=s.height/2+o[1]+20):(x=s.getSvgLeft(!0),r.axis_rotated?(w=x+o[0]+100,v=w+aa,t=s.currentWidth-s.getCurrentPaddingRight(),u=s.x(ab[0].x)+20):(w=x+s.getCurrentPaddingLeft(!0)+s.x(ab[0].x)+20,v=w+aa,t=x+s.currentWidth-s.getCurrentPaddingRight(),u=o[1]+15),v>t&&(w-=v-t+20),u+z>s.currentHeight&&(u-=z+30)),0>u&&(u=0),{top:u,left:w}},R.showTooltip=function(t,s){var r,q,p,o=this,n=o.config,m=o.hasArcType(),l=t.filter(function(b){return b&&N(b.value)}),i=n.tooltip_position||R.tooltipPosition;0!==l.length&&n.tooltip_show&&(o.tooltip.html(n.tooltip_contents.call(o,t,o.axis.getXAxisTickFormat(),o.getYFormat(m),o.color)).style("display","block"),r=o.tooltip.property("offsetWidth"),q=o.tooltip.property("offsetHeight"),p=i.call(this,l,r,q,s),o.tooltip.style("top",p.top+"px").style("left",p.left+"px"))},R.hideTooltip=function(){this.tooltip.style("display","none")},R.initLegend=function(){var b=this;return b.legendItemTextBox={},b.legendHasRendered=!1,b.legend=b.svg.append("g").attr("transform",b.getTranslate("legend")),b.config.legend_show?void b.updateLegendWithDefaults():(b.legend.style("visibility","hidden"),void (b.hiddenLegendIds=b.mapToIds(b.data.targets)))},R.updateLegendWithDefaults=function(){var b=this;b.updateLegend(b.mapToIds(b.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},R.updateSizeForLegend=function(g,f){var j=this,i=j.config,h={top:j.isLegendTop?j.getCurrentPaddingTop()+i.legend_inset_y+5.5:j.currentHeight-g-j.getCurrentPaddingBottom()-i.legend_inset_y,left:j.isLegendLeft?j.getCurrentPaddingLeft()+i.legend_inset_x+0.5:j.currentWidth-f-j.getCurrentPaddingRight()-i.legend_inset_x+0.5};j.margin3={top:j.isLegendRight?0:j.isLegendInset?h.top:j.currentHeight-g,right:NaN,bottom:0,left:j.isLegendRight?j.currentWidth-f:j.isLegendInset?h.left:0}},R.transformLegend=function(d){var c=this;(d?c.legend.transition():c.legend).attr("transform",c.getTranslate("legend"))},R.updateLegendStep=function(b){this.legendStep=b},R.updateLegendItemWidth=function(b){this.legendItemWidth=b},R.updateLegendItemHeight=function(b){this.legendItemHeight=b},R.getLegendWidth=function(){var b=this;return b.config.legend_show?b.isLegendRight||b.isLegendInset?b.legendItemWidth*(b.legendStep+1):b.currentWidth:0},R.getLegendHeight=function(){var d=this,c=0;return d.config.legend_show&&(c=d.isLegendRight?d.currentHeight:Math.max(20,d.legendItemHeight)*(d.legendStep+1)),c},R.opacityForLegend=function(b){return b.classed(O.legendItemHidden)?null:1},R.opacityForUnfocusedLegend=function(b){return b.classed(O.legendItemHidden)?null:0.3},R.toggleFocusLegend=function(e,d){var f=this;e=f.mapToTargetIds(e),f.legend.selectAll("."+O.legendItem).filter(function(a){return e.indexOf(a)>=0}).classed(O.legendItemFocused,d).transition().duration(100).style("opacity",function(){var b=d?f.opacityForLegend:f.opacityForUnfocusedLegend;return b.call(f,f.d3.select(this))})},R.revertLegend=function(){var d=this,c=d.d3;d.legend.selectAll("."+O.legendItem).classed(O.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return d.opacityForLegend(c.select(this))})},R.showLegend=function(e){var d=this,f=d.config;f.legend_show||(f.legend_show=!0,d.legend.style("visibility","visible"),d.legendHasRendered||d.updateLegendWithDefaults()),d.removeHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("visibility","visible").transition().style("opacity",function(){return d.opacityForLegend(d.d3.select(this))})},R.hideLegend=function(e){var d=this,f=d.config;f.legend_show&&F(e)&&(f.legend_show=!1,d.legend.style("visibility","hidden")),d.addHiddenLegendIds(e),d.legend.selectAll(d.selectorLegends(e)).style("opacity",0).style("visibility","hidden")},R.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},R.updateLegend=function(aH,aG,aF){function aE(d,c){return al.legendItemTextBox[c]||(al.legendItemTextBox[c]=al.getTextRect(d.textContent,O.legendItem,d)),al.legendItemTextBox[c]}function aD(aJ,aI,z){function y(e,c){c||(x=(a-ad-d)/2,af>x&&(x=(a-d)/2,ad=0,l++)),q[e]=l,w[l]=al.isLegendInset?10:x,ac[e]=ad,ad+=d}var x,v,u=0===z,t=z===aH.length-1,s=aE(aJ,aI),r=s.width+ae+(!t||al.isLegendRight||al.isLegendInset?ai:0)+ak.legend_padding,p=s.height+aj,d=al.isLegendRight||al.isLegendInset?p:r,a=al.isLegendRight||al.isLegendInset?al.getLegendHeight():al.getLegendWidth();return u&&(ad=0,l=0,ah=0,ag=0),ak.legend_show&&!al.isLegendToShow(aI)?void (ab[aI]=aa[aI]=q[aI]=ac[aI]=0):(ab[aI]=r,aa[aI]=p,(!ah||r>=ah)&&(ah=r),(!ag||p>=ag)&&(ag=p),v=al.isLegendRight||al.isLegendInset?ag:ah,void (ak.legend_equally?(Object.keys(ab).forEach(function(b){ab[b]=ah}),Object.keys(aa).forEach(function(b){aa[b]=ag}),x=(a-v*aH.length)/2,af>x?(ad=0,l=0,aH.forEach(function(b){y(b)})):y(aI,!0)):y(aI)))}var aC,aB,aA,az,ay,ax,aw,av,au,at,ar,aq,ap,ao,an,am,al=this,ak=al.config,aj=4,ai=10,ah=0,ag=0,af=10,ae=ak.legend_item_tile_width+5,ad=0,ac={},ab={},aa={},w=[0],q={},l=0;aH=aH.filter(function(b){return !J(ak.data_names[b])||null!==ak.data_names[b]}),aG=aG||{},ar=D(aG,"withTransition",!0),aq=D(aG,"withTransitionForTransform",!0),al.isLegendInset&&(l=ak.legend_inset_step?ak.legend_inset_step:aH.length,al.updateLegendStep(l)),al.isLegendRight?(aC=function(b){return ah*q[b]},az=function(b){return w[q[b]]+ac[b]}):al.isLegendInset?(aC=function(b){return ah*q[b]+10},az=function(b){return w[q[b]]+ac[b]}):(aC=function(b){return w[q[b]]+ac[b]},az=function(b){return ag*q[b]}),aB=function(d,c){return aC(d,c)+4+ak.legend_item_tile_width},ay=function(d,c){return az(d,c)+9},aA=function(d,c){return aC(d,c)},ax=function(d,c){return az(d,c)-5},aw=function(d,c){return aC(d,c)-2},av=function(d,c){return aC(d,c)-2+ak.legend_item_tile_width},au=function(d,c){return az(d,c)+4},at=al.legend.selectAll("."+O.legendItem).data(aH).enter().append("g").attr("class",function(b){return al.generateClass(O.legendItem,b)}).style("visibility",function(b){return al.isLegendToShow(b)?"visible":"hidden"}).style("cursor","pointer").on("click",function(b){ak.legend_item_onclick?ak.legend_item_onclick.call(al,b):al.d3.event.altKey?(al.api.hide(),al.api.show(b)):(al.api.toggle(b),al.isTargetToShow(b)?al.api.focus(b):al.api.revert())}).on("mouseover",function(b){ak.legend_item_onmouseover?ak.legend_item_onmouseover.call(al,b):(al.d3.select(this).classed(O.legendItemFocused,!0),!al.transiting&&al.isTargetToShow(b)&&al.api.focus(b))}).on("mouseout",function(b){ak.legend_item_onmouseout?ak.legend_item_onmouseout.call(al,b):(al.d3.select(this).classed(O.legendItemFocused,!1),al.api.revert())}),at.append("text").text(function(b){return J(ak.data_names[b])?ak.data_names[b]:b}).each(function(d,c){aD(this,d,c)}).style("pointer-events","none").attr("x",al.isLegendRight||al.isLegendInset?aB:-200).attr("y",al.isLegendRight||al.isLegendInset?-200:ay),at.append("rect").attr("class",O.legendItemEvent).style("fill-opacity",0).attr("x",al.isLegendRight||al.isLegendInset?aA:-200).attr("y",al.isLegendRight||al.isLegendInset?-200:ax),at.append("line").attr("class",O.legendItemTile).style("stroke",al.color).style("pointer-events","none").attr("x1",al.isLegendRight||al.isLegendInset?aw:-200).attr("y1",al.isLegendRight||al.isLegendInset?-200:au).attr("x2",al.isLegendRight||al.isLegendInset?av:-200).attr("y2",al.isLegendRight||al.isLegendInset?-200:au).attr("stroke-width",ak.legend_item_tile_height),am=al.legend.select("."+O.legendBackground+" rect"),al.isLegendInset&&ah>0&&0===am.size()&&(am=al.legend.insert("g","."+O.legendItem).attr("class",O.legendBackground).append("rect")),ap=al.legend.selectAll("text").data(aH).text(function(b){return J(ak.data_names[b])?ak.data_names[b]:b}).each(function(d,c){aD(this,d,c)}),(ar?ap.transition():ap).attr("x",aB).attr("y",ay),ao=al.legend.selectAll("rect."+O.legendItemEvent).data(aH),(ar?ao.transition():ao).attr("width",function(b){return ab[b]}).attr("height",function(b){return aa[b]}).attr("x",aA).attr("y",ax),an=al.legend.selectAll("line."+O.legendItemTile).data(aH),(ar?an.transition():an).style("stroke",al.color).attr("x1",aw).attr("y1",au).attr("x2",av).attr("y2",au),am&&(ar?am.transition():am).attr("height",al.getLegendHeight()-12).attr("width",ah*(l+1)+10),al.legend.selectAll("."+O.legendItem).classed(O.legendItemHidden,function(b){return !al.isTargetToShow(b)}),al.updateLegendItemWidth(ah),al.updateLegendItemHeight(ag),al.updateLegendStep(l),al.updateSizes(),al.updateScales(),al.updateSvgSize(),al.transformAll(aq,aF),al.legendHasRendered=!0},R.initTitle=function(){var b=this;b.title=b.svg.append("text").text(b.config.title_text).attr("class",b.CLASS.title)},R.redrawTitle=function(){var b=this;b.title.attr("x",b.xForTitle.bind(b)).attr("y",b.yForTitle.bind(b))},R.xForTitle=function(){var f,e=this,h=e.config,g=h.title_position||"left";return f=g.indexOf("right")>=0?e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width-h.title_padding.right:g.indexOf("center")>=0?(e.currentWidth-e.getTextRect(e.title.node().textContent,e.CLASS.title,e.title.node()).width)/2:h.title_padding.left},R.yForTitle=function(){var b=this;return b.config.title_padding.top+b.getTextRect(b.title.node().textContent,b.CLASS.title,b.title.node()).height},R.getTitlePadding=function(){var b=this;return b.yForTitle()+b.config.title_padding.bottom},X(Y,U),U.prototype.init=function(){var e=this.owner,d=e.config,f=e.main;e.axes.x=f.append("g").attr("class",O.axis+" "+O.axisX).attr("clip-path",e.clipPathForXAxis).attr("transform",e.getTranslate("x")).style("visibility",d.axis_x_show?"visible":"hidden"),e.axes.x.append("text").attr("class",O.axisXLabel).attr("transform",d.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),e.axes.y=f.append("g").attr("class",O.axis+" "+O.axisY).attr("clip-path",d.axis_y_inner?"":e.clipPathForYAxis).attr("transform",e.getTranslate("y")).style("visibility",d.axis_y_show?"visible":"hidden"),e.axes.y.append("text").attr("class",O.axisYLabel).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),e.axes.y2=f.append("g").attr("class",O.axis+" "+O.axisY2).attr("transform",e.getTranslate("y2")).style("visibility",d.axis_y2_show?"visible":"hidden"),e.axes.y2.append("text").attr("class",O.axisY2Label).attr("transform",d.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},U.prototype.getXAxis=function(v,u,t,s,r,q,p){var o=this.owner,n=o.config,m={isCategory:o.isCategorized(),withOuterTick:r,tickMultiline:n.axis_x_tick_multiline,tickWidth:n.axis_x_tick_width,tickTextRotate:p?0:n.axis_x_tick_rotate,withoutTransition:q},g=T(o.d3,m).scale(v).orient(u);return o.isTimeSeries()&&s&&"function"!=typeof s&&(s=s.map(function(b){return o.parseDate(b)})),g.tickFormat(t).tickValues(s),o.isCategorized()&&(g.tickCentered(n.axis_x_tick_centered),F(n.axis_x_tick_culling)&&(n.axis_x_tick_culling=!1)),g},U.prototype.updateXAxisTickValues=function(g,f){var j,i=this.owner,h=i.config;return(h.axis_x_tick_fit||h.axis_x_tick_count)&&(j=this.generateTickValues(i.mapTargetsToUniqueXs(g),h.axis_x_tick_count,i.isTimeSeries())),f?f.tickValues(j):(i.xAxis.tickValues(j),i.subXAxis.tickValues(j)),j},U.prototype.getYAxis=function(v,u,t,s,r,q){var p={withOuterTick:r,withoutTransition:q},o=this.owner,n=o.d3,m=o.config,g=T(n,p).scale(v).orient(u).tickFormat(t);return o.isTimeSeriesY()?g.ticks(n.time[m.axis_y_tick_time_value],m.axis_y_tick_time_interval):g.tickValues(s),g},U.prototype.getId=function(d){var c=this.owner.config;return d in c.data_axes?c.data_axes[d]:"y"},U.prototype.getXAxisTickFormat=function(){var e=this.owner,d=e.config,f=e.isTimeSeries()?e.defaultAxisTimeFormat:e.isCategorized()?e.categoryName:function(b){return 0>b?b.toFixed(0):b};return d.axis_x_tick_format&&(M(d.axis_x_tick_format)?f=d.axis_x_tick_format:e.isTimeSeries()&&(f=function(a){return a?e.axisTimeFormat(d.axis_x_tick_format)(a):""})),M(f)?function(a){return f.call(e,a)}:f},U.prototype.getTickValues=function(d,c){return d?d:c?c.tickValues():void 0},U.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},U.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},U.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},U.prototype.getLabelOptionByAxisId=function(f){var e,h=this.owner,g=h.config;return"y"===f?e=g.axis_y_label:"y2"===f?e=g.axis_y2_label:"x"===f&&(e=g.axis_x_label),e},U.prototype.getLabelText=function(d){var c=this.getLabelOptionByAxisId(d);return L(c)?c:c?c.text:null},U.prototype.setLabelText=function(g,f){var j=this.owner,i=j.config,h=this.getLabelOptionByAxisId(g);L(h)?"y"===g?i.axis_y_label=f:"y2"===g?i.axis_y2_label=f:"x"===g&&(i.axis_x_label=f):h&&(h.text=f)},U.prototype.getLabelPosition=function(f,e){var h=this.getLabelOptionByAxisId(f),g=h&&"object"==typeof h&&h.position?h.position:e;return{isInner:g.indexOf("inner")>=0,isOuter:g.indexOf("outer")>=0,isLeft:g.indexOf("left")>=0,isCenter:g.indexOf("center")>=0,isRight:g.indexOf("right")>=0,isTop:g.indexOf("top")>=0,isMiddle:g.indexOf("middle")>=0,isBottom:g.indexOf("bottom")>=0}},U.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},U.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getLabelPositionById=function(b){return"y2"===b?this.getY2AxisLabelPosition():"y"===b?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},U.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},U.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},U.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},U.prototype.xForAxisLabel=function(e,d){var f=this.owner;return e?d.isLeft?0:d.isCenter?f.width/2:f.width:d.isBottom?-f.height:d.isMiddle?-f.height/2:0},U.prototype.dxForAxisLabel=function(d,c){return d?c.isLeft?"0.5em":c.isRight?"-0.5em":"0":c.isTop?"-0.5em":c.isBottom?"0.5em":"0"},U.prototype.textAnchorForAxisLabel=function(d,c){return d?c.isLeft?"start":c.isCenter?"middle":"end":c.isBottom?"start":c.isMiddle?"middle":"end"},U.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dyForXAxisLabel=function(){var e=this.owner,d=e.config,f=this.getXAxisLabelPosition();return d.axis_rotated?f.isInner?"1.2em":-25-this.getMaxTickWidth("x"):f.isInner?"-0.5em":d.axis_x_height?d.axis_x_height-10:"3em"},U.prototype.dyForYAxisLabel=function(){var d=this.owner,c=this.getYAxisLabelPosition();return d.config.axis_rotated?c.isInner?"-0.5em":"3em":c.isInner?"1.2em":-10-(d.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},U.prototype.dyForY2AxisLabel=function(){var d=this.owner,c=this.getY2AxisLabelPosition();return d.config.axis_rotated?c.isInner?"1.2em":"-2.2em":c.isInner?"-0.5em":15+(d.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},U.prototype.textAnchorForXAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(!b.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.textAnchorForYAxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.textAnchorForY2AxisLabel=function(){var b=this.owner;return this.textAnchorForAxisLabel(b.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.getMaxTickWidth=function(t,s){var r,q,p,o,n,m=this.owner,l=m.config,k=0;return s&&m.currentMaxTickWidths[t]?m.currentMaxTickWidths[t]:(m.svg&&(r=m.filterTargetsToShow(m.data.targets),"y"===t?(q=m.y.copy().domain(m.getYDomain(r,"y")),p=this.getYAxis(q,m.yOrient,l.axis_y_tick_format,m.yAxisTickValues,!1,!0)):"y2"===t?(q=m.y2.copy().domain(m.getYDomain(r,"y2")),p=this.getYAxis(q,m.y2Orient,l.axis_y2_tick_format,m.y2AxisTickValues,!1,!0)):(q=m.x.copy().domain(m.getXDomain(r)),p=this.getXAxis(q,m.xOrient,m.xAxisTickFormat,m.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(r,p)),o=m.d3.select("body").append("div").classed("c3",!0),n=o.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),n.append("g").call(p).each(function(){m.d3.select(this).selectAll("text").each(function(){var b=this.getBoundingClientRect();k<b.width&&(k=b.width)}),o.remove()})),m.currentMaxTickWidths[t]=0>=k?m.currentMaxTickWidths[t]:k,m.currentMaxTickWidths[t])},U.prototype.updateLabels=function(g){var f=this.owner,j=f.main.select("."+O.axisX+" ."+O.axisXLabel),i=f.main.select("."+O.axisY+" ."+O.axisYLabel),h=f.main.select("."+O.axisY2+" ."+O.axisY2Label);(g?j.transition():j).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(g?i.transition():i).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(g?h.transition():h).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},U.prototype.getPadding=function(g,f,j,i){var h="number"==typeof g?g:g[f];return N(h)?"ratio"===g.unit?g[f]*i:this.convertPixelsToAxisPadding(h,i):j},U.prototype.convertPixelsToAxisPadding=function(f,e){var h=this.owner,g=h.config.axis_rotated?h.width:h.height;return e*(f/g)},U.prototype.generateTickValues=function(v,u,t){var s,r,q,p,o,n,m,l=v;if(u){if(s=M(u)?u():u,1===s){l=[v[0]]}else{if(2===s){l=[v[0],v[v.length-1]]}else{if(s>2){for(p=s-2,r=v[0],q=v[v.length-1],o=(q-r)/(p+1),l=[r],n=0;p>n;n++){m=+r+o*(n+1),l.push(t?new Date(m):m)}l.push(q)}}}}return t||(l=l.sort(function(d,c){return d-c})),l},U.prototype.generateTransitions=function(e){var d=this.owner,f=d.axes;return{axisX:e?f.x.transition().duration(e):f.x,axisY:e?f.y.transition().duration(e):f.y,axisY2:e?f.y2.transition().duration(e):f.y2,axisSubX:e?f.subx.transition().duration(e):f.subx}},U.prototype.redraw=function(e,d){var f=this.owner;f.axes.x.style("opacity",d?0:1),f.axes.y.style("opacity",d?0:1),f.axes.y2.style("opacity",d?0:1),f.axes.subx.style("opacity",d?0:1),e.axisX.call(f.xAxis),e.axisY.call(f.yAxis),e.axisY2.call(f.y2Axis),e.axisSubX.call(f.subXAxis)},R.getClipPath=function(a){var d=Z.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0;return"url("+(d?"":document.URL.split("#")[0])+"#"+a+")"},R.appendClip=function(d,c){return d.append("clipPath").attr("id",c).append("rect")},R.getAxisClipX=function(d){var c=Math.max(30,this.margin.left);return d?-(1+c):-(c-1)},R.getAxisClipY=function(b){return b?-20:-this.margin.top},R.getXAxisClipX=function(){var b=this;return b.getAxisClipX(!b.config.axis_rotated)},R.getXAxisClipY=function(){var b=this;return b.getAxisClipY(!b.config.axis_rotated)},R.getYAxisClipX=function(){var b=this;return b.config.axis_y_inner?-1:b.getAxisClipX(b.config.axis_rotated)},R.getYAxisClipY=function(){var b=this;return b.getAxisClipY(b.config.axis_rotated)},R.getAxisClipWidth=function(f){var e=this,h=Math.max(30,e.margin.left),g=Math.max(30,e.margin.right);return f?e.width+2+h+g:e.margin.left+20},R.getAxisClipHeight=function(b){return(b?this.margin.bottom:this.margin.top+this.height)+20},R.getXAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(!b.config.axis_rotated)},R.getXAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(!b.config.axis_rotated)},R.getYAxisClipWidth=function(){var b=this;return b.getAxisClipWidth(b.config.axis_rotated)+(b.config.axis_y_inner?20:0)},R.getYAxisClipHeight=function(){var b=this;return b.getAxisClipHeight(b.config.axis_rotated)},R.initPie=function(){var e=this,d=e.d3,f=e.config;e.pie=d.layout.pie().value(function(b){return b.values.reduce(function(g,c){return g+c.value},0)}),f.data_order||e.pie.sort(null)},R.updateRadius=function(){var e=this,d=e.config,f=d.gauge_width||d.donut_width;e.radiusExpanded=Math.min(e.arcWidth,e.arcHeight)/2,e.radius=0.95*e.radiusExpanded,e.innerRadiusRatio=f?(e.radius-f)/e.radius:0.6,e.innerRadius=e.hasType("donut")||e.hasType("gauge")?e.radius*e.innerRadiusRatio:0},R.updateArc=function(){var b=this;b.svgArc=b.getSvgArc(),b.svgArcExpanded=b.getSvgArcExpanded(),b.svgArcExpandedSub=b.getSvgArcExpanded(0.98)},R.updateAngle=function(r){var q,p,o,n,m=this,l=m.config,k=!1,j=0;return l?(m.pie(m.filterTargetsToShow(m.data.targets)).forEach(function(a){k||a.data.id!==r.data.id||(k=!0,r=a,r.index=j),j++}),isNaN(r.startAngle)&&(r.startAngle=0),isNaN(r.endAngle)&&(r.endAngle=r.startAngle),m.isGaugeType(r.data)&&(q=l.gauge_min,p=l.gauge_max,o=Math.PI/(p-q),n=r.value<q?0:r.value<p?r.value-q:p-q,r.startAngle=-1*(Math.PI/2),r.endAngle=r.startAngle+o*n),k?r:null):null},R.getSvgArc=function(){var e=this,d=e.d3.svg.arc().outerRadius(e.radius).innerRadius(e.innerRadius),f=function(g,b){var a;return b?d(g):(a=e.updateAngle(g),a?d(a):"M 0 0")};return f.centroid=d.centroid,f},R.getSvgArcExpanded=function(e){var d=this,f=d.d3.svg.arc().outerRadius(d.radiusExpanded*(e?e:1)).innerRadius(d.innerRadius);return function(b){var c=d.updateAngle(b);return c?f(c):"M 0 0"}},R.getArc=function(e,d,f){return f||this.isArcType(e.data)?this.svgArc(e,d):"M 0 0"},R.transformForArcLabel=function(r){var q,p,o,n,m,l=this,k=l.updateAngle(r),j="";return k&&!l.hasType("gauge")&&(q=this.svgArc.centroid(k),p=isNaN(q[0])?0:q[0],o=isNaN(q[1])?0:q[1],n=Math.sqrt(p*p+o*o),m=l.radius&&n?(36/l.radius>0.375?1.175-36/l.radius:0.8)*l.radius/n:0,j="translate("+p*m+","+o*m+")"),j},R.getArcRatio=function(e){var d=this,f=d.hasType("gauge")?Math.PI:2*Math.PI;return e?(e.endAngle-e.startAngle)/f:null},R.convertToArcData=function(b){return this.addName({id:b.data.id,value:b.value,ratio:this.getArcRatio(b),index:b.index})},R.textForArcLabel=function(i){var h,n,m,l,k,j=this;return j.shouldShowArcLabel()?(h=j.updateAngle(i),n=h?h.value:null,m=j.getArcRatio(h),l=i.data.id,j.hasType("gauge")||j.meetsArcLabelThreshold(m)?(k=j.getArcLabelFormat(),k?k(n,m,l):j.defaultArcValueFormat(n,m)):""):""},R.expandArc=function(a){var f,e=this;return e.transiting?void (f=Z.setInterval(function(){e.transiting||(Z.clearInterval(f),e.legend.selectAll(".c3-legend-item-focused").size()>0&&e.expandArc(a))},10)):(a=e.mapToTargetIds(a),void e.svg.selectAll(e.selectorTargets(a,"."+O.chartArc)).each(function(b){e.shouldExpand(b.data.id)&&e.d3.select(this).selectAll("path").transition().duration(e.expandDuration(b.data.id)).attr("d",e.svgArcExpanded).transition().duration(2*e.expandDuration(b.data.id)).attr("d",e.svgArcExpandedSub).each(function(c){e.isDonutType(c.data)})}))},R.unexpandArc=function(d){var c=this;c.transiting||(d=c.mapToTargetIds(d),c.svg.selectAll(c.selectorTargets(d,"."+O.chartArc)).selectAll("path").transition().duration(function(b){return c.expandDuration(b.data.id)}).attr("d",c.svgArc),c.svg.selectAll("."+O.arc).style("opacity",1))},R.expandDuration=function(e){var d=this,f=d.config;return d.isDonutType(e)?f.donut_expand_duration:d.isGaugeType(e)?f.gauge_expand_duration:d.isPieType(e)?f.pie_expand_duration:50},R.shouldExpand=function(e){var d=this,f=d.config;return d.isDonutType(e)&&f.donut_expand||d.isGaugeType(e)&&f.gauge_expand||d.isPieType(e)&&f.pie_expand},R.shouldShowArcLabel=function(){var e=this,d=e.config,f=!0;return e.hasType("donut")?f=d.donut_label_show:e.hasType("pie")&&(f=d.pie_label_show),f},R.meetsArcLabelThreshold=function(f){var e=this,h=e.config,g=e.hasType("donut")?h.donut_label_threshold:h.pie_label_threshold;return f>=g},R.getArcLabelFormat=function(){var e=this,d=e.config,f=d.pie_label_format;return e.hasType("gauge")?f=d.gauge_label_format:e.hasType("donut")&&(f=d.donut_label_format),f},R.getArcTitle=function(){var b=this;return b.hasType("donut")?b.config.donut_title:""},R.updateTargetsForArc=function(j){var i,p,o=this,n=o.main,m=o.classChartArc.bind(o),l=o.classArcs.bind(o),k=o.classFocus.bind(o);i=n.select("."+O.chartArcs).selectAll("."+O.chartArc).data(o.pie(j)).attr("class",function(b){return m(b)+k(b.data)}),p=i.enter().append("g").attr("class",m),p.append("g").attr("class",l),p.append("text").attr("dy",o.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},R.initArc=function(){var b=this;b.arcs=b.main.select("."+O.chart).append("g").attr("class",O.chartArcs).attr("transform",b.getTranslate("arc")),b.arcs.append("text").attr("class",O.chartArcsTitle).style("text-anchor","middle").text(b.getArcTitle())},R.redrawArc=function(j,i,p){var o,n=this,m=n.d3,l=n.config,k=n.main;o=k.selectAll("."+O.arcs).selectAll("."+O.arc).data(n.arcData.bind(n)),o.enter().append("path").attr("class",n.classArc.bind(n)).style("fill",function(b){return n.color(b.data)}).style("cursor",function(b){return l.interaction_enabled&&l.data_selection_isselectable(b)?"pointer":null}).style("opacity",0).each(function(b){n.isGaugeType(b.data)&&(b.startAngle=b.endAngle=-1*(Math.PI/2)),this._current=b}),o.attr("transform",function(b){return !n.isGaugeType(b.data)&&p?"scale(0)":""}).style("opacity",function(b){return b===this._current?0:1}).on("mouseover",l.interaction_enabled?function(e){var d,f;n.transiting||(d=n.updateAngle(e),d&&(f=n.convertToArcData(d),n.expandArc(d.data.id),n.api.focus(d.data.id),n.toggleFocusLegend(d.data.id,!0),n.config.data_onmouseover(f,this)))}:null).on("mousemove",l.interaction_enabled?function(f){var e,h,g=n.updateAngle(f);g&&(e=n.convertToArcData(g),h=[e],n.showTooltip(h,this))}:null).on("mouseout",l.interaction_enabled?function(e){var d,f;n.transiting||(d=n.updateAngle(e),d&&(f=n.convertToArcData(d),n.unexpandArc(d.data.id),n.api.revert(),n.revertLegend(),n.hideTooltip(),n.config.data_onmouseout(f,this)))}:null).on("click",l.interaction_enabled?function(f,e){var h,g=n.updateAngle(f);g&&(h=n.convertToArcData(g),n.toggleShape&&n.toggleShape(this,h,e),n.config.data_onclick.call(n.api,h,this))}:null).each(function(){n.transiting=!0}).transition().duration(j).attrTween("d",function(e){var d,f=n.updateAngle(e);return f?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),d=m.interpolate(this._current,f),this._current=d(0),function(b){var a=d(b);return a.data=e.data,n.getArc(a,!0)}):function(){return"M 0 0"}}).attr("transform",p?"scale(1)":"").style("fill",function(b){return n.levelColor?n.levelColor(b.data.values[0].value):n.color(b.data.id)}).style("opacity",1).call(n.endall,function(){n.transiting=!1}),o.exit().transition().duration(i).style("opacity",0).remove(),k.selectAll("."+O.chartArc).select("text").style("opacity",0).attr("class",function(b){return n.isGaugeType(b.data)?O.gaugeValue:""}).text(n.textForArcLabel.bind(n)).attr("transform",n.transformForArcLabel.bind(n)).style("font-size",function(b){return n.isGaugeType(b.data)?Math.round(n.radius/5)+"px":""}).transition().duration(j).style("opacity",function(b){return n.isTargetToShow(b.data.id)&&n.isArcType(b.data)?1:0}),k.select("."+O.chartArcsTitle).style("opacity",n.hasType("donut")||n.hasType("gauge")?1:0),n.hasType("gauge")&&(n.arcs.select("."+O.chartArcsBackground).attr("d",function(){var b={data:[{value:l.gauge_max}],startAngle:-1*(Math.PI/2),endAngle:Math.PI/2};return n.getArc(b,!0,!0)}),n.arcs.select("."+O.chartArcsGaugeUnit).attr("dy",".75em").text(l.gauge_label_show?l.gauge_units:""),n.arcs.select("."+O.chartArcsGaugeMin).attr("dx",-1*(n.innerRadius+(n.radius-n.innerRadius)/2)+"px").attr("dy","1.2em").text(l.gauge_label_show?l.gauge_min:""),n.arcs.select("."+O.chartArcsGaugeMax).attr("dx",n.innerRadius+(n.radius-n.innerRadius)/2+"px").attr("dy","1.2em").text(l.gauge_label_show?l.gauge_max:""))},R.initGauge=function(){var b=this.arcs;this.hasType("gauge")&&(b.append("path").attr("class",O.chartArcsBackground),b.append("text").attr("class",O.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",O.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),b.append("text").attr("class",O.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},R.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},R.initRegion=function(){var b=this;b.region=b.main.append("g").attr("clip-path",b.clipPath).attr("class",O.regions)},R.updateRegion=function(e){var d=this,f=d.config;d.region.style("visibility",d.hasArcType()?"hidden":"visible"),d.mainRegion=d.main.select("."+O.regions).selectAll("."+O.region).data(f.regions),d.mainRegion.enter().append("g").attr("class",d.classRegion.bind(d)).append("rect").style("fill-opacity",0),d.mainRegion.exit().transition().duration(e).style("opacity",0).remove()},R.redrawRegion=function(i){var h=this,n=h.mainRegion.selectAll("rect"),m=h.regionX.bind(h),l=h.regionY.bind(h),k=h.regionWidth.bind(h),j=h.regionHeight.bind(h);return[(i?n.transition():n).attr("x",m).attr("y",l).attr("width",k).attr("height",j).style("fill-opacity",function(b){return N(b.opacity)?b.opacity:0.1})]},R.regionX=function(g){var f,j=this,i=j.config,h="y"===g.axis?j.y:j.y2;return f="y"===g.axis||"y2"===g.axis?i.axis_rotated&&"start" in g?h(g.start):0:i.axis_rotated?0:"start" in g?j.x(j.isTimeSeries()?j.parseDate(g.start):g.start):0},R.regionY=function(g){var f,j=this,i=j.config,h="y"===g.axis?j.y:j.y2;return f="y"===g.axis||"y2"===g.axis?i.axis_rotated?0:"end" in g?h(g.end):0:i.axis_rotated&&"start" in g?j.x(j.isTimeSeries()?j.parseDate(g.start):g.start):0},R.regionWidth=function(h){var g,l=this,k=l.config,j=l.regionX(h),i="y"===h.axis?l.y:l.y2;return g="y"===h.axis||"y2"===h.axis?k.axis_rotated&&"end" in h?i(h.end):l.width:k.axis_rotated?l.width:"end" in h?l.x(l.isTimeSeries()?l.parseDate(h.end):h.end):l.width,j>g?0:g-j},R.regionHeight=function(h){var g,l=this,k=l.config,j=this.regionY(h),i="y"===h.axis?l.y:l.y2;return g="y"===h.axis||"y2"===h.axis?k.axis_rotated?l.height:"start" in h?i(h.start):l.height:k.axis_rotated&&"end" in h?l.x(l.isTimeSeries()?l.parseDate(h.end):h.end):l.height,j>g?0:g-j},R.isRegionOnX=function(b){return !b.axis||"x"===b.axis},R.drag=function(z){var y,x,w,v,u,t,s,r,q=this,p=q.config,o=q.main,l=q.d3;q.hasArcType()||p.data_selection_enabled&&(!p.zoom_enabled||q.zoom.altDomain)&&p.data_selection_multiple&&(y=q.dragStart[0],x=q.dragStart[1],w=z[0],v=z[1],u=Math.min(y,w),t=Math.max(y,w),s=p.data_selection_grouped?q.margin.top:Math.min(x,v),r=p.data_selection_grouped?q.height:Math.max(x,v),o.select("."+O.dragarea).attr("x",u).attr("y",s).attr("width",t-u).attr("height",r-s),o.selectAll("."+O.shapes).selectAll("."+O.shape).filter(function(b){return p.data_selection_isselectable(b)}).each(function(ae,ad){var ac,ab,aa,n,j,i,h=l.select(this),g=h.classed(O.SELECTED),f=h.classed(O.INCLUDED),af=!1;if(h.classed(O.circle)){ac=1*h.attr("cx"),ab=1*h.attr("cy"),j=q.togglePoint,af=ac>u&&t>ac&&ab>s&&r>ab}else{if(!h.classed(O.bar)){return}i=B(this),ac=i.x,ab=i.y,aa=i.width,n=i.height,j=q.togglePath,af=!(ac>t||u>ac+aa||ab>r||s>ab+n)}af^f&&(h.classed(O.INCLUDED,!f),h.classed(O.SELECTED,!g),j.call(q,!g,h,ae,ad))}))},R.dragstart=function(e){var d=this,f=d.config;d.hasArcType()||f.data_selection_enabled&&(d.dragStart=e,d.main.select("."+O.chart).append("rect").attr("class",O.dragarea).style("opacity",0.1),d.dragging=!0)},R.dragend=function(){var d=this,c=d.config;d.hasArcType()||c.data_selection_enabled&&(d.main.select("."+O.dragarea).transition().duration(100).style("opacity",0).remove(),d.main.selectAll("."+O.shape).classed(O.INCLUDED,!1),d.dragging=!1)},R.selectPoint=function(j,i,p){var o=this,n=o.config,m=(n.axis_rotated?o.circleY:o.circleX).bind(o),l=(n.axis_rotated?o.circleX:o.circleY).bind(o),k=o.pointSelectR.bind(o);n.data_onselected.call(o.api,i,j.node()),o.main.select("."+O.selectedCircles+o.getTargetSelectorSuffix(i.id)).selectAll("."+O.selectedCircle+"-"+p).data([i]).enter().append("circle").attr("class",function(){return o.generateClass(O.selectedCircle,p)}).attr("cx",m).attr("cy",l).attr("stroke",function(){return o.color(i)}).attr("r",function(b){return 1.4*o.pointSelectR(b)}).transition().duration(100).attr("r",k)},R.unselectPoint=function(f,e,h){var g=this;g.config.data_onunselected.call(g.api,e,f.node()),g.main.select("."+O.selectedCircles+g.getTargetSelectorSuffix(e.id)).selectAll("."+O.selectedCircle+"-"+h).transition().duration(100).attr("r",0).remove()},R.togglePoint=function(f,e,h,g){f?this.selectPoint(e,h,g):this.unselectPoint(e,h,g)},R.selectPath=function(e,d){var f=this;f.config.data_onselected.call(f,d,e.node()),e.transition().duration(100).style("fill",function(){return f.d3.rgb(f.color(d)).brighter(0.75)})},R.unselectPath=function(e,d){var f=this;f.config.data_onunselected.call(f,d,e.node()),e.transition().duration(100).style("fill",function(){return f.color(d)})},R.togglePath=function(f,e,h,g){f?this.selectPath(e,h,g):this.unselectPath(e,h,g)},R.getToggle=function(f,e){var h,g=this;return"circle"===f.nodeName?h=g.isStepType(e)?function(){}:g.togglePoint:"path"===f.nodeName&&(h=g.togglePath),h},R.toggleShape=function(r,q,p){var o=this,n=o.d3,m=o.config,l=n.select(r),k=l.classed(O.SELECTED),j=o.getToggle(r,q).bind(o);m.data_selection_enabled&&m.data_selection_isselectable(q)&&(m.data_selection_multiple||o.main.selectAll("."+O.shapes+(m.data_selection_grouped?o.getTargetSelectorSuffix(q.id):"")).selectAll("."+O.shape).each(function(e,d){var f=n.select(this);f.classed(O.SELECTED)&&j(!1,f.classed(O.SELECTED,!1),e,d)}),l.classed(O.SELECTED,!k),j(!k,l,q,p))},R.initBrush=function(){var d=this,c=d.d3;d.brush=c.svg.brush().on("brush",function(){d.redrawForBrush()}),d.brush.update=function(){return d.context&&d.context.select("."+O.brush).call(this),this},d.brush.scale=function(a){return d.config.axis_rotated?this.y(a):this.x(a)}},R.initSubchart=function(){var f=this,e=f.config,h=f.context=f.svg.append("g").attr("transform",f.getTranslate("context")),g=e.subchart_show?"visible":"hidden";h.style("visibility",g),h.append("g").attr("clip-path",f.clipPathForSubchart).attr("class",O.chart),h.select("."+O.chart).append("g").attr("class",O.chartBars),h.select("."+O.chart).append("g").attr("class",O.chartLines),h.append("g").attr("clip-path",f.clipPath).attr("class",O.brush).call(f.brush),f.axes.subx=h.append("g").attr("class",O.axisX).attr("transform",f.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":f.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?g:"hidden")},R.updateTargetsForSubchart=function(z){var y,x,w,v,u=this,t=u.context,s=u.config,r=u.classChartBar.bind(u),q=u.classBars.bind(u),p=u.classChartLine.bind(u),o=u.classLines.bind(u),l=u.classAreas.bind(u);s.subchart_show&&(v=t.select("."+O.chartBars).selectAll("."+O.chartBar).data(z).attr("class",r),w=v.enter().append("g").style("opacity",0).attr("class",r),w.append("g").attr("class",q),x=t.select("."+O.chartLines).selectAll("."+O.chartLine).data(z).attr("class",p),y=x.enter().append("g").style("opacity",0).attr("class",p),y.append("g").attr("class",o),y.append("g").attr("class",l),t.selectAll("."+O.brush+" rect").attr(s.axis_rotated?"width":"height",s.axis_rotated?u.width2:u.height2))},R.updateBarForSubchart=function(d){var c=this;c.contextBar=c.context.selectAll("."+O.bars).selectAll("."+O.bar).data(c.barData.bind(c)),c.contextBar.enter().append("path").attr("class",c.classBar.bind(c)).style("stroke","none").style("fill",c.color),c.contextBar.style("opacity",c.initialOpacity.bind(c)),c.contextBar.exit().transition().duration(d).style("opacity",0).remove()},R.redrawBarForSubchart=function(e,d,f){(d?this.contextBar.transition(Math.random().toString()).duration(f):this.contextBar).attr("d",e).style("opacity",1)},R.updateLineForSubchart=function(d){var c=this;c.contextLine=c.context.selectAll("."+O.lines).selectAll("."+O.line).data(c.lineData.bind(c)),c.contextLine.enter().append("path").attr("class",c.classLine.bind(c)).style("stroke",c.color),c.contextLine.style("opacity",c.initialOpacity.bind(c)),c.contextLine.exit().transition().duration(d).style("opacity",0).remove()},R.redrawLineForSubchart=function(e,d,f){(d?this.contextLine.transition(Math.random().toString()).duration(f):this.contextLine).attr("d",e).style("opacity",1)},R.updateAreaForSubchart=function(e){var d=this,f=d.d3;d.contextArea=d.context.selectAll("."+O.areas).selectAll("."+O.area).data(d.lineData.bind(d)),d.contextArea.enter().append("path").attr("class",d.classArea.bind(d)).style("fill",d.color).style("opacity",function(){return d.orgAreaOpacity=+f.select(this).style("opacity"),0}),d.contextArea.style("opacity",0),d.contextArea.exit().transition().duration(e).style("opacity",0).remove()},R.redrawAreaForSubchart=function(e,d,f){(d?this.contextArea.transition(Math.random().toString()).duration(f):this.contextArea).attr("d",e).style("fill",this.color).style("opacity",this.orgAreaOpacity)},R.redrawSubchart=function(z,y,x,w,v,u,t){var s,r,q,p=this,o=p.d3,n=p.config;p.context.style("visibility",n.subchart_show?"visible":"hidden"),n.subchart_show&&(o.event&&"zoom"===o.event.type&&p.brush.extent(p.x.orgDomain()).update(),z&&(p.brush.empty()||p.brush.extent(p.x.orgDomain()).update(),s=p.generateDrawArea(v,!0),r=p.generateDrawBar(u,!0),q=p.generateDrawLine(t,!0),p.updateBarForSubchart(x),p.updateLineForSubchart(x),p.updateAreaForSubchart(x),p.redrawBarForSubchart(r,x,x),p.redrawLineForSubchart(q,x,x),p.redrawAreaForSubchart(s,x,x)))},R.redrawForBrush=function(){var d=this,c=d.x;d.redraw({withTransition:!1,withY:d.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),d.config.subchart_onbrush.call(d.api,c.orgDomain())},R.transformContext=function(f,e){var h,g=this;e&&e.axisSubX?h=e.axisSubX:(h=g.context.select("."+O.axisX),f&&(h=h.transition())),g.context.attr("transform",g.getTranslate("context")),h.attr("transform",g.getTranslate("subx"))},R.getDefaultExtent=function(){var e=this,d=e.config,f=M(d.axis_x_extent)?d.axis_x_extent(e.getXDomain(e.data.targets)):d.axis_x_extent;return e.isTimeSeries()&&(f=[e.parseDate(f[0]),e.parseDate(f[1])]),f},R.initZoom=function(){var f,e=this,h=e.d3,g=e.config;e.zoom=h.behavior.zoom().on("zoomstart",function(){f=h.event.sourceEvent,e.zoom.altDomain=h.event.sourceEvent.altKey?e.x.orgDomain():null,g.zoom_onzoomstart.call(e.api,h.event.sourceEvent)}).on("zoom",function(){e.redrawForZoom.call(e)}).on("zoomend",function(){var a=h.event.sourceEvent;a&&f.clientX===a.clientX&&f.clientY===a.clientY||(e.redrawEventRect(),e.updateZoom(),g.zoom_onzoomend.call(e.api,e.x.orgDomain()))}),e.zoom.scale=function(b){return g.axis_rotated?this.y(b):this.x(b)},e.zoom.orgScaleExtent=function(){var b=g.zoom_extent?g.zoom_extent:[1,10];return[b[0],Math.max(e.getMaxDataCount()/b[1],b[1])]},e.zoom.updateScaleExtent=function(){var b=G(e.x.orgDomain())/G(e.getZoomDomain()),d=this.orgScaleExtent();return this.scaleExtent([d[0]*b,d[1]*b]),this}},R.getZoomDomain=function(){var g=this,f=g.config,j=g.d3,i=j.min([g.orgXDomain[0],f.zoom_x_min]),h=j.max([g.orgXDomain[1],f.zoom_x_max]);return[i,h]},R.updateZoom=function(){var d=this,c=d.config.zoom_enabled?d.zoom:function(){};d.main.select("."+O.zoomRect).call(c).on("dblclick.zoom",null),d.main.selectAll("."+O.eventRect).call(c).on("dblclick.zoom",null)},R.redrawForZoom=function(){var g=this,f=g.d3,j=g.config,i=g.zoom,h=g.x;if(j.zoom_enabled&&0!==g.filterTargetsToShow(g.data.targets).length){if("mousemove"===f.event.sourceEvent.type&&i.altDomain){return h.domain(i.altDomain),void i.scale(h).updateScaleExtent()}g.isCategorized()&&h.orgDomain()[0]===g.orgXDomain[0]&&h.domain([g.orgXDomain[0]-1e-10,h.orgDomain()[1]]),g.redraw({withTransition:!1,withY:j.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===f.event.sourceEvent.type&&(g.cancelClick=!0),j.zoom_onzoom.call(g.api,h.orgDomain())}},R.generateColor=function(){var i=this,h=i.config,n=i.d3,m=h.data_colors,l=E(h.color_pattern)?h.color_pattern:n.scale.category10().range(),k=h.data_color,j=[];return function(e){var d,f=e.id||e.data&&e.data.id||e;return m[f] instanceof Function?d=m[f](e):m[f]?d=m[f]:(j.indexOf(f)<0&&j.push(f),d=l[j.indexOf(f)%l.length],m[f]=d),k instanceof Function?k(d,e):d}},R.generateLevelColor=function(){var i=this,h=i.config,n=h.color_pattern,m=h.color_threshold,l="value"===m.unit,k=m.values&&m.values.length?m.values:[],j=m.max||100;return E(h.color_threshold)?function(e){var c,g,f=n[n.length-1];for(c=0;c<k.length;c++){if(g=l?e:100*e/j,g<k[c]){f=n[c];break}}return f}:null},R.getYFormat=function(f){var e=this,h=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.yFormat,g=f&&!e.hasType("gauge")?e.defaultArcValueFormat:e.y2Format;return function(b,i,d){var c="y2"===e.axis.getId(d)?g:h;return c.call(e,b,i)}},R.yFormat=function(f){var e=this,h=e.config,g=h.axis_y_tick_format?h.axis_y_tick_format:e.defaultValueFormat;return g(f)},R.y2Format=function(f){var e=this,h=e.config,g=h.axis_y2_tick_format?h.axis_y2_tick_format:e.defaultValueFormat;return g(f)},R.defaultValueFormat=function(b){return N(b)?+b:""},R.defaultArcValueFormat=function(d,c){return(100*c).toFixed(1)+"%"},R.dataLabelFormat=function(g){var f,j=this,i=j.config.data_labels,h=function(b){return N(b)?+b:""};return f="function"==typeof i.format?i.format:"object"==typeof i.format?i.format[g]?i.format[g]===!0?h:i.format[g]:function(){return""}:h},R.hasCaches=function(d){for(var c=0;c<d.length;c++){if(!(d[c] in this.cache)){return !1}}return !0},R.addCache=function(d,c){this.cache[d]=this.cloneTarget(c)},R.getCaches=function(e){var d,f=[];for(d=0;d<e.length;d++){e[d] in this.cache&&f.push(this.cloneTarget(this.cache[e[d]]))}return f};var O=R.CLASS={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};R.generateClass=function(d,c){return" "+d+" "+d+this.getTargetSelectorSuffix(c)},R.classText=function(b){return this.generateClass(O.text,b.index)},R.classTexts=function(b){return this.generateClass(O.texts,b.id)},R.classShape=function(b){return this.generateClass(O.shape,b.index)},R.classShapes=function(b){return this.generateClass(O.shapes,b.id)},R.classLine=function(b){return this.classShape(b)+this.generateClass(O.line,b.id)},R.classLines=function(b){return this.classShapes(b)+this.generateClass(O.lines,b.id)},R.classCircle=function(b){return this.classShape(b)+this.generateClass(O.circle,b.index)},R.classCircles=function(b){return this.classShapes(b)+this.generateClass(O.circles,b.id)},R.classBar=function(b){return this.classShape(b)+this.generateClass(O.bar,b.index)},R.classBars=function(b){return this.classShapes(b)+this.generateClass(O.bars,b.id)},R.classArc=function(b){return this.classShape(b.data)+this.generateClass(O.arc,b.data.id)},R.classArcs=function(b){return this.classShapes(b.data)+this.generateClass(O.arcs,b.data.id)},R.classArea=function(b){return this.classShape(b)+this.generateClass(O.area,b.id)},R.classAreas=function(b){return this.classShapes(b)+this.generateClass(O.areas,b.id)},R.classRegion=function(d,c){return this.generateClass(O.region,c)+" "+("class" in d?d["class"]:"")},R.classEvent=function(b){return this.generateClass(O.eventRect,b.index)},R.classTarget=function(f){var e=this,h=e.config.data_classes[f],g="";return h&&(g=" "+O.target+"-"+h),e.generateClass(O.target,f)+g},R.classFocus=function(b){return this.classFocused(b)+this.classDefocused(b)},R.classFocused=function(b){return" "+(this.focusedTargetIds.indexOf(b.id)>=0?O.focused:"")},R.classDefocused=function(b){return" "+(this.defocusedTargetIds.indexOf(b.id)>=0?O.defocused:"")},R.classChartText=function(b){return O.chartText+this.classTarget(b.id)},R.classChartLine=function(b){return O.chartLine+this.classTarget(b.id)},R.classChartBar=function(b){return O.chartBar+this.classTarget(b.id)},R.classChartArc=function(b){return O.chartArc+this.classTarget(b.data.id)},R.getTargetSelectorSuffix=function(b){return b||0===b?("-"+b).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},R.selectorTarget=function(d,c){return(c||"")+"."+O.target+this.getTargetSelectorSuffix(d)},R.selectorTargets=function(e,d){var f=this;return e=e||[],e.length?e.map(function(b){return f.selectorTarget(b,d)}):null},R.selectorLegend=function(b){return"."+O.legendItem+this.getTargetSelectorSuffix(b)},R.selectorLegends=function(d){var c=this;return d&&d.length?d.map(function(b){return c.selectorLegend(b)}):null};var N=R.isValue=function(b){return b||0===b},M=R.isFunction=function(b){return"function"==typeof b},L=R.isString=function(b){return"string"==typeof b},K=R.isUndefined=function(b){return"undefined"==typeof b},J=R.isDefined=function(b){return"undefined"!=typeof b},I=R.ceil10=function(b){return 10*Math.ceil(b/10)},H=R.asHalfPixel=function(b){return Math.ceil(b)+0.5},G=R.diffDomain=function(b){return b[1]-b[0]},F=R.isEmpty=function(b){return"undefined"==typeof b||null===b||L(b)&&0===b.length||"object"==typeof b&&0===Object.keys(b).length},E=R.notEmpty=function(b){return !R.isEmpty(b)},D=R.getOption=function(e,d,f){return J(e[d])?e[d]:f},C=R.hasValue=function(e,d){var f=!1;return Object.keys(e).forEach(function(a){e[a]===d&&(f=!0)}),f},B=R.getPathBox=function(g){var f=g.getBoundingClientRect(),j=[g.pathSegList.getItem(0),g.pathSegList.getItem(1)],i=j[0].x,h=Math.min(j[0].y,j[1].y);return{x:i,y:h,width:f.width,height:f.height}};S.focus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),this.revert(),this.defocus(),d.classed(O.focused,!0).classed(O.defocused,!1),f.hasArcType()&&f.expandArc(e),f.toggleFocusLegend(e,!0),f.focusedTargetIds=e,f.defocusedTargetIds=f.defocusedTargetIds.filter(function(a){return e.indexOf(a)<0})},S.defocus=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e.filter(f.isTargetToShow,f))),d.classed(O.focused,!1).classed(O.defocused,!0),f.hasArcType()&&f.unexpandArc(e),f.toggleFocusLegend(e,!1),f.focusedTargetIds=f.focusedTargetIds.filter(function(a){return e.indexOf(a)<0}),f.defocusedTargetIds=e},S.revert=function(e){var d,f=this.internal;e=f.mapToTargetIds(e),d=f.svg.selectAll(f.selectorTargets(e)),d.classed(O.focused,!1).classed(O.defocused,!1),f.hasArcType()&&f.unexpandArc(e),f.config.legend_show&&(f.showLegend(e.filter(f.isLegendToShow.bind(f))),f.legend.selectAll(f.selectorLegends(e)).filter(function(){return f.d3.select(this).classed(O.legendItemFocused)}).classed(O.legendItemFocused,!1)),f.focusedTargetIds=[],f.defocusedTargetIds=[]},S.show=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.removeHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",1,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",1)}),e.withLegend&&g.showLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},S.hide=function(f,e){var h,g=this.internal;f=g.mapToTargetIds(f),e=e||{},g.addHiddenTargetIds(f),h=g.svg.selectAll(g.selectorTargets(f)),h.transition().style("opacity",0,"important").call(g.endall,function(){h.style("opacity",null).style("opacity",0)}),e.withLegend&&g.hideLegend(f),g.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},S.toggle=function(f,e){var h=this,g=this.internal;g.mapToTargetIds(f).forEach(function(b){g.isTargetToShow(b)?h.hide(b,e):h.show(b,e)})},S.zoom=function(d){var c=this.internal;return d&&(c.isTimeSeries()&&(d=d.map(function(b){return c.parseDate(b)})),c.brush.extent(d),c.redraw({withUpdateXDomain:!0,withY:c.config.zoom_rescale}),c.config.zoom_onzoom.call(this,c.x.orgDomain())),c.brush.extent()},S.zoom.enable=function(d){var c=this.internal;c.config.zoom_enabled=d,c.updateAndRedraw()},S.unzoom=function(){var b=this.internal;b.brush.clear().update(),b.redraw({withUpdateXDomain:!0})},S.zoom.max=function(f){var e=this.internal,h=e.config,g=e.d3;return 0===f||f?void (h.zoom_x_max=g.max([e.orgXDomain[1],f])):h.zoom_x_max},S.zoom.min=function(f){var e=this.internal,h=e.config,g=e.d3;return 0===f||f?void (h.zoom_x_min=g.min([e.orgXDomain[0],f])):h.zoom_x_min},S.zoom.range=function(b){return arguments.length?(J(b.max)&&this.domain.max(b.max),void (J(b.min)&&this.domain.min(b.min))):{max:this.domain.max(),min:this.domain.min()}},S.load=function(e){var d=this.internal,f=d.config;return e.xs&&d.addXs(e.xs),"classes" in e&&Object.keys(e.classes).forEach(function(a){f.data_classes[a]=e.classes[a]}),"categories" in e&&d.isCategorized()&&(f.axis_x_categories=e.categories),"axes" in e&&Object.keys(e.axes).forEach(function(a){f.data_axes[a]=e.axes[a]}),"colors" in e&&Object.keys(e.colors).forEach(function(a){f.data_colors[a]=e.colors[a]}),"cacheIds" in e&&d.hasCaches(e.cacheIds)?void d.load(d.getCaches(e.cacheIds),e.done):void ("unload" in e?d.unload(d.mapToTargetIds("boolean"==typeof e.unload&&e.unload?null:e.unload),function(){d.loadFromArgs(e)}):d.loadFromArgs(e))},S.unload=function(d){var c=this.internal;d=d||{},d instanceof Array?d={ids:d}:"string"==typeof d&&(d={ids:[d]}),c.unload(c.mapToTargetIds(d.ids),function(){c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),d.done&&d.done()})},S.flow=function(ab){var aa,z,y,x,w,v,u,t,s=this.internal,r=[],q=s.getMaxDataCount(),p=0,m=0;if(ab.json){z=s.convertJsonToData(ab.json,ab.keys)}else{if(ab.rows){z=s.convertRowsToData(ab.rows)}else{if(!ab.columns){return}z=s.convertColumnsToData(ab.columns)}}aa=s.convertDataToTargets(z,!0),s.data.targets.forEach(function(b){var h,g,f=!1;for(h=0;h<aa.length;h++){if(b.id===aa[h].id){for(f=!0,b.values[b.values.length-1]&&(m=b.values[b.values.length-1].index+1),p=aa[h].values.length,g=0;p>g;g++){aa[h].values[g].index=m+g,s.isTimeSeries()||(aa[h].values[g].x=m+g)}b.values=b.values.concat(aa[h].values),aa.splice(h,1);break}}f||r.push(b.id)}),s.data.targets.forEach(function(e){var d,f;for(d=0;d<r.length;d++){if(e.id===r[d]){for(m=e.values[e.values.length-1].index+1,f=0;p>f;f++){e.values.push({id:e.id,index:m+f,x:s.isTimeSeries()?s.getOtherTargetX(m+f):m+f,value:null})}}}}),s.data.targets.length&&aa.forEach(function(e){var d,f=[];for(d=s.data.targets[0].values[0].index;m>d;d++){f.push({id:e.id,index:d,x:s.isTimeSeries()?s.getOtherTargetX(d):d,value:null})}e.values.forEach(function(b){b.index+=m,s.isTimeSeries()||(b.x+=m)}),e.values=f.concat(e.values)}),s.data.targets=s.data.targets.concat(aa),y=s.getMaxDataCount(),w=s.data.targets[0],v=w.values[0],J(ab.to)?(p=0,t=s.isTimeSeries()?s.parseDate(ab.to):ab.to,w.values.forEach(function(b){b.x<t&&p++})):J(ab.length)&&(p=ab.length),q?1===q&&s.isTimeSeries()&&(u=(w.values[w.values.length-1].x-v.x)/2,x=[new Date(+v.x-u),new Date(+v.x+u)],s.updateXDomain(null,!0,!0,!1,x)):(u=s.isTimeSeries()?w.values.length>1?w.values[w.values.length-1].x-v.x:v.x-s.getXDomain(s.data.targets)[0]:1,x=[v.x-u,v.x],s.updateXDomain(null,!0,!0,!1,x)),s.updateTargets(s.data.targets),s.redraw({flow:{index:v.index,length:p,duration:N(ab.duration)?ab.duration:s.config.transition_duration,done:ab.done,orgDataCount:q},withLegend:!0,withTransition:q>1,withTrimXDomain:!1,withUpdateXAxis:!0})},R.generateFlow=function(f){var e=this,h=e.config,g=e.d3;return function(){var az,ay,ax,aw=f.targets,av=f.flow,au=f.drawBar,at=f.drawLine,ar=f.drawArea,aq=f.cx,ap=f.cy,ao=f.xv,am=f.xForText,ak=f.yForText,ai=f.duration,af=1,ad=av.index,ab=av.length,t=e.getValueOnIndex(e.data.targets[0].values,ad),d=e.getValueOnIndex(e.data.targets[0].values,ad+ab),b=e.x.domain(),an=av.duration||ai,al=av.done||function(){},aj=e.generateWait(),ah=e.xgrid||g.selectAll([]),ag=e.xgridLines||g.selectAll([]),ae=e.mainRegion||g.selectAll([]),ac=e.mainText||g.selectAll([]),aa=e.mainBar||g.selectAll([]),l=e.mainLine||g.selectAll([]),c=e.mainArea||g.selectAll([]),a=e.mainCircle||g.selectAll([]);e.flowing=!0,e.data.targets.forEach(function(i){i.values.splice(0,ab)}),ax=e.updateXDomain(aw,!0,!0),e.updateXGrid&&e.updateXGrid(!0),av.orgDataCount?az=1===av.orgDataCount||t.x===d.x?e.x(b[0])-e.x(ax[0]):e.isTimeSeries()?e.x(b[0])-e.x(ax[0]):e.x(t.x)-e.x(d.x):1!==e.data.targets[0].values.length?az=e.x(b[0])-e.x(ax[0]):e.isTimeSeries()?(t=e.getValueOnIndex(e.data.targets[0].values,0),d=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),az=e.x(t.x)-e.x(d.x)):az=G(ax)/2,af=G(b)/G(ax),ay="translate("+az+",0) scale("+af+",1)",e.hideXGridFocus(),g.transition().ease("linear").duration(an).each(function(){aj.add(e.axes.x.transition().call(e.xAxis)),aj.add(aa.transition().attr("transform",ay)),aj.add(l.transition().attr("transform",ay)),aj.add(c.transition().attr("transform",ay)),aj.add(a.transition().attr("transform",ay)),aj.add(ac.transition().attr("transform",ay)),aj.add(ae.filter(e.isRegionOnX).transition().attr("transform",ay)),aj.add(ah.transition().attr("transform",ay)),aj.add(ag.transition().attr("transform",ay))}).call(aj,function(){var i,m=[],k=[],j=[];if(ab){for(i=0;ab>i;i++){m.push("."+O.shape+"-"+(ad+i)),k.push("."+O.text+"-"+(ad+i)),j.push("."+O.eventRect+"-"+(ad+i))}e.svg.selectAll("."+O.shapes).selectAll(m).remove(),e.svg.selectAll("."+O.texts).selectAll(k).remove(),e.svg.selectAll("."+O.eventRects).selectAll(j).remove(),e.svg.select("."+O.xgrid).remove()}ah.attr("transform",null).attr(e.xgridAttr),ag.attr("transform",null),ag.select("line").attr("x1",h.axis_rotated?0:ao).attr("x2",h.axis_rotated?e.width:ao),ag.select("text").attr("x",h.axis_rotated?e.width:0).attr("y",ao),aa.attr("transform",null).attr("d",au),l.attr("transform",null).attr("d",at),c.attr("transform",null).attr("d",ar),a.attr("transform",null).attr("cx",aq).attr("cy",ap),ac.attr("transform",null).attr("x",am).attr("y",ak).style("fill-opacity",e.opacityForText.bind(e)),ae.attr("transform",null),ae.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),h.interaction_enabled&&e.redrawEventRect(),al(),e.flowing=!1})}},S.selected=function(e){var d=this.internal,f=d.d3;return f.merge(d.main.selectAll("."+O.shapes+d.getTargetSelectorSuffix(e)).selectAll("."+O.shape).filter(function(){return f.select(this).classed(O.SELECTED)}).map(function(b){return b.map(function(g){var c=g.__data__;return c.data?c.data:c})}))},S.select=function(h,g,l){var k=this.internal,j=k.d3,i=k.config;i.data_selection_enabled&&k.main.selectAll("."+O.shapes).selectAll("."+O.shape).each(function(f,e){var d=j.select(this),c=f.data?f.data.id:f.id,b=k.getToggle(this,f).bind(k),a=i.data_selection_grouped||!h||h.indexOf(c)>=0,q=!g||g.indexOf(e)>=0,p=d.classed(O.SELECTED);d.classed(O.line)||d.classed(O.area)||(a&&q?i.data_selection_isselectable(f)&&!p&&b(!0,d.classed(O.SELECTED,!0),f,e):J(l)&&l&&p&&b(!1,d.classed(O.SELECTED,!1),f,e))})},S.unselect=function(g,f){var j=this.internal,i=j.d3,h=j.config;h.data_selection_enabled&&j.main.selectAll("."+O.shapes).selectAll("."+O.shape).each(function(o,l){var e=i.select(this),d=o.data?o.data.id:o.id,c=j.getToggle(this,o).bind(j),b=h.data_selection_grouped||!g||g.indexOf(d)>=0,a=!f||f.indexOf(l)>=0,p=e.classed(O.SELECTED);e.classed(O.line)||e.classed(O.area)||b&&a&&h.data_selection_isselectable(o)&&p&&c(!1,e.classed(O.SELECTED,!1),o,l)})},S.transform=function(f,e){var h=this.internal,g=["pie","donut"].indexOf(f)>=0?{withTransform:!0}:null;h.transformTo(e,f,g)},R.transformTo=function(h,g,l){var k=this,j=!k.hasArcType(),i=l||{withTransitionForAxis:j};i.withTransitionForTransform=!1,k.transiting=!1,k.setTargetType(h,g),k.updateTargets(k.data.targets),k.updateAndRedraw(i)},S.groups=function(e){var d=this.internal,f=d.config;return K(e)?f.data_groups:(f.data_groups=e,d.redraw(),f.data_groups)},S.xgrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_x_lines=e,d.redrawWithoutRescale(),f.grid_x_lines):f.grid_x_lines},S.xgrids.add=function(d){var c=this.internal;return this.xgrids(c.config.grid_x_lines.concat(d?d:[]))},S.xgrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!0)},S.ygrids=function(e){var d=this.internal,f=d.config;return e?(f.grid_y_lines=e,d.redrawWithoutRescale(),f.grid_y_lines):f.grid_y_lines},S.ygrids.add=function(d){var c=this.internal;return this.ygrids(c.config.grid_y_lines.concat(d?d:[]))},S.ygrids.remove=function(d){var c=this.internal;c.removeGridLines(d,!1)},S.regions=function(e){var d=this.internal,f=d.config;return e?(f.regions=e,d.redrawWithoutRescale(),f.regions):f.regions},S.regions.add=function(e){var d=this.internal,f=d.config;return e?(f.regions=f.regions.concat(e),d.redrawWithoutRescale(),f.regions):f.regions},S.regions.remove=function(h){var g,l,k,j=this.internal,i=j.config;return h=h||{},g=j.getOption(h,"duration",i.transition_duration),l=j.getOption(h,"classes",[O.region]),k=j.main.select("."+O.regions).selectAll(l.map(function(b){return"."+b})),(g?k.transition().duration(g):k).style("opacity",0).remove(),i.regions=i.regions.filter(function(d){var c=!1;return d["class"]?(d["class"].split(" ").forEach(function(b){l.indexOf(b)>=0&&(c=!0)}),!c):!0}),i.regions},S.data=function(d){var c=this.internal.data.targets;return"undefined"==typeof d?c:c.filter(function(a){return[].concat(d).indexOf(a.id)>=0})},S.data.shown=function(b){return this.internal.filterTargetsToShow(this.data(b))},S.data.values=function(e){var d,f=null;return e&&(d=this.data(e),f=d[0]?d[0].values.map(function(b){return b.value}):null),f},S.data.names=function(b){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",b)},S.data.colors=function(b){return this.internal.updateDataAttributes("colors",b)},S.data.axes=function(b){return this.internal.updateDataAttributes("axes",b)},S.category=function(f,e){var h=this.internal,g=h.config;return arguments.length>1&&(g.axis_x_categories[f]=e,h.redraw()),g.axis_x_categories[f]},S.categories=function(e){var d=this.internal,f=d.config;return arguments.length?(f.axis_x_categories=e,d.redraw(),f.axis_x_categories):f.axis_x_categories},S.color=function(d){var c=this.internal;return c.color(d)},S.x=function(d){var c=this.internal;return arguments.length&&(c.updateTargetX(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},S.xs=function(d){var c=this.internal;return arguments.length&&(c.updateTargetXs(c.data.targets,d),c.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),c.data.xs},S.axis=function(){},S.axis.labels=function(d){var c=this.internal;arguments.length&&(Object.keys(d).forEach(function(a){c.axis.setLabelText(a,d[a])}),c.axis.updateLabels())},S.axis.max=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(N(e.x)&&(f.axis_x_max=e.x),N(e.y)&&(f.axis_y_max=e.y),N(e.y2)&&(f.axis_y2_max=e.y2)):f.axis_y_max=f.axis_y2_max=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_max,y:f.axis_y_max,y2:f.axis_y2_max}},S.axis.min=function(e){var d=this.internal,f=d.config;return arguments.length?("object"==typeof e?(N(e.x)&&(f.axis_x_min=e.x),N(e.y)&&(f.axis_y_min=e.y),N(e.y2)&&(f.axis_y2_min=e.y2)):f.axis_y_min=f.axis_y2_min=e,void d.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})):{x:f.axis_x_min,y:f.axis_y_min,y2:f.axis_y2_min}},S.axis.range=function(b){return arguments.length?(J(b.max)&&this.axis.max(b.max),void (J(b.min)&&this.axis.min(b.min))):{max:this.axis.max(),min:this.axis.min()}},S.legend=function(){},S.legend.show=function(d){var c=this.internal;c.showLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},S.legend.hide=function(d){var c=this.internal;c.hideLegend(c.mapToTargetIds(d)),c.updateAndRedraw({withLegend:!0})},S.resize=function(e){var d=this.internal,f=d.config;f.size_width=e?e.width:null,f.size_height=e?e.height:null,this.flush()},S.flush=function(){var b=this.internal;b.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},S.destroy=function(){var a=this.internal;if(Z.clearInterval(a.intervalForObserveInserted),void 0!==a.resizeTimeout&&Z.clearTimeout(a.resizeTimeout),Z.detachEvent){Z.detachEvent("onresize",a.resizeFunction)}else{if(Z.removeEventListener){Z.removeEventListener("resize",a.resizeFunction)}else{var d=Z.onresize;d&&d.add&&d.remove&&d.remove(a.resizeFunction)}}return a.selectChart.classed("c3",!1).html(""),Object.keys(a).forEach(function(b){a[b]=null}),null},S.tooltip=function(){},S.tooltip.show=function(f){var e,h,g=this.internal;f.mouse&&(h=f.mouse),f.data?g.isMultipleX()?(h=[g.x(f.data.x),g.getYScale(f.data.id)(f.data.value)],e=null):e=N(f.data.index)?f.data.index:g.getIndexByX(f.data.x):"undefined"!=typeof f.x?e=g.getIndexByX(f.x):"undefined"!=typeof f.index&&(e=f.index),g.dispatchEvent("mouseover",e,h),g.dispatchEvent("mousemove",e,h),g.config.tooltip_onshow.call(g,f.data)},S.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)};var A;R.isSafari=function(){var a=Z.navigator.userAgent;return a.indexOf("Safari")>=0&&a.indexOf("Chrome")<0},R.isChrome=function(){var a=Z.navigator.userAgent;return a.indexOf("Chrome")>=0},Function.prototype.bind||(Function.prototype.bind=function(g){if("function"!=typeof this){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.prototype.slice.call(arguments,1),j=this,i=function(){},h=function(){return j.apply(this instanceof i?this:g,f.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,h.prototype=new i,h}),"function"==typeof define&&define.amd?define("c3",["d3"],function(){return P}):"undefined"!=typeof exports&&"undefined"!=typeof module?module.exports=P:Z.c3=P}(window);
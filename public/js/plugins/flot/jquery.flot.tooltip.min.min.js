(function(b){var d={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}},a=function(e){this.tipPosition={x:0,y:0},this.init(e)};a.prototype.init=function(j){function f(e){var i={};i.x=e.pageX,i.y=e.pageY,g.updateTooltipPosition(i)}function h(l,p,k){var m=g.getDomElement();if(k){var q;q=g.stringFormat(g.tooltipOptions.content,k),m.html(q),g.updateTooltipPosition({x:p.pageX,y:p.pageY}),m.css({left:g.tipPosition.x+g.tooltipOptions.shifts.x,top:g.tipPosition.y+g.tooltipOptions.shifts.y}).show(),"function"==typeof g.tooltipOptions.onHover&&g.tooltipOptions.onHover(k,m)}else{m.hide().html("")}}var g=this;j.hooks.bindEvents.push(function(e,i){g.plotOptions=e.getOptions(),g.plotOptions.tooltip!==!1&&void 0!==g.plotOptions.tooltip&&(g.tooltipOptions=g.plotOptions.tooltipOpts,g.getDomElement(),b(e.getPlaceholder()).bind("plothover",h),b(i).bind("mousemove",f))}),j.hooks.shutdown.push(function(i,e){b(i.getPlaceholder()).unbind("plothover",h),b(e).unbind("mousemove",f)})},a.prototype.getDomElement=function(){var e;return b("#flotTip").length>0?e=b("#flotTip"):(e=b("<div />").attr("id","flotTip"),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},a.prototype.updateTooltipPosition=function(h){var f=b("#flotTip").outerWidth()+this.tooltipOptions.shifts.x,g=b("#flotTip").outerHeight()+this.tooltipOptions.shifts.y;h.x-b(window).scrollLeft()>b(window).innerWidth()-f&&(h.x-=f),h.y-b(window).scrollTop()>b(window).innerHeight()-g&&(h.y-=g),this.tipPosition.x=h.x,this.tipPosition.y=h.y},a.prototype.stringFormat=function(g,k){var f=/%p\.{0,1}(\d{0,})/,j=/%s/,h=/%x\.{0,1}(?:\d{0,})/,l=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof g&&(g=g(k.series.label,k.series.data[k.dataIndex][0],k.series.data[k.dataIndex][1],k)),k.series.percent!==void 0&&(g=this.adjustValPrecision(f,g,k.series.percent)),k.series.label!==void 0&&(g=g.replace(j,k.series.label)),this.isTimeMode("xaxis",k)&&this.isXDateFormat(k)&&(g=g.replace(h,this.timestampToDate(k.series.data[k.dataIndex][0],this.tooltipOptions.xDateFormat))),this.isTimeMode("yaxis",k)&&this.isYDateFormat(k)&&(g=g.replace(l,this.timestampToDate(k.series.data[k.dataIndex][1],this.tooltipOptions.yDateFormat))),"number"==typeof k.series.data[k.dataIndex][0]&&(g=this.adjustValPrecision(h,g,k.series.data[k.dataIndex][0])),"number"==typeof k.series.data[k.dataIndex][1]&&(g=this.adjustValPrecision(l,g,k.series.data[k.dataIndex][1])),k.series.xaxis.tickFormatter!==void 0&&(g=g.replace(h,k.series.xaxis.tickFormatter(k.series.data[k.dataIndex][0],k.series.xaxis))),k.series.yaxis.tickFormatter!==void 0&&(g=g.replace(l,k.series.yaxis.tickFormatter(k.series.data[k.dataIndex][1],k.series.yaxis))),g},a.prototype.isTimeMode=function(e,f){return f.series[e].options.mode!==void 0&&"time"===f.series[e].options.mode},a.prototype.isXDateFormat=function(){return this.tooltipOptions.xDateFormat!==void 0&&null!==this.tooltipOptions.xDateFormat},a.prototype.isYDateFormat=function(){return this.tooltipOptions.yDateFormat!==void 0&&null!==this.tooltipOptions.yDateFormat},a.prototype.timestampToDate=function(h,f){var g=new Date(h);return b.plot.formatDate(g,f)},a.prototype.adjustValPrecision=function(g,k,f){var j,h=k.match(g);return null!==h&&""!==RegExp.$1&&(j=RegExp.$1,f=f.toFixed(j),k=k.replace(g,f)),k};var c=function(e){new a(e)};b.plot.plugins.push({init:c,options:d,name:"tooltip",version:"0.6.1"})})(jQuery);
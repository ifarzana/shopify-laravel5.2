/*!
 * Masonry PACKAGED v3.3.1
 * Cascading grid layout library
 * http://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
;!function(f){function e(){}function h(b){function j(a){a.prototype.option||(a.prototype.option=function(c){b.isPlainObject(c)&&(this.options=b.extend(!0,this.options,c))})}function i(a,k){b.fn[a]=function(r){if("string"==typeof r){for(var q=g.call(arguments,1),p=0,o=this.length;o>p;p++){var n=this[p],m=b.data(n,a);if(m){if(b.isFunction(m[r])&&"_"!==r.charAt(0)){var c=m[r].apply(m,q);if(void 0!==c){return c}}else{d("no such method '"+r+"' for "+a+" instance")}}else{d("cannot call methods on "+a+" prior to initialization; attempted to call '"+r+"'")}}return this}return this.each(function(){var l=b.data(this,a);l?(l.option(r),l._init()):(l=new k(this,r),b.data(this,a,l))})}}if(b){var d="undefined"==typeof console?e:function(c){console.error(c)};return b.bridget=function(k,c){j(c),i(k,c)},b.bridget}}var g=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],h):h("object"==typeof exports?require("jquery"):f.jQuery)}(window),function(h){function g(a){var d=h.event;return d.target=d.target||d.srcElement||a,d}var l=document.documentElement,k=function(){};l.addEventListener?k=function(e,d,f){e.addEventListener(d,f,!1)}:l.attachEvent&&(k=function(b,f,e){b[f+e]=e.handleEvent?function(){var a=g(b);e.handleEvent.call(e,a)}:function(){var a=g(b);e.call(b,a)},b.attachEvent("on"+f,b[f+e])});var j=function(){};l.removeEventListener?j=function(e,d,f){e.removeEventListener(d,f,!1)}:l.detachEvent&&(j=function(f,e,n){f.detachEvent("on"+e,f[e+n]);try{delete f[e+n]}catch(m){f[e+n]=void 0}});var i={bind:k,unbind:j};"function"==typeof define&&define.amd?define("eventie/eventie",i):"object"==typeof exports?module.exports=i:h.eventie=i}(window),function(){function h(){}function g(e,d){for(var f=e.length;f--;){if(e[f].listener===d){return f}}return -1}function l(b){return function(){return this[b].apply(this,arguments)}}var k=h.prototype,j=this,i=j.EventEmitter;k.getListeners=function(f){var e,n,m=this._getEvents();if(f instanceof RegExp){e={};for(n in m){m.hasOwnProperty(n)&&f.test(n)&&(e[n]=m[n])}}else{e=m[f]||(m[f]=[])}return e},k.flattenListeners=function(e){var d,f=[];for(d=0;d<e.length;d+=1){f.push(e[d].listener)}return f},k.getListenersAsObject=function(e){var d,f=this.getListeners(e);return f instanceof Array&&(d={},d[e]=f),d||f},k.addListener=function(b,p){var o,n=this.getListenersAsObject(b),m="object"==typeof p;for(o in n){n.hasOwnProperty(o)&&-1===g(n[o],p)&&n[o].push(m?p:{listener:p,once:!1})}return this},k.on=l("addListener"),k.addOnceListener=function(d,c){return this.addListener(d,{listener:c,once:!0})},k.once=l("addOnceListener"),k.defineEvent=function(b){return this.getListeners(b),this},k.defineEvents=function(d){for(var c=0;c<d.length;c+=1){this.defineEvent(d[c])}return this},k.removeListener=function(b,p){var o,n,m=this.getListenersAsObject(b);for(n in m){m.hasOwnProperty(n)&&(o=g(m[n],p),-1!==o&&m[n].splice(o,1))}return this},k.off=l("removeListener"),k.addListeners=function(d,c){return this.manipulateListeners(!1,d,c)},k.removeListeners=function(d,c){return this.manipulateListeners(!0,d,c)},k.manipulateListeners=function(n,m,s){var r,q,p=n?this.removeListener:this.addListener,o=n?this.removeListeners:this.addListeners;if("object"!=typeof m||m instanceof RegExp){for(r=s.length;r--;){p.call(this,m,s[r])}}else{for(r in m){m.hasOwnProperty(r)&&(q=m[r])&&("function"==typeof q?p.call(this,r,q):o.call(this,r,q))}}return this},k.removeEvent=function(f){var e,n=typeof f,m=this._getEvents();if("string"===n){delete m[f]}else{if(f instanceof RegExp){for(e in m){m.hasOwnProperty(e)&&f.test(e)&&delete m[e]}}else{delete this._events}}return this},k.removeAllListeners=l("removeEvent"),k.emitEvent=function(n,m){var s,r,q,p,o=this.getListenersAsObject(n);for(q in o){if(o.hasOwnProperty(q)){for(r=o[q].length;r--;){s=o[q][r],s.once===!0&&this.removeListener(n,s.listener),p=s.listener.apply(this,m||[]),p===this._getOnceReturnValue()&&this.removeListener(n,s.listener)}}}return this},k.trigger=l("emitEvent"),k.emit=function(d){var c=Array.prototype.slice.call(arguments,1);return this.emitEvent(d,c)},k.setOnceReturnValue=function(b){return this._onceReturnValue=b,this},k._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},k._getEvents=function(){return this._events||(this._events={})},h.noConflict=function(){return j.EventEmitter=i,h},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return h}):"object"==typeof module&&module.exports?module.exports=h:j.EventEmitter=h}.call(this),function(f){function e(d){if(d){if("string"==typeof g[d]){return d}d=d.charAt(0).toUpperCase()+d.slice(1);for(var c,j=0,i=h.length;i>j;j++){if(c=h[j]+d,"string"==typeof g[c]){return c}}}}var h="Webkit Moz ms Ms O".split(" "),g=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return e}):"object"==typeof exports?module.exports=e:f.getStyleProperty=e}(window),function(i){function h(e){var d=parseFloat(e),f=-1===e.indexOf("%")&&!isNaN(d);return f&&d}function n(){}function m(){for(var f={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0,o=j.length;o>e;e++){var g=j[e];f[g]=0}return f}function l(q){function p(){if(!a){a=!0;var t=i.getComputedStyle;if(f=function(){var e=t?function(u){return t(u,null)}:function(u){return u.currentStyle};return function(u){var v=e(u);return v||k("Style returned "+v+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),v}}(),d=q("boxSizing")){var s=document.createElement("div");s.style.width="200px",s.style.padding="1px 2px 3px 4px",s.style.borderStyle="solid",s.style.borderWidth="1px 2px 3px 4px",s.style[d]="border-box";var r=document.body||document.documentElement;r.appendChild(s);var c=f(s);b=200===h(c.width),r.removeChild(s)}}}function o(Q){if(p(),"string"==typeof Q&&(Q=document.querySelector(Q)),Q&&"object"==typeof Q&&Q.nodeType){var P=f(Q);if("none"===P.display){return m()}var O={};O.width=Q.offsetWidth,O.height=Q.offsetHeight;for(var N=O.isBorderBox=!(!d||!P[d]||"border-box"!==P[d]),M=0,L=j.length;L>M;M++){var K=j[M],J=P[K];J=g(Q,J);var I=parseFloat(J);O[K]=isNaN(I)?0:I}var H=O.paddingLeft+O.paddingRight,G=O.paddingTop+O.paddingBottom,F=O.marginLeft+O.marginRight,E=O.marginTop+O.marginBottom,D=O.borderLeftWidth+O.borderRightWidth,C=O.borderTopWidth+O.borderBottomWidth,B=N&&b,A=h(P.width);A!==!1&&(O.width=A+(B?0:H+D));var e=h(P.height);return e!==!1&&(O.height=e+(B?0:G+C)),O.innerWidth=O.width-(H+D),O.innerHeight=O.height-(G+C),O.outerWidth=O.width+F,O.outerHeight=O.height+E,O}}function g(r,w){if(i.getComputedStyle||-1===w.indexOf("%")){return w}var v=r.style,u=v.left,t=r.runtimeStyle,s=t&&t.left;return s&&(t.left=r.currentStyle.left),v.left=w,w=v.pixelLeft,v.left=u,s&&(t.left=s),w}var f,d,b,a=!1;return o}var k="undefined"==typeof console?n:function(b){console.error(b)},j=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],l):"object"==typeof exports?module.exports=l(require("desandro-get-style-property")):i.getSize=l(i.getStyleProperty)}(window),function(i){function h(b){"function"==typeof b&&(h.isReady?b():j.push(b))}function n(b){var d="readystatechange"===b.type&&"complete"!==k.readyState;h.isReady||d||m()}function m(){h.isReady=!0;for(var b=0,f=j.length;f>b;b++){var e=j[b];e()}}function l(a){return"complete"===k.readyState?m():(a.bind(k,"DOMContentLoaded",n),a.bind(k,"readystatechange",n),a.bind(i,"load",n)),h}var k=i.document,j=[];h.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],l):"object"==typeof exports?module.exports=l(require("eventie")):i.docReady=l(i.eventie)}(window),function(r){function q(d,c){return d[l](c)}function p(d){if(!d.parentNode){var c=document.createDocumentFragment();c.appendChild(d)}}function o(g,c){p(g);for(var s=g.parentNode.querySelectorAll(c),i=0,h=s.length;h>i;i++){if(s[i]===g){return !0}}return !1}function n(b,c){return p(b),q(b,c)}var m,l=function(){if(r.matches){return"matches"}if(r.matchesSelector){return"matchesSelector"}for(var a=["webkit","moz","ms","o"],s=0,i=a.length;i>s;s++){var h=a[s],g=h+"MatchesSelector";if(r[g]){return g}}}();if(l){var k=document.createElement("div"),j=q(k,"div");m=j?q:n}else{m=o}"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return m}):"object"==typeof exports?module.exports=m:window.matchesSelector=m}(Element.prototype),function(d,c){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(b,a){return c(d,b,a)}):"object"==typeof exports?module.exports=c(d,require("doc-ready"),require("desandro-matches-selector")):d.fizzyUIUtils=c(d,d.docReady,d.matchesSelector)}(window,function(h,g,l){var k={};k.extend=function(e,d){for(var f in d){e[f]=d[f]}return e},k.modulo=function(d,c){return(d%c+c)%c};var j=Object.prototype.toString;k.isArray=function(b){return"[object Array]"==j.call(b)},k.makeArray=function(f){var d=[];if(k.isArray(f)){d=f}else{if(f&&"number"==typeof f.length){for(var n=0,m=f.length;m>n;n++){d.push(f[n])}}else{d.push(f)}}return d},k.indexOf=Array.prototype.indexOf?function(d,c){return d.indexOf(c)}:function(f,e){for(var n=0,m=f.length;m>n;n++){if(f[n]===e){return n}}return -1},k.removeFrom=function(e,d){var f=k.indexOf(e,d);-1!=f&&e.splice(f,1)},k.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(b){return b instanceof HTMLElement}:function(b){return b&&"object"==typeof b&&1==b.nodeType&&"string"==typeof b.nodeName},k.setText=function(){function d(b,e){c=c||(void 0!==document.documentElement.textContent?"textContent":"innerText"),b[c]=e}var c;return d}(),k.getParent=function(d,c){for(;d!=document.body;){if(d=d.parentNode,l(d,c)){return d}}},k.getQueryElement=function(b){return"string"==typeof b?document.querySelector(b):b},k.handleEvent=function(d){var c="on"+d.type;this[c]&&this[c](d)},k.filterFindElements=function(s,r){s=k.makeArray(s);for(var q=[],p=0,o=s.length;o>p;p++){var n=s[p];if(k.isElement(n)){if(r){l(n,r)&&q.push(n);for(var m=n.querySelectorAll(r),d=0,c=m.length;c>d;d++){q.push(m[d])}}else{q.push(n)}}}return q},k.debounceMethod=function(m,f,p){var o=m.prototype[f],n=f+"Timeout";m.prototype[f]=function(){var d=this[n];d&&clearTimeout(d);var c=arguments,e=this;this[n]=setTimeout(function(){o.apply(e,c),delete e[n]},p||100)}},k.toDashed=function(b){return b.replace(/(.)([A-Z])/g,function(e,d,f){return d+"-"+f}).toLowerCase()};var i=h.console;return k.htmlInit=function(b,a){g(function(){for(var w=k.toDashed(a),v=document.querySelectorAll(".js-"+w),u="data-"+w+"-options",t=0,s=v.length;s>t;t++){var r,q=v[t],f=q.getAttribute(u);try{r=f&&JSON.parse(f)}catch(e){i&&i.error("Error parsing "+u+" on "+q.nodeName.toLowerCase()+(q.id?"#"+q.id:"")+": "+e);continue}var d=new b(q,r),c=h.jQuery;c&&c.data(q,a,d)}})},k}),function(d,c){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(h,g,b,a){return c(d,h,g,b,a)}):"object"==typeof exports?module.exports=c(d,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(d.Outlayer={},d.Outlayer.Item=c(d,d.EventEmitter,d.getSize,d.getStyleProperty,d.fizzyUIUtils))}(window,function(N,M,L,K,J){function I(d){for(var c in d){return !1}return c=null,!0}function H(d,c){d&&(this.element=d,this.layout=c,this.position={x:0,y:0},this._create())}function G(b){return b.replace(/([A-Z])/g,function(c){return"-"+c.toLowerCase()})}var F=N.getComputedStyle,E=F?function(b){return F(b,null)}:function(b){return b.currentStyle},D=K("transition"),C=K("transform"),B=D&&C,A=!!K("perspective"),z={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[D],y=["transform","transition","transitionDuration","transitionProperty"],x=function(){for(var g={},d=0,j=y.length;j>d;d++){var i=y[d],h=K(i);h&&h!==i&&(g[i]=h)}return g}();J.extend(H.prototype,M.prototype),H.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},H.prototype.handleEvent=function(d){var c="on"+d.type;this[c]&&this[c](d)},H.prototype.getSize=function(){this.size=L(this.element)},H.prototype.css=function(f){var e=this.element.style;for(var h in f){var g=x[h]||h;e[g]=f[h]}},H.prototype.getPosition=function(){var r=E(this.element),q=this.layout.options,p=q.isOriginLeft,o=q.isOriginTop,n=r[p?"left":"right"],m=r[o?"top":"bottom"],l=parseInt(n,10),k=parseInt(m,10),j=this.layout.size;l=-1!=n.indexOf("%")?l/100*j.width:l,k=-1!=m.indexOf("%")?k/100*j.height:k,l=isNaN(l)?0:l,k=isNaN(k)?0:k,l-=p?j.paddingLeft:j.paddingRight,k-=o?j.paddingTop:j.paddingBottom,this.position.x=l,this.position.y=k},H.prototype.layoutPosition=function(){var P=this.layout.size,O=this.layout.options,t={},s=O.isOriginLeft?"paddingLeft":"paddingRight",r=O.isOriginLeft?"left":"right",q=O.isOriginLeft?"right":"left",p=this.position.x+P[s];t[r]=this.getXValue(p),t[q]="";var o=O.isOriginTop?"paddingTop":"paddingBottom",n=O.isOriginTop?"top":"bottom",m=O.isOriginTop?"bottom":"top",l=this.position.y+P[o];t[n]=this.getYValue(l),t[m]="",this.css(t),this.emitEvent("layout",[this])},H.prototype.getXValue=function(d){var c=this.layout.options;return c.percentPosition&&!c.isHorizontal?d/this.layout.size.width*100+"%":d+"px"},H.prototype.getYValue=function(d){var c=this.layout.options;return c.percentPosition&&c.isHorizontal?d/this.layout.size.height*100+"%":d+"px"},H.prototype._transitionTo=function(t,s){this.getPosition();var r=this.position.x,q=this.position.y,p=parseInt(t,10),o=parseInt(s,10),n=p===this.position.x&&o===this.position.y;if(this.setPosition(t,s),n&&!this.isTransitioning){return void this.layoutPosition()}var m=t-r,l=s-q,k={};k.transform=this.getTranslate(m,l),this.transition({to:k,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},H.prototype.getTranslate=function(e,d){var f=this.layout.options;return e=f.isOriginLeft?e:-e,d=f.isOriginTop?d:-d,e=this.getXValue(e),d=this.getYValue(d),A?"translate3d("+e+", "+d+", 0)":"translate("+e+", "+d+")"},H.prototype.goTo=function(d,c){this.setPosition(d,c),this.layoutPosition()},H.prototype.moveTo=B?H.prototype._transitionTo:H.prototype.goTo,H.prototype.setPosition=function(d,c){this.position.x=parseInt(d,10),this.position.y=parseInt(c,10)},H.prototype._nonTransition=function(d){this.css(d.to),d.isCleaning&&this._removeStyles(d.to);for(var c in d.onTransitionEnd){d.onTransitionEnd[c].call(this)}},H.prototype._transition=function(f){if(!parseFloat(this.layout.options.transitionDuration)){return void this._nonTransition(f)}var e=this._transn;for(var h in f.onTransitionEnd){e.onEnd[h]=f.onTransitionEnd[h]}for(h in f.to){e.ingProperties[h]=!0,f.isCleaning&&(e.clean[h]=!0)}if(f.from){this.css(f.from);var g=this.element.offsetHeight;g=null}this.enableTransition(f.to),this.css(f.to),this.isTransitioning=!0};var w="opacity,"+G(x.transform||"transform");H.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:w,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(z,this,!1))},H.prototype.transition=H.prototype[D?"_transition":"_nonTransition"],H.prototype.onwebkitTransitionEnd=function(b){this.ontransitionend(b)},H.prototype.onotransitionend=function(b){this.ontransitionend(b)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};H.prototype.ontransitionend=function(f){if(f.target===this.element){var e=this._transn,h=v[f.propertyName]||f.propertyName;if(delete e.ingProperties[h],I(e.ingProperties)&&this.disableTransition(),h in e.clean&&(this.element.style[f.propertyName]="",delete e.clean[h]),h in e.onEnd){var g=e.onEnd[h];g.call(this),delete e.onEnd[h]}this.emitEvent("transitionEnd",[this])}},H.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(z,this,!1),this.isTransitioning=!1},H.prototype._removeStyles=function(e){var d={};for(var f in e){d[f]=""}this.css(d)};var u={transitionProperty:"",transitionDuration:""};return H.prototype.removeTransitionStyles=function(){this.css(u)},H.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},H.prototype.remove=function(){if(!D||!parseFloat(this.layout.options.transitionDuration)){return void this.removeElem()}var b=this;this.once("transitionEnd",function(){b.removeElem()}),this.hide()},H.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options,d={},f=this.getHideRevealTransitionEndProperty("visibleStyle");d[f]=this.onRevealTransitionEnd,this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0,onTransitionEnd:d})},H.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},H.prototype.getHideRevealTransitionEndProperty=function(e){var d=this.layout.options[e];if(d.opacity){return"opacity"}for(var f in d){return f}},H.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options,d={},f=this.getHideRevealTransitionEndProperty("hiddenStyle");d[f]=this.onHideTransitionEnd,this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:d})},H.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},H.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},H}),function(d,c){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(j,i,h,b,a){return c(d,j,i,h,b,a)}):"object"==typeof exports?module.exports=c(d,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):d.Outlayer=c(d,d.eventie,d.EventEmitter,d.getSize,d.fizzyUIUtils,d.Outlayer.Item)}(window,function(x,w,v,u,t,s){function r(f,e){var h=t.getQueryElement(f);if(!h){return void (q&&q.error("Bad element for "+this.constructor.namespace+": "+(h||f)))}this.element=h,p&&(this.$element=p(this.element)),this.options=t.extend({},this.constructor.defaults),this.option(e);var g=++n;this.element.outlayerGUID=g,m[g]=this,this._create(),this.options.isInitLayout&&this.layout()}var q=x.console,p=x.jQuery,o=function(){},n=0,m={};return r.namespace="outlayer",r.Item=s,r.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t.extend(r.prototype,v.prototype),r.prototype.option=function(b){t.extend(this.options,b)},r.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},r.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},r.prototype._itemize=function(j){for(var i=this._filterFindItemElements(j),B=this.constructor.Item,A=[],z=0,y=i.length;y>z;z++){var l=i[z],k=new B(l,this);A.push(k)}return A},r.prototype._filterFindItemElements=function(b){return t.filterFindElements(b,this.options.itemSelector)},r.prototype.getItemElements=function(){for(var e=[],d=0,f=this.items.length;f>d;d++){e.push(this.items[d].element)}return e},r.prototype.layout=function(){this._resetLayout(),this._manageStamps();var b=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,b),this._isLayoutInited=!0},r.prototype._init=r.prototype.layout,r.prototype._resetLayout=function(){this.getSize()},r.prototype.getSize=function(){this.size=u(this.element)},r.prototype._getMeasurement=function(e,d){var h,g=this.options[e];g?("string"==typeof g?h=this.element.querySelector(g):t.isElement(g)&&(h=g),this[e]=h?u(h)[d]:g):this[e]=0},r.prototype.layoutItems=function(d,c){d=this._getItemsForLayout(d),this._layoutItems(d,c),this._postLayout()},r.prototype._getItemsForLayout=function(g){for(var f=[],j=0,i=g.length;i>j;j++){var h=g[j];h.isIgnored||f.push(h)}return f},r.prototype._layoutItems=function(i,h){if(this._emitCompleteOnItems("layout",i),i&&i.length){for(var z=[],y=0,l=i.length;l>y;y++){var k=i[y],j=this._getItemLayoutPosition(k);j.item=k,j.isInstant=h||k.isLayoutInstant,z.push(j)}this._processLayoutQueue(z)}},r.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},r.prototype._processLayoutQueue=function(f){for(var e=0,h=f.length;h>e;e++){var g=f[e];this._positionItem(g.item,g.x,g.y,g.isInstant)}},r.prototype._positionItem=function(f,e,h,g){g?f.goTo(e,h):f.moveTo(e,h)},r.prototype._postLayout=function(){this.resizeContainer()},r.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var b=this._getContainerSize();b&&(this._setContainerMeasure(b.width,!0),this._setContainerMeasure(b.height,!1))}},r.prototype._getContainerSize=o,r.prototype._setContainerMeasure=function(e,d){if(void 0!==e){var f=this.size;f.isBorderBox&&(e+=d?f.paddingLeft+f.paddingRight+f.borderLeftWidth+f.borderRightWidth:f.paddingBottom+f.paddingTop+f.borderTopWidth+f.borderBottomWidth),e=Math.max(e,0),this.element.style[d?"width":"height"]=e+"px"}},r.prototype._emitCompleteOnItems=function(F,E){function D(){B.dispatchEvent(F+"Complete",null,[E])}function C(){z++,z===A&&D()}var B=this,A=E.length;if(!E||!A){return void D()}for(var z=0,y=0,l=E.length;l>y;y++){var k=E[y];k.once(F,C)}},r.prototype.dispatchEvent=function(g,f,j){var i=f?[f].concat(j):j;if(this.emitEvent(g,i),p){if(this.$element=this.$element||p(this.element),f){var h=p.Event(f);h.type=g,this.$element.trigger(h,j)}else{this.$element.trigger(g,j)}}},r.prototype.ignore=function(d){var c=this.getItem(d);c&&(c.isIgnored=!0)},r.prototype.unignore=function(d){var c=this.getItem(d);c&&delete c.isIgnored},r.prototype.stamp=function(f){if(f=this._find(f)){this.stamps=this.stamps.concat(f);for(var e=0,h=f.length;h>e;e++){var g=f[e];this.ignore(g)}}},r.prototype.unstamp=function(f){if(f=this._find(f)){for(var e=0,h=f.length;h>e;e++){var g=f[e];t.removeFrom(this.stamps,g),this.unignore(g)}}},r.prototype._find=function(b){return b?("string"==typeof b&&(b=this.element.querySelectorAll(b)),b=t.makeArray(b)):void 0},r.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,d=this.stamps.length;d>e;e++){var f=this.stamps[e];this._manageStamp(f)}}},r.prototype._getBoundingRect=function(){var d=this.element.getBoundingClientRect(),c=this.size;this._boundingRect={left:d.left+c.paddingLeft+c.borderLeftWidth,top:d.top+c.paddingTop+c.borderTopWidth,right:d.right-(c.paddingRight+c.borderRightWidth),bottom:d.bottom-(c.paddingBottom+c.borderBottomWidth)}},r.prototype._manageStamp=o,r.prototype._getElementOffset=function(g){var d=g.getBoundingClientRect(),j=this._boundingRect,i=u(g),h={left:d.left-j.left-i.marginLeft,top:d.top-j.top-i.marginTop,right:j.right-d.right-i.marginRight,bottom:j.bottom-d.bottom-i.marginBottom};return h},r.prototype.handleEvent=function(d){var c="on"+d.type;this[c]&&this[c](d)},r.prototype.bindResize=function(){this.isResizeBound||(w.bind(x,"resize",this),this.isResizeBound=!0)},r.prototype.unbindResize=function(){this.isResizeBound&&w.unbind(x,"resize",this),this.isResizeBound=!1},r.prototype.onresize=function(){function d(){c.resize(),delete c.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var c=this;this.resizeTimeout=setTimeout(d,100)},r.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},r.prototype.needsResizeLayout=function(){var d=u(this.element),c=this.size&&d;return c&&d.innerWidth!==this.size.innerWidth},r.prototype.addItems=function(d){var c=this._itemize(d);return c.length&&(this.items=this.items.concat(c)),c},r.prototype.appended=function(d){var c=this.addItems(d);c.length&&(this.layoutItems(c,!0),this.reveal(c))},r.prototype.prepended=function(e){var d=this._itemize(e);if(d.length){var f=this.items.slice(0);this.items=d.concat(f),this._resetLayout(),this._manageStamps(),this.layoutItems(d,!0),this.reveal(d),this.layoutItems(f)}},r.prototype.reveal=function(f){this._emitCompleteOnItems("reveal",f);for(var e=f&&f.length,h=0;e&&e>h;h++){var g=f[h];g.reveal()}},r.prototype.hide=function(f){this._emitCompleteOnItems("hide",f);for(var e=f&&f.length,h=0;e&&e>h;h++){var g=f[h];g.hide()}},r.prototype.revealItemElements=function(d){var c=this.getItems(d);this.reveal(c)},r.prototype.hideItemElements=function(d){var c=this.getItems(d);this.hide(c)},r.prototype.getItem=function(f){for(var e=0,h=this.items.length;h>e;e++){var g=this.items[e];if(g.element===f){return g}}},r.prototype.getItems=function(h){h=t.makeArray(h);for(var e=[],l=0,k=h.length;k>l;l++){var j=h[l],i=this.getItem(j);i&&e.push(i)}return e},r.prototype.remove=function(g){var e=this.getItems(g);if(this._emitCompleteOnItems("remove",e),e&&e.length){for(var j=0,i=e.length;i>j;j++){var h=e[j];h.remove(),t.removeFrom(this.items,h)}}},r.prototype.destroy=function(){var g=this.element.style;g.height="",g.position="",g.width="";for(var f=0,j=this.items.length;j>f;f++){var i=this.items[f];i.destroy()}this.unbindResize();var h=this.element.outlayerGUID;delete m[h],delete this.element.outlayerGUID,p&&p.removeData(this.element,this.constructor.namespace)},r.data=function(d){d=t.getQueryElement(d);var c=d&&d.outlayerGUID;return c&&m[c]},r.create=function(e,d){function f(){r.apply(this,arguments)}return Object.create?f.prototype=Object.create(r.prototype):t.extend(f.prototype,r.prototype),f.prototype.constructor=f,f.defaults=t.extend({},r.defaults),t.extend(f.defaults,d),f.prototype.settings={},f.namespace=e,f.data=r.data,f.Item=function(){s.apply(this,arguments)},f.Item.prototype=new s,t.htmlInit(f,e),p&&p.bridget&&p.bridget(e,f),f},r.Item=s,r}),function(d,c){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],c):"object"==typeof exports?module.exports=c(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):d.Masonry=c(d.Outlayer,d.getSize,d.fizzyUIUtils)}(window,function(f,e,h){var g=f.create("masonry");return g.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var b=this.cols;for(this.colYs=[];b--;){this.colYs.push(0)}this.maxY=0},g.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var b=this.items[0],n=b&&b.element;this.columnWidth=n&&e(n).outerWidth||this.containerWidth}var m=this.columnWidth+=this.gutter,l=this.containerWidth+this.gutter,k=l/m,j=m-l%m,i=j&&1>j?"round":"floor";k=Math[i](k),this.cols=Math.max(k,1)},g.prototype.getContainerWidth=function(){var b=this.options.isFitWidth?this.element.parentNode:this.element,d=e(b);this.containerWidth=d&&d.innerWidth},g.prototype._getItemLayoutPosition=function(v){v.getSize();var u=v.size.outerWidth%this.columnWidth,t=u&&1>u?"round":"ceil",s=Math[t](v.size.outerWidth/this.columnWidth);s=Math.min(s,this.cols);for(var r=this._getColGroup(s),q=Math.min.apply(Math,r),p=h.indexOf(r,q),o={x:this.columnWidth*p,y:q},n=q+v.size.outerHeight,m=this.cols+1-r.length,c=0;m>c;c++){this.colYs[p+c]=n}return o},g.prototype._getColGroup=function(j){if(2>j){return this.colYs}for(var i=[],m=this.cols+1-j,l=0;m>l;l++){var k=this.colYs.slice(l,l+j);i[l]=Math.max.apply(Math,k)}return i},g.prototype._manageStamp=function(r){var q=e(r),p=this._getElementOffset(r),o=this.options.isOriginLeft?p.left:p.right,n=o+q.outerWidth,m=Math.floor(o/this.columnWidth);m=Math.max(0,m);var l=Math.floor(n/this.columnWidth);l-=n%this.columnWidth?0:1,l=Math.min(this.cols-1,l);for(var k=(this.options.isOriginTop?p.top:p.bottom)+q.outerHeight,b=m;l>=b;b++){this.colYs[b]=Math.max(k,this.colYs[b])}},g.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var b={height:this.maxY};return this.options.isFitWidth&&(b.width=this._getContainerFitWidth()),b},g.prototype._getContainerFitWidth=function(){for(var d=0,c=this.cols;--c&&0===this.colYs[c];){d++}return(this.cols-d)*this.columnWidth-this.gutter},g.prototype.needsResizeLayout=function(){var b=this.containerWidth;return this.getContainerWidth(),b!==this.containerWidth},g});
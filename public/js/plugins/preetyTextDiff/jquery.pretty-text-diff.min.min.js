(function(){var a;a=jQuery;a.fn.extend({prettyTextDiff:function(c){var b,d;d={originalContainer:".original",changedContainer:".changed",diffContainer:".diff",cleanup:true,debug:false};d=a.extend(d,c);a.fn.prettyTextDiff.debug("Options: ",d,d);b=new diff_match_patch();return this.each(function(){var h,e,g,f;if(d.originalContent&&d.changedContent){f=a("<div />").html(d.originalContent).text();h=a("<div />").html(d.changedContent).text()}else{f=a(d.originalContainer,this).text();h=a(d.changedContainer,this).text()}a.fn.prettyTextDiff.debug("Original text found: ",f,d);a.fn.prettyTextDiff.debug("Changed  text found: ",h,d);g=b.diff_main(f,h);if(d.cleanup){b.diff_cleanupSemantic(g)}a.fn.prettyTextDiff.debug("Diffs: ",g,d);e=a.map(g,function(i){return a.fn.prettyTextDiff.createHTML(i)});a(d.diffContainer,this).html(e.join(""));return this})}});a.fn.prettyTextDiff.debug=function(d,b,c){if(c.debug){return console.log(d,b)}};a.fn.prettyTextDiff.createHTML=function(i){var d,f,c,h,b,e,g,j;f=[];h=/&/g;e=/</g;b=/>/g;g=/\n/g;c=i[0],d=i[1];j=d.replace(h,"&amp;").replace(e,"&lt;").replace(b,"&gt;").replace(g,"<br>");switch(c){case DIFF_INSERT:return"<ins>"+j+"</ins>";case DIFF_DELETE:return"<del>"+j+"</del>";case DIFF_EQUAL:return"<span>"+j+"</span>"}}}).call(this);